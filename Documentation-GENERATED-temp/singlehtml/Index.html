<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <title>
        documentation</title>

    
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="phpdocumentor/guides" name="generator">
<meta content="" name="docsearch:name">
<meta content="" name="docsearch:package_type">
<meta content="" name="docsearch:release">
<meta content="" name="docsearch:version">
<meta content="2025-10-23T19:49:09+00:00" name="docsearch:modified">
<meta content="2025-10-23T19:49:09+00:00" name="dc.modified">
<meta content="2025-10-23T19:49:09+00:00" property="article:modified_time">
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.dc">
<link href="../_resources/css/theme.css" rel="stylesheet">
<link href="https://docs.typo3.org/search/" rel="search" title="Search">
<script src="https://cdn.typo3.com/typo3infrastructure/universe/dist/webcomponents-loader.js"></script>
<script src="https://cdn.typo3.com/typo3infrastructure/universe/dist/typo3-universe.js" type="module"></script>
                </head>
<body>
<div class="page">
    <header>
    <div class="page-topbar">
        <div class="page-topbar-inner">
            <typo3-universe active="documentation">
                <div style="display: block; height: 44px; background-color: #313131;"></div>
            </typo3-universe>
        </div>
    </div>
    <div class="page-header">
        <div class="page-header-inner">
            <div class="d-flex flex-wrap">
                <div class="logo-wrapper">
                    <a class="logo" href="https://docs.typo3.org/" title="TYPO3 Documentation">
                        <img alt="TYPO3 Logo" class="logo-image" src="../_resources/img/typo3-logo.svg" width="484" height="130">
                    </a>
                </div>
                <div class="align-self-center order-lg-2 order-last">
                    
<div class="toc-header">
    <div class="toc-title pe-3">
                            <a class="toc-title-project" href="../Index.html">RTE CKEditor Image</a>
            </div>
    </div>                </div>
                <div class="ms-auto order-lg-3 d-flex">
                    <div class="menu-search-wrapper">
                        <button id="toc-toggle" class="btn btn-light d-block d-lg-none" tabindex="0" aria-controls="toc-collapse" aria-expanded="false">
                            <i class="fas fa-bars"></i> <span class="visually-hidden">Mobile Menu</span>
                        </button>
                        <all-documentations-menu data-override-url="https://render-guides.ddev.site/_resources/js/menu-proxy.php"></all-documentations-menu>
                                                <search role="search">
                            <form action="https://docs.typo3.org/search/search" id="global-search-form" method="get">
                                <div class="sr-only"><label for="globalsearchinput">TYPO3 documentation...</label></div>
                                <div class="input-group mb-3 mt-sm-3">
                                    <select class="form-select search__scope" id="searchscope" name="scope">
                                        <option value="">Search all</option>
                                    </select>
                                    <input autocomplete="off" class="form-control shadow-none" id="globalsearchinput" name="q" placeholder="TYPO3 documentation..." type="text" value="">
                                    <button class="btn btn-light" type="submit"><i class="fa fa-search"></i>&nbsp;<span class="d-none d-md-inline">Search</span></button>
                                </div>
                            </form>
                            <div id="global-search-root"></div>
                        </search>
                        <div class="position-relative d-inline-block">
                            <button id="options-toggle" class="btn btn-light d-block" type="button" aria-expanded="false">
                                <i class="fas fa-cog"></i> <span class="visually-hidden">Options</span>
                            </button>

                            <div id="options-panel"
                                 class="shadow p-3"
                                 role="menu"
                                 aria-hidden="true">
                                <h6 class="dropdown-header text-muted text-uppercase small mb-2">Options</h6>

                                                                                                        <a class="dropdown-item d-flex align-items-center gap-2" href="../Index.html" rel="noopener">
                                        <i class="fas fa-file-alt"></i>
                                        Switch to regular view
                                    </a>
                                                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>    <main class="page-main">
        <div class="page-main-inner">
            <div class="page-main-navigation">
                <nav>

                    <div id="toc-collapse">
                                                <div aria-label="main navigation" class="toc"
                             role="navigation">
                                                                                </div>
                    </div>
                </nav>
            </div>
            <div class="page-main-content">
                <div class="rst-content">                                                                <!-- content start -->
    <article>
            
<section class="section" id="rte-ckeditor-image" data-rst-anchor="start">
            <a id="start"></a>
            <h1>RTE CKEditor Image<a class="headerlink" href="#rte-ckeditor-image" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            <dl class="field-list simple ">
            <dt class="field-odd">Extension key</dt>

        <dd class="field-odd">
            
    <p>rte_ckeditor_image</p>
        </dd>
            <dt class="field-odd">Package name</dt>

        <dd class="field-odd">
            
    <p>netresearch/rte-ckeditor-image</p>
        </dd>
            <dt class="field-odd">Version</dt>

        <dd class="field-odd">
            
    <p>13.0.x</p>
        </dd>
            <dt class="field-odd">Language</dt>

        <dd class="field-odd">
            
    <p>en</p>
        </dd>
            <dt class="field-odd">Author</dt>

        <dd class="field-odd">
            
    <p>Netresearch DTT GmbH</p>
        </dd>
            <dt class="field-odd">License</dt>

        <dd class="field-odd">
            
    <p>This document is published under the
<a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons BY 4.0</a>
license.</p>
        </dd>
            <dt class="field-odd">Rendered</dt>

        <dd class="field-odd">
            
    <p>Thu, 23 Oct 2025 19:49:09 +0000</p>
        </dd>
    </dl>
            
    <p>Image support in CKEditor for the TYPO3 ecosystem.</p>

            <hr />
            <div class="row card-group pb-4 row-cols-1 row-cols-md-2 g-4">
    <div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üìò Introduction<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>The RTE CKEditor Image extension provides comprehensive image handling
capabilities for TYPO3&#039;s CKEditor Rich Text Editor with full FAL integration.</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#introduction" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>‚ö° Quick Start<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Get up and running quickly with installation instructions and
basic configuration examples.</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#quick-start" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>‚öôÔ∏è Configuration<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Learn how to configure custom image styles, processing options,
and frontend rendering setup.</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#integration" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üèóÔ∏è Architecture<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Understand the extension&#039;s architecture, design patterns,
and how components interact.</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#architecture-index" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üîß Developer API<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Explore the PHP and JavaScript APIs for extending and
customizing the extension.</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#api-documentation" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üêõ Troubleshooting<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Find solutions to common issues and learn debugging techniques.</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#troubleshooting-index" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div></div>
            <section class="section" id="introduction" data-rst-anchor="introduction">
            <a id="introduction"></a>
            <h2>Introduction<a class="headerlink" href="#introduction" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>The RTE CKEditor Image extension provides comprehensive image handling capabilities
for TYPO3&#039;s CKEditor Rich Text Editor. This extension enables editors to insert,
configure, and style images directly within the CKEditor interface, with full
integration into TYPO3&#039;s File Abstraction Layer (FAL).</p>

            <section class="section" id="key-features">
            <h3>Key Features<a class="headerlink" href="#key-features" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash">Native CKEditor 5 plugin integration</li>
    <li class="dash">Full TYPO3 FAL support with file browser integration</li>
    <li class="dash">Advanced image processing (magic images, cropping, scaling)</li>
    <li class="dash">Custom image style configuration</li>
    <li class="dash">Responsive image support</li>
    <li class="dash">Lazy loading and performance optimization</li>
    <li class="dash">Event-driven architecture for extensibility</li>
</ul>

    </section>
            <section class="section" id="visual-preview">
            <h3>Visual Preview<a class="headerlink" href="#visual-preview" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <figure class="with-shadow">
    <img
    src="Images/demo.gif"
                alt="RTE CKEditor Image extension demo"        />


            
                    <figcaption>
    <p>Image insertion and configuration in CKEditor with TYPO3 file browser integration</p>
</figcaption>
            </figure>
    </section>
            <section class="section" id="version-information">
            <h3>Version Information<a class="headerlink" href="#version-information" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <dl class="field-list simple ">
            <dt class="field-odd">Version</dt>

        <dd class="field-odd">
            
    <p>13.0.x for TYPO3 13.4+</p>
        </dd>
            <dt class="field-odd">License</dt>

        <dd class="field-odd">
            
    <p>AGPL-3.0-or-later</p>
        </dd>
            <dt class="field-odd">Repository</dt>

        <dd class="field-odd">
            
    <p><a href="https://github.com/netresearch/t3x-rte_ckeditor_image">github.com/netresearch/t3x-rte_ckeditor_image</a></p>
        </dd>
    </dl>
    </section>
    </section>
            <section class="section" id="requirements" data-rst-anchor="requirements">
            <a id="requirements"></a>
            <h2>Requirements<a class="headerlink" href="#requirements" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="system-requirements">
            <h3>System Requirements<a class="headerlink" href="#system-requirements" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><strong>TYPO3:</strong> 13.4 or later</li>
    <li class="dash"><strong>PHP:</strong> 8.2, 8.3, or 8.4</li>
    <li class="dash"><strong>Extensions:</strong> cms-rte-ckeditor (included in TYPO3 core)</li>
</ul>

    </section>
            <section class="section" id="critical-dependencies">
            <h3>Critical Dependencies<a class="headerlink" href="#critical-dependencies" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="versionchange versionadded">
    <p class="versionmodified">
        <span class="versionicon"><i class="fa-solid fa-rocket"></i></span>
        New in version 13.0.0</p>
    <article>
        
    <p>The CKEditor plugin now requires <code>StyleUtils</code> and <code>GeneralHtmlSupport</code>
dependencies for style functionality. Previous versions did not have this requirement.</p>

    </article>
</div>
            
    <p>The CKEditor plugin requires these dependencies for style functionality:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> requires() {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'StyleUtils'</span>, <span class="hljs-string">'GeneralHtmlSupport'</span>];
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition important" role="alert">
    <p class="admonition-title">Important</p>
            
    <p>Missing either plugin will disable the style dropdown for images.
See <a href="#ckeditor-style-integration">Style Integration</a> for details.</p>

</div>
    </section>
    </section>
            <section class="section" id="quick-start" data-rst-anchor="quick-start">
            <a id="quick-start"></a>
            <h2>Quick Start<a class="headerlink" href="#quick-start" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="installation">
            <h3>Installation<a class="headerlink" href="#installation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Install via Composer:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">composer require netresearch/rte-ckeditor-image</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>That&#039;s it!</strong> The extension works completely out-of-the-box with zero configuration:</p>

            

<ul>
    <li class="dash">‚úÖ <strong>Backend RTE</strong>: Automatically registers the <code>rteWithImages</code> preset and configures the toolbar with <code>insertimage</code> button for all sites</li>
    <li class="dash">‚úÖ <strong>Frontend Rendering</strong>: Automatically loads TypoScript for proper image rendering via <code>lib.parseFunc_RTE</code></li>
    <li class="dash">‚úÖ <strong>No Manual Steps</strong>: No template inclusion, no TSConfig setup, no YAML configuration required</li>
</ul>

            <figure class="with-shadow">
    <img
    src="Images/demo.gif"
    width="600px"            alt="Image button in CKEditor toolbar"        />


            
                    <figcaption>
    <p>The <code>insertimage</code> button provides full image management capabilities with TYPO3 file browser integration</p>
</figcaption>
            </figure>
    </section>
            <section class="section" id="custom-configuration-optional">
            <h3>Custom Configuration (Optional)<a class="headerlink" href="#custom-configuration-optional" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>If you need to customize the RTE configuration or create your own preset, see the
<a href="#integration-configuration-rte-setup">RTE Setup Guide</a> for detailed instructions.</p>

            
    <p>The extension provides a default preset that you can extend or override as needed.</p>

    </section>
    </section>
            <section class="section" id="quick-navigation-by-role" data-rst-anchor="navigation-by-role">
            <a id="navigation-by-role"></a>
            <h2>Quick Navigation by Role<a class="headerlink" href="#quick-navigation-by-role" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <div class="table-responsive">
    <table class="table table-bordered align-default colwidths-grid">
                    <colgroup>
                                    <col style="width: 15%">
                        </colgroup>
            <thead>
            <tr>
                            <th>Role</th>
                            <th>Start Here</th>
                            <th>Then Read</th>
                            <th>Advanced</th>
                    </tr>
        </thead>
        <tbody>
    <tr>
            <td><strong>Integrator</strong></td>            <td><a href="#integration">Configuration Guide</a></td>            <td><a href="#examples-common-use-cases">Examples</a></td>            <td><a href="#troubleshooting-index">Troubleshooting</a></td>    </tr>    <tr>
            <td><strong>PHP Dev</strong></td>            <td><a href="#architecture-index">Architecture</a></td>            <td><a href="#api-documentation">API Reference</a></td>            <td><a href="#api-datahandling">Data Handling</a></td>    </tr>    <tr>
            <td><strong>JS Dev</strong></td>            <td><a href="#ckeditor-plugin-development">CKEditor Plugin</a></td>            <td><a href="#ckeditor-style-integration">Style Integration</a></td>            <td><a href="#ckeditor-conversions">Conversions</a></td>    </tr>    <tr>
            <td><strong>Contributor</strong></td>            <td><a href="#architecture-index">Architecture</a></td>            <td><a href="#api-documentation">API Documentation</a></td>            <td><a href="#examples-common-use-cases">Examples</a></td>    </tr></tbody>    </table>
</div>
    </section>
            <section class="section" id="documentation-use-cases" data-rst-anchor="documentation-use-cases">
            <a id="documentation-use-cases"></a>
            <h2>Documentation Use Cases<a class="headerlink" href="#documentation-use-cases" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="for-integrators">
            <h3>For Integrators<a class="headerlink" href="#for-integrators" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><strong>Add custom image styles</strong> ‚Üí <a href="#integration">Configuration Guide</a></li>
    <li class="dash"><strong>Configure image processing</strong> ‚Üí <a href="#integration">Configuration Guide</a></li>
    <li class="dash"><strong>Set up frontend rendering</strong> ‚Üí <a href="#integration">Configuration Guide</a></li>
    <li class="dash"><strong>Enable lazy loading</strong> ‚Üí <a href="#examples-common-use-cases">Examples: Lazy Loading</a></li>
</ul>

    </section>
            <section class="section" id="for-developers">
            <h3>For Developers<a class="headerlink" href="#for-developers" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="php-backend-development">
            <h4>PHP Backend Development<a class="headerlink" href="#php-backend-development" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            

<ul>
    <li class="dash"><strong>Understand the architecture</strong> ‚Üí <a href="#architecture-index">Architecture Overview</a></li>
    <li class="dash"><strong>Controller APIs</strong> ‚Üí <a href="#api-controllers">Controllers API</a></li>
    <li class="dash"><strong>Customize image processing</strong> ‚Üí <a href="#api-datahandling">Data Handling API</a></li>
    <li class="dash"><strong>Listen to extension events</strong> ‚Üí <a href="#api-eventlisteners">Event Listeners</a></li>
</ul>

    </section>
            <section class="section" id="javascript-ckeditor-development">
            <h4>JavaScript/CKEditor Development<a class="headerlink" href="#javascript-ckeditor-development" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            

<ul>
    <li class="dash"><strong>Extend the CKEditor plugin</strong> ‚Üí <a href="#ckeditor-plugin-development">Plugin Development</a></li>
    <li class="dash"><strong>Style system integration</strong> ‚Üí <a href="#ckeditor-style-integration">Style Integration</a></li>
    <li class="dash"><strong>Custom model element</strong> ‚Üí <a href="#ckeditor-model-element">Model Element</a></li>
    <li class="dash"><strong>Conversion system</strong> ‚Üí <a href="#ckeditor-conversions">Conversions</a></li>
</ul>

    </section>
    </section>
            <section class="section" id="for-troubleshooters">
            <h3>For Troubleshooters<a class="headerlink" href="#for-troubleshooters" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><strong>Images not appearing</strong> ‚Üí <a href="#troubleshooting-frontend-rendering">Frontend Rendering Issues</a></li>
    <li class="dash"><strong>Style dropdown disabled</strong> ‚Üí <a href="#troubleshooting-style-dropdown">Style Drop-down Not Working</a></li>
    <li class="dash"><strong>File browser not opening</strong> ‚Üí <a href="#troubleshooting-file-browser">File Browser Issues</a></li>
    <li class="dash"><strong>Performance problems</strong> ‚Üí <a href="#troubleshooting-index">Common Issues</a></li>
</ul>

    </section>
    </section>
            <section class="section" id="support-contributing" data-rst-anchor="support-contributing">
            <a id="support-contributing"></a>
            <h2>Support &amp; Contributing<a class="headerlink" href="#support-contributing" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="get-help">
            <h3>Get Help<a class="headerlink" href="#get-help" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><a href="https://github.com/netresearch/t3x-rte_ckeditor_image/issues">GitHub Issues</a></li>
    <li class="dash"><a href="https://github.com/netresearch/t3x-rte_ckeditor_image/discussions">GitHub Discussions</a></li>
    <li class="dash"><a href="https://typo3.slack.com/archives/ext-rte_ckeditor_image">TYPO3 Slack #ext-rte_ckeditor_image</a></li>
</ul>

    </section>
            <section class="section" id="contribute">
            <h3>Contribute<a class="headerlink" href="#contribute" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash">Report bugs or request features via <a href="https://github.com/netresearch/t3x-rte_ckeditor_image/issues">GitHub Issues</a></li>
    <li class="dash">Submit pull requests for code improvements</li>
    <li class="dash">Improve documentation via pull requests</li>
    <li class="dash">Follow <a href="https://docs.typo3.org/m/typo3/guide-contributionworkflow/main/en-us/">TYPO3 Contribution Guidelines</a></li>
</ul>

    </section>
    </section>
            <section class="section" id="license" data-rst-anchor="license">
            <a id="license"></a>
            <h2>License<a class="headerlink" href="#license" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>This extension is licensed under <a href="https://www.gnu.org/licenses/agpl-3.0.html">AGPL-3.0-or-later</a>.</p>

    </section>
            <section class="section" id="credits" data-rst-anchor="credits">
            <a id="credits"></a>
            <h2>Credits<a class="headerlink" href="#credits" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="development-maintenance">
            <h3>Development &amp; Maintenance<a class="headerlink" href="#development-maintenance" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><a href="https://www.netresearch.de/">Netresearch DTT GmbH</a></li>
    <li class="dash">Sebastian Koschel</li>
    <li class="dash">Sebastian Mendel</li>
    <li class="dash">Rico Sonntag</li>
</ul>

    </section>
            <section class="section" id="community-contributors">
            <h3>Community Contributors<a class="headerlink" href="#community-contributors" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>See <a href="https://github.com/netresearch/t3x-rte_ckeditor_image/graphs/contributors">GitHub Contributors</a></p>

    </section>
    </section>
            <section class="section" id="additional-resources" data-rst-anchor="additional-resources">
            <a id="additional-resources"></a>
            <h2>Additional Resources<a class="headerlink" href="#additional-resources" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><strong>TYPO3 Extension Repository:</strong> <a href="https://extensions.typo3.org/extension/rte_ckeditor_image">extensions.typo3.org/extension/rte_ckeditor_image</a></li>
    <li class="dash"><strong>Packagist:</strong> <a href="https://packagist.org/packages/netresearch/rte-ckeditor-image">packagist.org/packages/netresearch/rte-ckeditor-image</a></li>
    <li class="dash"><strong>TYPO3 CKEditor Documentation:</strong> <a href="https://docs.typo3.org/c/typo3/cms-rte-ckeditor/13.4/en-us/">docs.typo3.org - RTE CKEditor</a></li>
    <li class="dash"><strong>CKEditor 5 Documentation:</strong> <a href="https://ckeditor.com/docs/ckeditor5/latest/">ckeditor.com/docs/ckeditor5</a></li>
</ul>

            
            
            
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="integration-configuration" data-rst-anchor="integration">
            <a id="integration"></a>
            <h1>Integration &amp; Configuration<a class="headerlink" href="#integration-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Complete configuration reference and integration guide for the RTE CKEditor Image extension.</p>

                
<div class="admonition important" role="alert">
    <p class="admonition-title">Important</p>
            
    <p><strong>Zero-Configuration Installation (v13.0.0+)</strong></p>

    <p>The extension works out-of-the-box after installation:</p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">composer require netresearch/rte-ckeditor-image</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    <p><strong>No manual configuration needed!</strong> The extension automatically:</p>


<ul>
    <li class="dash">‚úÖ Registers <code>rteWithImages</code> preset for backend RTE</li>
    <li class="dash">‚úÖ Configures toolbar with <code>insertimage</code> button</li>
    <li class="dash">‚úÖ Loads TypoScript for frontend rendering</li>
    <li class="dash">‚úÖ Applies configuration globally to all sites</li>
</ul>

    <p>This section is for <strong>advanced users</strong> who need custom RTE configurations beyond the defaults.</p>

</div>
            <section class="section" id="configuration-quick-reference">
            <h2>Configuration Quick Reference<a class="headerlink" href="#configuration-quick-reference" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="for-custom-rte-presets">
            <h3>For Custom RTE Presets<a class="headerlink" href="#for-custom-rte-presets" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>These examples show how to create <strong>custom configurations</strong> that override the automatic defaults.
If you just installed the extension and it&#039;s working, you don&#039;t need these.</p>

            <section class="section" id="minimum-custom-toolbar">
            <h4>Minimum Custom Toolbar<a class="headerlink" href="#minimum-custom-toolbar" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-comment"># Only needed if customizing the default toolbar</span>
<span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">toolbar:</span>
      <span class="hljs-attr">items:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">insertimage</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="custom-toolbar-with-specific-buttons">
            <h4>Custom Toolbar with Specific Buttons<a class="headerlink" href="#custom-toolbar-with-specific-buttons" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-comment"># Example: Custom preset with limited toolbar</span>
<span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">toolbar:</span>
      <span class="hljs-attr">items:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">bold</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">italic</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">insertimage</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="full-featured-custom-setup">
            <h4>Full-Featured Custom Setup<a class="headerlink" href="#full-featured-custom-setup" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            
    <p>See <a href="#integration-configuration-complete-example">Full-Featured Setup</a></p>

    </section>
    </section>
    </section>
            <section class="section" id="configuration-patterns">
            <h2>Configuration Patterns<a class="headerlink" href="#configuration-patterns" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="by-use-case">
            <h3>By Use Case<a class="headerlink" href="#by-use-case" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><strong>Basic editor</strong> ‚Üí <a href="#integration-configuration-minimal">Minimal Setup</a></li>
    <li class="dash"><strong>Style-aware images</strong> ‚Üí <a href="#integration-configuration-custom-styles">Adding Image Styles</a></li>
    <li class="dash"><strong>Responsive images</strong> ‚Üí <a href="#integration">Integration &amp; Configuration</a></li>
    <li class="dash"><strong>Restricted access</strong> ‚Üí <a href="#integration-configuration-permissions">File Mounts</a></li>
</ul>

    </section>
            <section class="section" id="by-component">
            <h3>By Component<a class="headerlink" href="#by-component" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><strong>CKEditor plugin</strong> ‚Üí <a href="#integration">Integration &amp; Configuration</a></li>
    <li class="dash"><strong>File browser</strong> ‚Üí <a href="#integration">Integration &amp; Configuration</a></li>
    <li class="dash"><strong>Frontend rendering</strong> ‚Üí <a href="#integration-configuration-frontend-rendering">Frontend Rendering</a></li>
    <li class="dash"><strong>Image processing</strong> ‚Üí <a href="#integration-configuration-image-processing">Image Processing Configuration</a></li>
</ul>

    </section>
    </section>
            <section class="section" id="configuration-topics">
            <h2>Configuration Topics<a class="headerlink" href="#configuration-topics" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <div class="row card-group pb-4 row-cols-1 row-cols-md-2 g-4">
    <div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üõ†Ô∏è RTE Setup<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>RTE configuration, presets, and toolbar setup</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#integration-configuration-rte-setup" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>‚öôÔ∏è TSConfig<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Page TSConfig settings, permissions, and file mounts</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#integration-configuration-tsconfig" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üñºÔ∏è Frontend Rendering<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>TypoScript configuration and frontend rendering setup</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#integration-configuration-frontend-rendering" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üîß Advanced Configuration<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Custom styles, performance optimization, and best practices</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#integration-configuration-advanced" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div></div>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <div class="row card-group pb-4 row-cols-1 row-cols-md-2 g-4">
    <div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üìö Examples<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Practical configuration examples and common use cases</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#examples-common-use-cases" class="btn btn-secondary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üîå API Documentation<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Backend integration and PHP APIs</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#api-documentation" class="btn btn-secondary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>‚öôÔ∏è CKEditor Plugin<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Frontend plugin development guide</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#ckeditor-plugin-development" class="btn btn-secondary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üêõ Troubleshooting<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Configuration issues and debugging</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#troubleshooting-index" class="btn btn-secondary stretched-link">Read more</a>
                                </div>
    </div>
        </div></div>
            
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="rte-setup" data-rst-anchor="integration-configuration-rte-setup">
            <a id="integration-configuration-rte-setup"></a>
            <h1>RTE Setup<a class="headerlink" href="#rte-setup" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Complete guide for configuring the RTE (Rich Text Editor) with CKEditor image support.</p>

                
<div class="admonition important" role="alert">
    <p class="admonition-title">Important</p>
            
    <p><strong>Zero-Configuration Installation (v13.0.0+)</strong></p>

    <p>The extension works out-of-the-box with zero manual configuration:</p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">composer require netresearch/rte-ckeditor-image</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    <p>The <code>insertimage</code> button is automatically available in all RTEs. <strong>No RTE configuration needed!</strong></p>

    <p>This guide is for <strong>advanced users</strong> who need custom RTE presets or want to override the defaults.</p>

</div>
            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#automatic-configuration-default">Automatic Configuration (Default)</a>


</li>
    <li class="toc-item">
    <a href="#custom-rte-configuration">Custom RTE Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#creating-custom-presets">Creating Custom Presets</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#register-custom-preset">Register Custom Preset</a>


</li>
            <li class="toc-item">
    <a href="#enable-custom-preset">Enable Custom Preset</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#advanced-rte-configuration">Advanced RTE Configuration</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#custom-allowed-extensions">Custom Allowed Extensions</a>


</li>
            <li class="toc-item">
    <a href="#multiple-rte-presets">Multiple RTE Presets</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#configuration-topics">Configuration Topics</a>


</li>
            <li class="toc-item">
    <a href="#general-documentation">General Documentation</a>


</li>
                    </ul>
</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="automatic-configuration-default">
            <h2>Automatic Configuration (Default)<a class="headerlink" href="#automatic-configuration-default" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>The extension automatically provides:</p>

            

<ul>
    <li class="dash"><strong>Preset</strong>: <code>rteWithImages</code> registered and enabled globally</li>
    <li class="dash"><strong>Toolbar</strong>: <code>insertimage</code> button included in default toolbar</li>
    <li class="dash"><strong>TypoScript</strong>: Frontend rendering hooks loaded automatically</li>
    <li class="dash"><strong>Configuration</strong>: <code>Configuration/RTE/Default.yaml</code> with full toolbar</li>
</ul>

            
    <p>To use the automatic configuration, simply install the extension. No additional steps required.</p>

    </section>
            <section class="section" id="custom-rte-configuration">
            <h2>Custom RTE Configuration<a class="headerlink" href="#custom-rte-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="creating-custom-presets" data-rst-anchor="integration-configuration-basic">
            <a id="integration-configuration-basic"></a>
            <h3>Creating Custom Presets<a class="headerlink" href="#creating-custom-presets" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>If you need to customize the toolbar or RTE behavior beyond the defaults, create a custom preset:</p>

                <div class="code-block-caption">
        <span class="caption-text">EXT:my_ext/Configuration/RTE/Custom.yaml</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">imports:</span>
  <span class="hljs-comment"># Import default RTE config</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor/Configuration/RTE/Default.yaml"</span> <span class="hljs-string">}</span>
  <span class="hljs-comment"># Import image plugin configuration</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor_image/Configuration/RTE/Plugin.yaml"</span> <span class="hljs-string">}</span>

<span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">toolbar:</span>
      <span class="hljs-attr">items:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">heading</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'|'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">insertimage</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">link</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'|'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">bold</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">italic</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <section class="section" id="register-custom-preset">
            <h4>Register Custom Preset<a class="headerlink" href="#register-custom-preset" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_ext/ext_localconf.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'RTE'</span>][<span class="hljs-string">'Presets'</span>][<span class="hljs-string">'custom'</span>]
    = <span class="hljs-string">'EXT:my_ext/Configuration/RTE/Custom.yaml'</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="enable-custom-preset">
            <h4>Enable Custom Preset<a class="headerlink" href="#enable-custom-preset" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
                <div class="code-block-caption">
        <span class="caption-text">Page TSConfig</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">RTE.default.preset = custom</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="advanced-rte-configuration">
            <h3>Advanced RTE Configuration<a class="headerlink" href="#advanced-rte-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="custom-allowed-extensions">
            <h4>Custom Allowed Extensions<a class="headerlink" href="#custom-allowed-extensions" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <section data-search-title="editor.externalPlugins.typo3image.allowedExtensions"
         data-search-id="confval-editor-externalplugins-typo3image-allowedextensions"
         data-search-facet="Option"
         class="confval-section"
         id="confval-editor-externalplugins-typo3image-allowedextensions"
>
    <h3 class="sr-only">editor.externalPlugins.typo3image.allowedExtensions</h3>
    <dl class="confval">
        <dt             class="d-flex justify-content-between">
            <div class="confval-header flex-grow-1">
                <code class="sig-name descname"><span
                        class="pre">editor.<wbr>external<wbr>Plugins.<wbr>typo3image.<wbr>allowed<wbr>Extensions</span></code>
                                    <a class="headerlink" href="#confval-editor-externalplugins-typo3image-allowedextensions"
                       data-bs-toggle="modal"
                       data-bs-target="#linkReferenceModal"
                       data-id="confval-editor-externalplugins-typo3image-allowedextensions"
                       title="Reference this configuration value"><i
                            class="fa-solid fa-paragraph"></i></a>
                </div>
            <div class="confval-back-to-top">                    <a href="#" class="backToTop" title="Back to top"><i
                            class="fa-solid fa-arrow-up fa-xs"></i></a>            </div>        </dt>
        <dd>
                        <div class="confval-description">
                <dl class="field-list simple ">
            <dt class="field-odd">type</dt>

        <dd class="field-odd">
            
    <p>string</p>
        </dd>
            <dt class="field-odd">Default</dt>

        <dd class="field-odd">
            
    <p>Value from <code>$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;GFX&#039;][&#039;imagefile_ext&#039;]</code></p>
        </dd>
    </dl>
    <p>Comma-separated list of allowed image file extensions for the RTE image plugin.</p>

    <p>Restricts which file types can be selected through the image browser.</p>

    <p><strong>Example:</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">editor:</span>
  <span class="hljs-attr">externalPlugins:</span>
    <span class="hljs-attr">typo3image:</span>
      <span class="hljs-attr">route:</span> <span class="hljs-string">"rteckeditorimage_wizard_select_image"</span>
      <span class="hljs-attr">allowedExtensions:</span> <span class="hljs-string">"jpg,jpeg,png,gif,webp"</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    <p>If not specified, falls back to the global TYPO3 configuration at <code>$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;GFX&#039;][&#039;imagefile_ext&#039;]</code></p>

            </div>
        </dd>
    </dl>
</section>
    </section>
            <section class="section" id="multiple-rte-presets">
            <h4>Multiple RTE Presets<a class="headerlink" href="#multiple-rte-presets" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            
    <p>Different configurations for different content types:</p>

                <div class="code-block-caption">
        <span class="caption-text">EXT:my_ext/Configuration/RTE/Simple.yaml</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">imports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor/Configuration/RTE/Minimal.yaml"</span> <span class="hljs-string">}</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor_image/Configuration/RTE/Plugin.yaml"</span> <span class="hljs-string">}</span>

<span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">removePlugins:</span> <span class="hljs-literal">null</span>
    <span class="hljs-attr">toolbar:</span>
      <span class="hljs-attr">items:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">insertimage</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                <div class="code-block-caption">
        <span class="caption-text">Different presets for different fields</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># Different presets for different fields</span>
RTE.default.preset = default
RTE.config.tt_content.bodytext.preset = full
RTE.config.tt_content.header.preset = simple</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="configuration-topics">
            <h3>Configuration Topics<a class="headerlink" href="#configuration-topics" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><a href="#integration-configuration-tsconfig">Page TSConfig Setup</a> - Page TSConfig settings and upload configuration</li>
    <li class="dash"><a href="#integration-configuration-frontend-rendering">Frontend Rendering</a> - TypoScript and frontend rendering setup</li>
    <li class="dash"><a href="#integration-configuration-advanced">Advanced Configuration</a> - Advanced configuration, styles, and best practices</li>
</ul>

    </section>
            <section class="section" id="general-documentation">
            <h3>General Documentation<a class="headerlink" href="#general-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><a href="#integration">Integration &amp; Configuration</a> - Main configuration guide overview</li>
    <li class="dash"><a href="#quick-start">Quick Start</a> - Quick start guide</li>
    <li class="dash"><a href="#troubleshooting-index">Troubleshooting &amp; Support</a> - Troubleshooting guide</li>
</ul>

    </section>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="page-tsconfig-setup" data-rst-anchor="integration-configuration-tsconfig">
            <a id="integration-configuration-tsconfig"></a>
            <h1>Page TSConfig Setup<a class="headerlink" href="#page-tsconfig-setup" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Configuration of page TSConfig settings for image handling, upload folders, and permissions.</p>

                
<div class="admonition important" role="alert">
    <p class="admonition-title">Important</p>
            
    <p><strong>Zero-Configuration Installation (v13.0.0+)</strong></p>

    <p>The extension automatically loads basic Page TSConfig via <code>ext_tables.php</code>:</p>


<ul>
    <li class="dash">‚úÖ Magic image processing enabled (maxWidth: 1920, maxHeight: 9999)</li>
    <li class="dash">‚úÖ RTE preset configured globally</li>
    <li class="dash">‚úÖ Processing modes set automatically</li>
</ul>

    <p>This section is for <strong>advanced users</strong> who need to customize these defaults or add field-specific configurations.</p>

</div>
            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#page-tsconfig">Page TSConfig</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#magic-image-configuration">Magic Image Configuration</a>


</li>
            <li class="toc-item">
    <a href="#processing-modes">Processing Modes</a>


</li>
            <li class="toc-item">
    <a href="#upload-folder-configuration">Upload Folder Configuration</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#content-element-configuration">Content Element Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#enable-for-specific-content-types">Enable for Specific Content Types</a>


</li>
            <li class="toc-item">
    <a href="#disable-for-specific-fields">Disable for Specific Fields</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#backend-user-permissions">Backend User Permissions</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#file-mounts">File Mounts</a>


</li>
            <li class="toc-item">
    <a href="#access-restrictions">Access Restrictions</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#multi-language-configuration">Multi-Language Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#language-specific-presets">Language-Specific Presets</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#troubleshooting-configuration">Troubleshooting Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#debug-rte-configuration">Debug RTE Configuration</a>


</li>
            <li class="toc-item">
    <a href="#verify-configuration-loading">Verify Configuration Loading</a>


</li>
            <li class="toc-item">
    <a href="#configuration-priority">Configuration Priority</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#configuration-topics">Configuration Topics</a>


</li>
            <li class="toc-item">
    <a href="#general-documentation">General Documentation</a>


</li>
                    </ul>
</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="page-tsconfig">
            <h2>Page TSConfig<a class="headerlink" href="#page-tsconfig" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="magic-image-configuration">
            <h3>Magic Image Configuration<a class="headerlink" href="#magic-image-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Configure maximum image dimensions for automatic image processing:</p>

            <section data-search-title="RTE.default.buttons.image.options.magic.maxWidth"
         data-search-id="confval-rte-default-buttons-image-options-magic-maxwidth"
         data-search-facet="Option"
         class="confval-section"
         id="confval-rte-default-buttons-image-options-magic-maxwidth"
>
    <h3 class="sr-only">RTE.default.buttons.image.options.magic.maxWidth</h3>
    <dl class="confval">
        <dt             class="d-flex justify-content-between">
            <div class="confval-header flex-grow-1">
                <code class="sig-name descname"><span
                        class="pre">RTE.<wbr>default.<wbr>buttons.<wbr>image.<wbr>options.<wbr>magic.<wbr>max<wbr>Width</span></code>
                                    <a class="headerlink" href="#confval-rte-default-buttons-image-options-magic-maxwidth"
                       data-bs-toggle="modal"
                       data-bs-target="#linkReferenceModal"
                       data-id="confval-rte-default-buttons-image-options-magic-maxwidth"
                       title="Reference this configuration value"><i
                            class="fa-solid fa-paragraph"></i></a>
                </div>
            <div class="confval-back-to-top">                    <a href="#" class="backToTop" title="Back to top"><i
                            class="fa-solid fa-arrow-up fa-xs"></i></a>            </div>        </dt>
        <dd>
                        <div class="confval-description">
                <dl class="field-list simple ">
            <dt class="field-odd">type</dt>

        <dd class="field-odd">
            
    <p>integer</p>
        </dd>
            <dt class="field-odd">Default</dt>

        <dd class="field-odd">
            
    <p>300</p>
        </dd>
    </dl>
    <p>Maximum width in pixels for images inserted through the RTE.</p>

    <p>Images larger than this value will be automatically resized during processing.</p>

            </div>
        </dd>
    </dl>
</section>
            <section data-search-title="RTE.default.buttons.image.options.magic.maxHeight"
         data-search-id="confval-rte-default-buttons-image-options-magic-maxheight"
         data-search-facet="Option"
         class="confval-section"
         id="confval-rte-default-buttons-image-options-magic-maxheight"
>
    <h3 class="sr-only">RTE.default.buttons.image.options.magic.maxHeight</h3>
    <dl class="confval">
        <dt             class="d-flex justify-content-between">
            <div class="confval-header flex-grow-1">
                <code class="sig-name descname"><span
                        class="pre">RTE.<wbr>default.<wbr>buttons.<wbr>image.<wbr>options.<wbr>magic.<wbr>max<wbr>Height</span></code>
                                    <a class="headerlink" href="#confval-rte-default-buttons-image-options-magic-maxheight"
                       data-bs-toggle="modal"
                       data-bs-target="#linkReferenceModal"
                       data-id="confval-rte-default-buttons-image-options-magic-maxheight"
                       title="Reference this configuration value"><i
                            class="fa-solid fa-paragraph"></i></a>
                </div>
            <div class="confval-back-to-top">                    <a href="#" class="backToTop" title="Back to top"><i
                            class="fa-solid fa-arrow-up fa-xs"></i></a>            </div>        </dt>
        <dd>
                        <div class="confval-description">
                <dl class="field-list simple ">
            <dt class="field-odd">type</dt>

        <dd class="field-odd">
            
    <p>integer</p>
        </dd>
            <dt class="field-odd">Default</dt>

        <dd class="field-odd">
            
    <p>1000</p>
        </dd>
    </dl>
    <p>Maximum height in pixels for images inserted through the RTE.</p>

    <p>Images taller than this value will be automatically resized during processing.</p>

            </div>
        </dd>
    </dl>
</section>
            
    <p><strong>Example:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">RTE.default.buttons.image.options.magic {
    maxWidth = 1920
    maxHeight = 9999
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition warning" role="alert">
    <p class="admonition-title">Warning</p>
            
    <p>Due to TYPO3 bug #87068, you may need to add these settings to root page config instead of custom template extensions.</p>

</div>
    </section>
            <section class="section" id="processing-modes">
            <h3>Processing Modes<a class="headerlink" href="#processing-modes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">RTE.default.proc.overruleMode := addToList(default)
RTE.default.proc.overruleMode := addToList(rtehtmlarea_images_db)</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="upload-folder-configuration" data-rst-anchor="integration-configuration-upload-folder">
            <a id="integration-configuration-upload-folder"></a>
            <h3>Upload Folder Configuration<a class="headerlink" href="#upload-folder-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section data-search-title="RTE.default.buttons.image.options.defaultUploadFolder"
         data-search-id="confval-rte-default-buttons-image-options-defaultuploadfolder"
         data-search-facet="Option"
         class="confval-section"
         id="confval-rte-default-buttons-image-options-defaultuploadfolder"
>
    <h3 class="sr-only">RTE.default.buttons.image.options.defaultUploadFolder</h3>
    <dl class="confval">
        <dt             class="d-flex justify-content-between">
            <div class="confval-header flex-grow-1">
                <code class="sig-name descname"><span
                        class="pre">RTE.<wbr>default.<wbr>buttons.<wbr>image.<wbr>options.<wbr>default<wbr>Upload<wbr>Folder</span></code>
                                    <a class="headerlink" href="#confval-rte-default-buttons-image-options-defaultuploadfolder"
                       data-bs-toggle="modal"
                       data-bs-target="#linkReferenceModal"
                       data-id="confval-rte-default-buttons-image-options-defaultuploadfolder"
                       title="Reference this configuration value"><i
                            class="fa-solid fa-paragraph"></i></a>
                </div>
            <div class="confval-back-to-top">                    <a href="#" class="backToTop" title="Back to top"><i
                            class="fa-solid fa-arrow-up fa-xs"></i></a>            </div>        </dt>
        <dd>
                        <div class="confval-description">
                <dl class="field-list simple ">
            <dt class="field-odd">type</dt>

        <dd class="field-odd">
            
    <p>string</p>
        </dd>
            <dt class="field-odd">Default</dt>

        <dd class="field-odd">
            
    <p>(empty)</p>
        </dd>
    </dl>
    <p>Default upload folder for images inserted through the RTE.</p>

    <p>Format: <code>&lt;storage_uid&gt;:&lt;folder_path&gt;</code></p>

    <p>Example: <code>1:rte_uploads/</code> uses storage 1 and uploads to <code>rte_uploads/</code> directory.</p>

            </div>
        </dd>
    </dl>
</section>
            <section data-search-title="RTE.default.buttons.image.options.createUploadFolderIfNeeded"
         data-search-id="confval-rte-default-buttons-image-options-createuploadfolderifneeded"
         data-search-facet="Option"
         class="confval-section"
         id="confval-rte-default-buttons-image-options-createuploadfolderifneeded"
>
    <h3 class="sr-only">RTE.default.buttons.image.options.createUploadFolderIfNeeded</h3>
    <dl class="confval">
        <dt             class="d-flex justify-content-between">
            <div class="confval-header flex-grow-1">
                <code class="sig-name descname"><span
                        class="pre">RTE.<wbr>default.<wbr>buttons.<wbr>image.<wbr>options.<wbr>create<wbr>Upload<wbr>Folder<wbr>If<wbr>Needed</span></code>
                                    <a class="headerlink" href="#confval-rte-default-buttons-image-options-createuploadfolderifneeded"
                       data-bs-toggle="modal"
                       data-bs-target="#linkReferenceModal"
                       data-id="confval-rte-default-buttons-image-options-createuploadfolderifneeded"
                       title="Reference this configuration value"><i
                            class="fa-solid fa-paragraph"></i></a>
                </div>
            <div class="confval-back-to-top">                    <a href="#" class="backToTop" title="Back to top"><i
                            class="fa-solid fa-arrow-up fa-xs"></i></a>            </div>        </dt>
        <dd>
                        <div class="confval-description">
                <dl class="field-list simple ">
            <dt class="field-odd">type</dt>

        <dd class="field-odd">
            
    <p>boolean</p>
        </dd>
            <dt class="field-odd">Default</dt>

        <dd class="field-odd">
            
    <p>false</p>
        </dd>
    </dl>
    <p>Automatically creates the upload folder if it doesn&#039;t exist.</p>

    <p>Recommended to set to <code>1</code> (true) to avoid upload errors.</p>

            </div>
        </dd>
    </dl>
</section>
            
    <p><strong>Example:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">RTE.default.buttons.image.options {
    defaultUploadFolder = 1:rte_uploads/
    createUploadFolderIfNeeded = 1
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="content-element-configuration">
            <h2>Content Element Configuration<a class="headerlink" href="#content-element-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="enable-for-specific-content-types">
            <h3>Enable for Specific Content Types<a class="headerlink" href="#enable-for-specific-content-types" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># Only enable for tt_content bodytext</span>
RTE.config.tt_content.bodytext {
    preset = default
    buttons.image.options.magic {
        maxWidth = 1200
        maxHeight = 800
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="disable-for-specific-fields">
            <h3>Disable for Specific Fields<a class="headerlink" href="#disable-for-specific-fields" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># Disable RTE entirely for specific field</span>
RTE.config.tt_content.header.disabled = 1</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="backend-user-permissions">
            <h2>Backend User Permissions<a class="headerlink" href="#backend-user-permissions" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="file-mounts" data-rst-anchor="integration-configuration-permissions">
            <a id="integration-configuration-permissions"></a>
            <h3>File Mounts<a class="headerlink" href="#file-mounts" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Ensure backend users have appropriate file mounts:</p>

                <div class="code-block-caption">
        <span class="caption-text">User TSConfig</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">options.defaultUploadFolder = 1:user_uploads/rte/</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="access-restrictions">
            <h3>Access Restrictions<a class="headerlink" href="#access-restrictions" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                <div class="code-block-caption">
        <span class="caption-text">User TSConfig</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># Allow only specific file extensions</span>
options.file_list.validFileExtensions = jpg,jpeg,png,gif,webp</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="multi-language-configuration">
            <h2>Multi-Language Configuration<a class="headerlink" href="#multi-language-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="language-specific-presets">
            <h3>Language-Specific Presets<a class="headerlink" href="#language-specific-presets" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-meta">[siteLanguage("locale") == "de_DE"]</span>
    RTE.default.preset = german
<span class="hljs-meta">[END]</span>

<span class="hljs-meta">[siteLanguage("locale") == "en_US"]</span>
    RTE.default.preset = english
<span class="hljs-meta">[END]</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="troubleshooting-configuration">
            <h2>Troubleshooting Configuration<a class="headerlink" href="#troubleshooting-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="debug-rte-configuration">
            <h3>Debug RTE Configuration<a class="headerlink" href="#debug-rte-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Enable RTE debugging:</p>

                <div class="code-block-caption">
        <span class="caption-text">Page TSConfig</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">RTE.default.showButtons = *
RTE.default.hideButtons =</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="verify-configuration-loading">
            <h3>Verify Configuration Loading<a class="headerlink" href="#verify-configuration-loading" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Check active RTE configuration in backend:</p>

            
    
<ol start="1" type="1">
    <li value="1">Edit content element</li>
    <li value="2">Open browser console</li>
    <li value="3">Check <code>CKEDITOR.config</code> object</li>
</ol>

    </section>
            <section class="section" id="configuration-priority">
            <h3>Configuration Priority<a class="headerlink" href="#configuration-priority" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Configuration precedence (highest to lowest):</p>

            
    
<ol start="1" type="1">
    <li value="1">Field-specific config: <code>RTE.config.tt_content.bodytext</code></li>
    <li value="2">Type-specific config: <code>RTE.config.tt_content</code></li>
    <li value="3">Default config: <code>RTE.default</code></li>
    <li value="4">Extension defaults</li>
</ol>

    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="configuration-topics">
            <h3>Configuration Topics<a class="headerlink" href="#configuration-topics" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><a href="#integration-configuration-rte-setup">RTE Setup</a> - RTE configuration and basic setup</li>
    <li class="dash"><a href="#integration-configuration-frontend-rendering">Frontend Rendering</a> - TypoScript and frontend rendering setup</li>
    <li class="dash"><a href="#integration-configuration-advanced">Advanced Configuration</a> - Advanced configuration, styles, and best practices</li>
</ul>

    </section>
            <section class="section" id="general-documentation">
            <h3>General Documentation<a class="headerlink" href="#general-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><a href="#integration">Integration &amp; Configuration</a> - Main configuration guide overview</li>
    <li class="dash"><a href="#quick-start">Quick Start</a> - Quick start guide</li>
    <li class="dash"><a href="#troubleshooting-index">Troubleshooting &amp; Support</a> - Troubleshooting guide</li>
</ul>

    </section>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="frontend-rendering" data-rst-anchor="integration-configuration-frontend-rendering">
            <a id="integration-configuration-frontend-rendering"></a>
            <h1>Frontend Rendering<a class="headerlink" href="#frontend-rendering" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>TypoScript configuration for frontend image rendering, CSS classes, lazy loading, and lightbox integration.</p>

                
<div class="admonition important" role="alert">
    <p class="admonition-title">Important</p>
            
    <p><strong>Zero-Configuration Installation (v13.0.0+)</strong></p>

    <p>The extension automatically loads TypoScript for frontend rendering via <code>ext_localconf.php</code>:</p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">composer require netresearch/rte-ckeditor-image</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    <p><strong>No manual static template inclusion needed!</strong> The extension automatically loads:</p>


<ul>
    <li class="dash">‚úÖ Image rendering hooks (<code>lib.parseFunc_RTE.tags.img</code>)</li>
    <li class="dash">‚úÖ Link rendering hooks (<code>lib.parseFunc_RTE.tags.a</code>)</li>
    <li class="dash">‚úÖ HTMLparser configuration for data attribute cleanup</li>
</ul>

    <p>This section is for <strong>advanced users</strong> who need to customize the default frontend rendering behavior.</p>

</div>
            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#typoscript-configuration">TypoScript Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#frontend-rendering-setup">Frontend Rendering Setup</a>


</li>
            <li class="toc-item">
    <a href="#default-css-class">Default CSS Class</a>


</li>
            <li class="toc-item">
    <a href="#lazyload-configuration">Lazyload Configuration</a>


</li>
            <li class="toc-item">
    <a href="#lightbox-integration">Lightbox Integration</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#automatic-typoscript-loading">Automatic TypoScript Loading</a>


</li>
    <li class="toc-item">
    <a href="#typoscript-reference">TypoScript Reference</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#complete-typoscript-configuration-options">Complete TypoScript Configuration Options</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#image-rendering">Image Rendering</a>


</li>
            <li class="toc-item">
    <a href="#link-rendering">Link Rendering</a>


</li>
            <li class="toc-item">
    <a href="#html-parser-configuration">HTML Parser Configuration</a>


</li>
            <li class="toc-item">
    <a href="#default-css-classes">Default CSS Classes</a>


</li>
            <li class="toc-item">
    <a href="#lazy-loading">Lazy Loading</a>


</li>
            <li class="toc-item">
    <a href="#lightbox-configuration">Lightbox Configuration</a>


</li>
            <li class="toc-item">
    <a href="#image-processing">Image Processing</a>


</li>
            <li class="toc-item">
    <a href="#encapsulation-configuration">Encapsulation Configuration</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#configuration-topics">Configuration Topics</a>


</li>
            <li class="toc-item">
    <a href="#general-documentation">General Documentation</a>


</li>
                    </ul>
</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="typoscript-configuration">
            <h2>TypoScript Configuration<a class="headerlink" href="#typoscript-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="frontend-rendering-setup">
            <h3>Frontend Rendering Setup<a class="headerlink" href="#frontend-rendering-setup" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>The extension provides default configuration. You can customize it:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE {
    tags.img = <span class="hljs-keyword">TEXT</span>
    tags.img {
        current = 1
        preUserFunc = Netresearch\RteCKEditorImage\Controller\ImageRenderingController-&gt;renderImageAttributes
    }

    tags.a = <span class="hljs-keyword">TEXT</span>
    tags.a {
        current = 1
        preUserFunc = Netresearch\RteCKEditorImage\Controller\ImageLinkRenderingController-&gt;renderImages
    }

    nonTypoTagStdWrap.HTMLparser.tags.img.fixAttrib {
        <span class="hljs-comment"># Remove internal data attributes from frontend</span>
        allparams.unset = 1
        data-htmlarea-file-uid.unset = 1
        data-htmlarea-file-table.unset = 1
        data-htmlarea-zoom.unset = 1
        data-htmlarea-clickenlarge.unset = 1
        data-title-override.unset = 1
        data-alt-override.unset = 1
    }
}

lib.parseFunc_RTE.nonTypoTagStdWrap.encapsLines.encapsTagList := addToList(img)</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="default-css-class">
            <h3>Default CSS Class<a class="headerlink" href="#default-css-class" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Add default class to all RTE images:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE {
    nonTypoTagStdWrap.HTMLparser.tags.img.fixAttrib.class {
        default = img-fluid responsive-image
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="lazyload-configuration">
            <h3>Lazyload Configuration<a class="headerlink" href="#lazyload-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Enable native browser lazy loading:</p>

                <div class="code-block-caption">
        <span class="caption-text">Template Constants</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">styles.content.image.lazyLoading = lazy
<span class="hljs-comment"># Options: lazy, eager, auto</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="lightbox-integration">
            <h3>Lightbox Integration<a class="headerlink" href="#lightbox-integration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>With fluid_styled_content:</p>

                <div class="code-block-caption">
        <span class="caption-text">Template Constants</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">styles.content.textmedia.linkWrap.lightboxEnabled = 1</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="automatic-typoscript-loading">
            <h2>Automatic TypoScript Loading<a class="headerlink" href="#automatic-typoscript-loading" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <div class="versionchange versionadded">
    <p class="versionmodified">
        <span class="versionicon"><i class="fa-solid fa-rocket"></i></span>
        New in version 13.0.0</p>
    <article>
        
    <p>TypoScript is now loaded automatically via <code>ext_localconf.php</code>.
Manual static template inclusion is no longer required.</p>

    </article>
</div>
            
    <p>The extension automatically loads frontend rendering configuration:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">ExtensionManagementUtility::addTypoScript(
    <span class="hljs-string">'rte_ckeditor_image'</span>,
    <span class="hljs-string">'setup'</span>,
    <span class="hljs-string">'@import "EXT:rte_ckeditor_image/Configuration/TypoScript/ImageRendering/setup.typoscript"'</span>
);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition note" role="alert">
    <p class="admonition-title">Note</p>
            
    <p>The static template <code>CKEditor Image Support</code> is still available for backward compatibility,
but is optional with automatic loading enabled.</p>

</div>
    </section>
            <section class="section" id="typoscript-reference" data-rst-anchor="typoscript-reference">
            <a id="typoscript-reference"></a>
            <h2>TypoScript Reference<a class="headerlink" href="#typoscript-reference" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="complete-typoscript-configuration-options">
            <h3>Complete TypoScript Configuration Options<a class="headerlink" href="#complete-typoscript-configuration-options" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="image-rendering">
            <h4>Image Rendering<a class="headerlink" href="#image-rendering" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE {
    tags.img = <span class="hljs-keyword">TEXT</span>
    tags.img {
        current = 1
        preUserFunc = Netresearch\RteCKEditorImage\Controller\ImageRenderingController-&gt;renderImageAttributes
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="link-rendering">
            <h4>Link Rendering<a class="headerlink" href="#link-rendering" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE {
    tags.a = <span class="hljs-keyword">TEXT</span>
    tags.a {
        current = 1
        preUserFunc = Netresearch\RteCKEditorImage\Controller\ImageLinkRenderingController-&gt;renderImages
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="html-parser-configuration">
            <h4>HTML Parser Configuration<a class="headerlink" href="#html-parser-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE.nonTypoTagStdWrap.HTMLparser.tags.img {
    fixAttrib {
        <span class="hljs-comment"># Remove internal data attributes</span>
        data-htmlarea-file-uid.unset = 1
        data-htmlarea-file-table.unset = 1
        data-htmlarea-zoom.unset = 1
        data-htmlarea-clickenlarge.unset = 1
        data-title-override.unset = 1
        data-alt-override.unset = 1
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="default-css-classes">
            <h4>Default CSS Classes<a class="headerlink" href="#default-css-classes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE.nonTypoTagStdWrap.HTMLparser.tags.img.fixAttrib.class {
    default = img-fluid
    list = img-fluid,img-thumbnail,rounded
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="lazy-loading">
            <h4>Lazy Loading<a class="headerlink" href="#lazy-loading" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># Template Constants</span>
styles.content.image.lazyLoading = lazy
<span class="hljs-comment"># Options: lazy, eager, auto</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="lightbox-configuration">
            <h4>Lightbox Configuration<a class="headerlink" href="#lightbox-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># Template Constants</span>
styles.content.textmedia.linkWrap.lightboxEnabled = 1
styles.content.textmedia.linkWrap.lightboxCssClass = lightbox
styles.content.textmedia.linkWrap.lightboxRelAttribute = lightbox<span class="hljs-meta">[{field:uid}]</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="image-processing">
            <h4>Image Processing<a class="headerlink" href="#image-processing" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE.nonTypoTagStdWrap.HTMLparser.tags.img {
    width =
    height =
    <span class="hljs-comment"># Allows TYPO3 to process dimensions</span>
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="encapsulation-configuration">
            <h4>Encapsulation Configuration<a class="headerlink" href="#encapsulation-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE.nonTypoTagStdWrap.encapsLines {
    encapsTagList := addToList(img)
    remapTag.img = p
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="configuration-topics">
            <h3>Configuration Topics<a class="headerlink" href="#configuration-topics" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><a href="#integration-configuration-rte-setup">RTE Setup</a> - RTE configuration and basic setup</li>
    <li class="dash"><a href="#integration-configuration-tsconfig">Page TSConfig Setup</a> - Page TSConfig settings and upload configuration</li>
    <li class="dash"><a href="#integration-configuration-advanced">Advanced Configuration</a> - Advanced configuration, styles, and best practices</li>
</ul>

    </section>
            <section class="section" id="general-documentation">
            <h3>General Documentation<a class="headerlink" href="#general-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><a href="#integration">Integration &amp; Configuration</a> - Main configuration guide overview</li>
    <li class="dash"><a href="#quick-start">Quick Start</a> - Quick start guide</li>
    <li class="dash"><a href="#troubleshooting-index">Troubleshooting &amp; Support</a> - Troubleshooting guide</li>
</ul>

    </section>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="advanced-configuration" data-rst-anchor="integration-configuration-advanced">
            <a id="integration-configuration-advanced"></a>
            <h1>Advanced Configuration<a class="headerlink" href="#advanced-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Advanced configuration options including custom styles, performance optimization, extension settings, and best practices.</p>

                
<div class="admonition note" role="alert">
    <p class="admonition-title">Note</p>
            
    <p><strong>For Advanced Users</strong></p>

    <p>The extension works out-of-the-box with zero configuration. This section covers:</p>


<ul>
    <li class="dash">Custom image styles and style groups</li>
    <li class="dash">Performance optimization and image processing</li>
    <li class="dash">Extension-specific settings</li>
    <li class="dash">Best practices for production environments</li>
</ul>

    <p>You only need these configurations if you want to customize beyond the automatic defaults.</p>

</div>
            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#ckeditor-style-configuration">CKEditor Style Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#adding-image-styles">Adding Image Styles</a>


</li>
            <li class="toc-item">
    <a href="#style-groups">Style Groups</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#extension-configuration">Extension Configuration</a>


</li>
    <li class="toc-item">
    <a href="#performance-optimization">Performance Optimization</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#image-processing-configuration">Image Processing Configuration</a>


</li>
            <li class="toc-item">
    <a href="#processed-file-cache">Processed File Cache</a>


</li>
            <li class="toc-item">
    <a href="#performance-best-practices">Performance Best Practices</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#example-configurations">Example Configurations</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#minimal-setup">Minimal Setup</a>


</li>
            <li class="toc-item">
    <a href="#full-featured-setup">Full-Featured Setup</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#best-practices">Best Practices</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#configuration-best-practices">Configuration Best Practices</a>


</li>
            <li class="toc-item">
    <a href="#security-considerations">Security Considerations</a>


</li>
            <li class="toc-item">
    <a href="#maintenance">Maintenance</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#configuration-topics">Configuration Topics</a>


</li>
            <li class="toc-item">
    <a href="#general-documentation">General Documentation</a>


</li>
                    </ul>
</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="ckeditor-style-configuration">
            <h2>CKEditor Style Configuration<a class="headerlink" href="#ckeditor-style-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="adding-image-styles" data-rst-anchor="integration-configuration-custom-styles">
            <a id="integration-configuration-custom-styles"></a>
            <h3>Adding Image Styles<a class="headerlink" href="#adding-image-styles" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Define custom styles for images:</p>

                <div class="code-block-caption">
        <span class="caption-text">EXT:my_ext/Configuration/RTE/Default.yaml</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">style:</span>
      <span class="hljs-attr">definitions:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Image Left'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['float-left',</span> <span class="hljs-string">'mr-3'</span><span class="hljs-string">]</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Image Right'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['float-right',</span> <span class="hljs-string">'ml-3'</span><span class="hljs-string">]</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Image Center'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['d-block',</span> <span class="hljs-string">'mx-auto'</span><span class="hljs-string">]</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Full Width'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['w-100']</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="style-groups">
            <h3>Style Groups<a class="headerlink" href="#style-groups" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Organize styles in groups:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">style:</span>
      <span class="hljs-attr">definitions:</span>
        <span class="hljs-comment"># ... style definitions ...</span>

      <span class="hljs-comment"># Group styles in dropdown</span>
      <span class="hljs-attr">groupDefinitions:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Image Alignment'</span>
          <span class="hljs-attr">styles:</span> <span class="hljs-string">['Image</span> <span class="hljs-string">Left',</span> <span class="hljs-string">'Image Right'</span><span class="hljs-string">,</span> <span class="hljs-string">'Image Center'</span><span class="hljs-string">]</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Image Size'</span>
          <span class="hljs-attr">styles:</span> <span class="hljs-string">['Full</span> <span class="hljs-string">Width',</span> <span class="hljs-string">'Half Width'</span><span class="hljs-string">]</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="extension-configuration">
            <h2>Extension Configuration<a class="headerlink" href="#extension-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>Configure extension behavior in Extension Manager or settings.php:</p>

            <section data-search-title="fetchExternalImages"
         data-search-id="confval-fetchexternalimages"
         data-search-facet="Option"
         class="confval-section"
         id="confval-fetchexternalimages"
>
    <h3 class="sr-only">fetchExternalImages</h3>
    <dl class="confval">
        <dt             class="d-flex justify-content-between">
            <div class="confval-header flex-grow-1">
                <code class="sig-name descname"><span
                        class="pre">fetch<wbr>External<wbr>Images</span></code>
                                    <a class="headerlink" href="#confval-fetchexternalimages"
                       data-bs-toggle="modal"
                       data-bs-target="#linkReferenceModal"
                       data-id="confval-fetchexternalimages"
                       title="Reference this configuration value"><i
                            class="fa-solid fa-paragraph"></i></a>
                </div>
            <div class="confval-back-to-top">                    <a href="#" class="backToTop" title="Back to top"><i
                            class="fa-solid fa-arrow-up fa-xs"></i></a>            </div>        </dt>
        <dd>
                        <div class="confval-description">
                <dl class="field-list simple ">
            <dt class="field-odd">type</dt>

        <dd class="field-odd">
            
    <p>boolean</p>
        </dd>
            <dt class="field-odd">Default</dt>

        <dd class="field-odd">
            
    <p>true</p>
        </dd>
            <dt class="field-odd">Path</dt>

        <dd class="field-odd">
            
    <p>$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;EXTENSIONS&#039;][&#039;rte_ckeditor_image&#039;][&#039;fetchExternalImages&#039;]</p>
        </dd>
    </dl>
    <p>Controls whether external image URLs are automatically fetched and uploaded to the backend user&#039;s upload folder.</p>

    <p>When enabled, pasting external image URLs into the editor will trigger automatic download and upload to FAL.</p>

    <p>Options:</p>


<ul>
    <li class="dash"><code>true</code>: External image URLs are fetched and uploaded to BE user&#039;s uploads folder</li>
    <li class="dash"><code>false</code>: External URLs remain as external links (not recommended for security)</li>
</ul>

    <p><strong>Example:</strong></p>
    <div class="code-block-caption">
        <span class="caption-text">settings.php or LocalConfiguration.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'EXTENSIONS'</span>][<span class="hljs-string">'rte_ckeditor_image'</span>] = [
    <span class="hljs-string">'fetchExternalImages'</span> =&gt; <span class="hljs-keyword">true</span>,
];</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            </div>
        </dd>
    </dl>
</section>
    </section>
            <section class="section" id="performance-optimization">
            <h2>Performance Optimization<a class="headerlink" href="#performance-optimization" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="image-processing-configuration" data-rst-anchor="integration-configuration-image-processing">
            <a id="integration-configuration-image-processing"></a>
            <h3>Image Processing Configuration<a class="headerlink" href="#image-processing-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                <div class="code-block-caption">
        <span class="caption-text">LocalConfiguration.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>] = [
    <span class="hljs-string">'processor'</span> =&gt; <span class="hljs-string">'ImageMagick'</span>,
    <span class="hljs-string">'processor_path'</span> =&gt; <span class="hljs-string">'/usr/bin/'</span>,
    <span class="hljs-string">'processor_enabled'</span> =&gt; <span class="hljs-keyword">true</span>,
    <span class="hljs-string">'processor_effects'</span> =&gt; <span class="hljs-keyword">true</span>,

    <span class="hljs-comment">// Image quality</span>
    <span class="hljs-string">'jpg_quality'</span> =&gt; <span class="hljs-number">85</span>,

    <span class="hljs-comment">// Maximum dimensions</span>
    <span class="hljs-string">'imagefile_ext'</span> =&gt; <span class="hljs-string">'gif,jpg,jpeg,png,webp'</span>,
];</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="processed-file-cache">
            <h3>Processed File Cache<a class="headerlink" href="#processed-file-cache" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>TYPO3 caches processed images in <code>_processed_/</code> folder. Clear if needed:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># TYPO3 CLI</span>
./vendor/bin/typo3 cache:flush --group=pages</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="performance-best-practices">
            <h3>Performance Best Practices<a class="headerlink" href="#performance-best-practices" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash">Configure appropriate image processing quality (jpg_quality: 85)</li>
    <li class="dash">Enable TYPO3 page caching for content with images</li>
    <li class="dash">Use WebP format where supported</li>
    <li class="dash">Implement lazy loading for images below the fold</li>
    <li class="dash">Set reasonable maximum dimensions in TSConfig</li>
    <li class="dash">Consider using CDN for image delivery in production</li>
</ul>

    </section>
    </section>
            <section class="section" id="example-configurations">
            <h2>Example Configurations<a class="headerlink" href="#example-configurations" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="minimal-setup" data-rst-anchor="integration-configuration-minimal">
            <a id="integration-configuration-minimal"></a>
            <h3>Minimal Setup<a class="headerlink" href="#minimal-setup" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                <div class="code-block-caption">
        <span class="caption-text">Minimal RTE with just image support</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">imports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor/Configuration/RTE/Minimal.yaml"</span> <span class="hljs-string">}</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor_image/Configuration/RTE/Plugin.yaml"</span> <span class="hljs-string">}</span>

<span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">removePlugins:</span> <span class="hljs-literal">null</span>
    <span class="hljs-attr">toolbar:</span>
      <span class="hljs-attr">items:</span> <span class="hljs-string">[insertimage]</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="full-featured-setup" data-rst-anchor="integration-configuration-complete-example">
            <a id="integration-configuration-complete-example"></a>
            <h3>Full-Featured Setup<a class="headerlink" href="#full-featured-setup" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                <div class="code-block-caption">
        <span class="caption-text">Complete RTE with all features</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">imports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor/Configuration/RTE/Full.yaml"</span> <span class="hljs-string">}</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor_image/Configuration/RTE/Plugin.yaml"</span> <span class="hljs-string">}</span>

<span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">removePlugins:</span> <span class="hljs-literal">null</span>
    <span class="hljs-attr">toolbar:</span>
      <span class="hljs-attr">items:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">heading</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'|'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">bold</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">italic</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'|'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">insertimage</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">link</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'|'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">bulletedList</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">numberedList</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'|'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">style</span>

    <span class="hljs-attr">style:</span>
      <span class="hljs-attr">definitions:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Image Left'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['float-left']</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Image Right'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['float-right']</span>

  <span class="hljs-attr">externalPlugins:</span>
    <span class="hljs-attr">typo3image:</span>
      <span class="hljs-attr">allowedExtensions:</span> <span class="hljs-string">"jpg,jpeg,png,gif,webp"</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                <div class="code-block-caption">
        <span class="caption-text">Page TSConfig</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">RTE.default {
    preset = full

    buttons.image.options.magic {
        maxWidth = 1920
        maxHeight = 1080
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                <div class="code-block-caption">
        <span class="caption-text">TypoScript Setup</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE.nonTypoTagStdWrap.HTMLparser.tags.img.fixAttrib.class {
    default = img-fluid
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="best-practices" data-rst-anchor="best-practices">
            <a id="best-practices"></a>
            <h2>Best Practices<a class="headerlink" href="#best-practices" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="configuration-best-practices">
            <h3>Configuration Best Practices<a class="headerlink" href="#configuration-best-practices" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    
<ol start="1" type="1">
    <li value="1"><strong>Start with minimal configuration</strong> and add features incrementally</li>
    <li value="2"><strong>Test in staging environment</strong> before deploying to production</li>
    <li value="3"><strong>Use separate RTE presets</strong> for different content types</li>
    <li value="4"><strong>Enable caching</strong> for processed images</li>
    <li value="5"><strong>Set appropriate maxWidth/maxHeight</strong> to prevent oversized images</li>
    <li value="6"><strong>Configure lazy loading</strong> for better performance</li>
    <li value="7"><strong>Use meaningful style names</strong> that reflect intent, not appearance</li>
    <li value="8"><strong>Document custom configurations</strong> for team members</li>
</ol>

    </section>
            <section class="section" id="security-considerations">
            <h3>Security Considerations<a class="headerlink" href="#security-considerations" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash">Restrict allowed file extensions to safe image formats</li>
    <li class="dash">Configure appropriate file mounts for backend users</li>
    <li class="dash">Review and limit upload folder permissions</li>
    <li class="dash">Validate image dimensions and file sizes</li>
    <li class="dash">Keep extension and TYPO3 core up to date</li>
</ul>

    </section>
            <section class="section" id="maintenance">
            <h3>Maintenance<a class="headerlink" href="#maintenance" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash">Regularly clear processed image cache</li>
    <li class="dash">Monitor storage usage in upload folders</li>
    <li class="dash">Review and clean unused images periodically</li>
    <li class="dash">Keep documentation of custom configurations</li>
    <li class="dash">Test after TYPO3 core or extension updates</li>
</ul>

    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="configuration-topics">
            <h3>Configuration Topics<a class="headerlink" href="#configuration-topics" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><a href="#integration-configuration-rte-setup">RTE Setup</a> - RTE configuration and basic setup</li>
    <li class="dash"><a href="#integration-configuration-tsconfig">Page TSConfig Setup</a> - Page TSConfig settings and upload configuration</li>
    <li class="dash"><a href="#integration-configuration-frontend-rendering">Frontend Rendering</a> - TypoScript and frontend rendering setup</li>
</ul>

    </section>
            <section class="section" id="general-documentation">
            <h3>General Documentation<a class="headerlink" href="#general-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><a href="#integration">Integration &amp; Configuration</a> - Main configuration guide overview</li>
    <li class="dash"><a href="#quick-start">Quick Start</a> - Quick start guide</li>
    <li class="dash"><a href="#troubleshooting-index">Troubleshooting &amp; Support</a> - Troubleshooting guide</li>
</ul>

    </section>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="examples-use-cases" data-rst-anchor="examples-common-use-cases">
            <a id="examples-common-use-cases"></a>
            <a id="examples"></a>
            <h1>Examples &amp; Use Cases<a class="headerlink" href="#examples-use-cases" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Practical, ready-to-use examples for common implementation scenarios with rte_ckeditor_image.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#examples-by-topic">Examples by Topic</a>


</li>
    <li class="toc-item">
    <a href="#quick-reference-links">Quick Reference Links</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="examples-by-topic">
            <h2>Examples by Topic<a class="headerlink" href="#examples-by-topic" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <div class="row card-group pb-4 row-cols-1 row-cols-md-2 g-4">
    <div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üöÄ Basic Integration<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Minimal setup guide for getting basic image functionality working quickly.
Perfect for new installations and quick starts.</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#examples-basic-integration" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üé® Image Styles<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Configure custom image styles with Bootstrap classes, CSS groups, and style dropdowns.
Includes both framework-based and custom CSS approaches.</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#examples-image-styles" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üì± Responsive Images<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Implement responsive images with automatic srcset generation and multiple breakpoints.
Complete PHP implementation with result examples.</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#examples-responsive-images" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>‚≠ê Advanced Features<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Add lightbox functionality with PhotoSwipe and implement lazy loading for performance.
Includes both native browser lazy loading and Intersection Observer fallbacks.</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#examples-advanced-features" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üîå Custom Extensions<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Extend the image plugin with custom dialog fields, external image handling,
multi-language support, and automatic backend processing hooks.</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#examples-custom-extensions" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>‚úÖ Testing<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Functional and unit test examples for ensuring quality and preventing regressions.
Includes controller tests and database hook tests.</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#examples-testing" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div></div>
    </section>
            <section class="section" id="quick-reference-links">
            <h2>Quick Reference Links<a class="headerlink" href="#quick-reference-links" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#integration">Integration &amp; Configuration</a> - Complete configuration guide</li>
    <li class="dash"><a href="#ckeditor-plugin-development">CKEditor Plugin Development</a> - Extend the plugin</li>
    <li class="dash"><a href="#api-controllers">Controllers API</a> - Controller APIs</li>
    <li class="dash"><a href="#troubleshooting-index">Troubleshooting &amp; Support</a> - Problem solving</li>
</ul>

            
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="basic-integration" data-rst-anchor="examples-basic-integration">
            <a id="examples-basic-integration"></a>
            <h1>Basic Integration<a class="headerlink" href="#basic-integration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Quick start guide demonstrating the zero-configuration installation and basic customization options.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#zero-configuration-installation">Zero-Configuration Installation</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#installation">Installation</a>


</li>
            <li class="toc-item">
    <a href="#verification">Verification</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#custom-configuration-optional">Custom Configuration (Optional)</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#custom-preset">Custom Preset</a>


</li>
            <li class="toc-item">
    <a href="#register-custom-preset">Register Custom Preset</a>


</li>
            <li class="toc-item">
    <a href="#enable-custom-preset">Enable Custom Preset</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="zero-configuration-installation">
            <h2>Zero-Configuration Installation<a class="headerlink" href="#zero-configuration-installation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p><strong>Objective</strong>: Get image functionality working with zero manual configuration</p>

            <section class="section" id="installation">
            <h3>Installation<a class="headerlink" href="#installation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">composer require netresearch/rte-ckeditor-image:^13.0</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>That&#039;s it!</strong> The extension automatically:</p>

            

<ul>
    <li class="dash">‚úÖ Registers the <code>rteWithImages</code> preset for backend RTE</li>
    <li class="dash">‚úÖ Configures toolbar with <code>insertimage</code> button for all sites</li>
    <li class="dash">‚úÖ Loads TypoScript for frontend image rendering</li>
    <li class="dash">‚úÖ No manual configuration required</li>
</ul>

            
    <p><strong>Result</strong>: Full image functionality working out-of-the-box ‚úÖ</p>

    </section>
            <section class="section" id="verification">
            <h3>Verification<a class="headerlink" href="#verification" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    
<ol start="1" type="1">
    <li value="1"><strong>Backend</strong>: Log into TYPO3 backend ‚Üí Edit any content element ‚Üí RTE should show image button</li>
    <li value="2"><strong>Frontend</strong>: Insert image in RTE ‚Üí Save ‚Üí View frontend ‚Üí Image renders correctly</li>
</ol>

            <figure class="with-shadow">
    <img
    src="../Images/demo.gif"
    width="600px"            alt="Image insertion demo"        />


            
                    <figcaption>
    <p>The <code>insertimage</code> button is automatically available after installation</p>
</figcaption>
            </figure>
    </section>
    </section>
            <section class="section" id="custom-configuration-optional">
            <h2>Custom Configuration (Optional)<a class="headerlink" href="#custom-configuration-optional" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>If you need to customize the RTE configuration, you can create your own preset:</p>

            <section class="section" id="custom-preset">
            <h3>Custom Preset<a class="headerlink" href="#custom-preset" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_site/Configuration/RTE/Custom.yaml</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">imports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor/Configuration/RTE/Default.yaml"</span> <span class="hljs-string">}</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor_image/Configuration/RTE/Plugin.yaml"</span> <span class="hljs-string">}</span>

<span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">toolbar:</span>
      <span class="hljs-attr">items:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">heading</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'|'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">bold</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">italic</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'|'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">insertimage</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">link</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="register-custom-preset">
            <h3>Register Custom Preset<a class="headerlink" href="#register-custom-preset" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_site/ext_localconf.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'RTE'</span>][<span class="hljs-string">'Presets'</span>][<span class="hljs-string">'custom'</span>]
    = <span class="hljs-string">'EXT:my_site/Configuration/RTE/Custom.yaml'</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="enable-custom-preset">
            <h3>Enable Custom Preset<a class="headerlink" href="#enable-custom-preset" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                <div class="code-block-caption">
        <span class="caption-text">Configuration/page.tsconfig</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">RTE.default.preset = custom</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition note" role="alert">
    <p class="admonition-title">Note</p>
            
    <p>The default <code>rteWithImages</code> preset is automatically configured.
Custom presets are only needed for specific toolbar or plugin customization.</p>

</div>
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#integration">Integration &amp; Configuration</a> - Complete configuration guide</li>
    <li class="dash"><a href="#examples-image-styles">Image Styles</a> - Add custom image styles</li>
    <li class="dash"><a href="#troubleshooting-index">Troubleshooting &amp; Support</a> - Problem solving</li>
</ul>

    </section>
    </section>

        </article>
<article>
            
<section class="section" id="image-styles" data-rst-anchor="examples-image-styles">
            <a id="examples-image-styles"></a>
            <h1>Image Styles<a class="headerlink" href="#image-styles" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Examples for configuring custom image styles with CSS classes and style groups.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#bootstrap-style-images">Bootstrap-Style Images</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#configuration">Configuration</a>


</li>
            <li class="toc-item">
    <a href="#css-if-not-using-bootstrap">CSS (if not using Bootstrap)</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="bootstrap-style-images">
            <h2>Bootstrap-Style Images<a class="headerlink" href="#bootstrap-style-images" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p><strong>Objective</strong>: Add Bootstrap image utility classes</p>

            <section class="section" id="configuration">
            <h3>Configuration<a class="headerlink" href="#configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_site/Configuration/RTE/Default.yaml</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">style:</span>
      <span class="hljs-attr">definitions:</span>
        <span class="hljs-comment"># Alignment Styles</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Float Left'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['float-start',</span> <span class="hljs-string">'me-3'</span><span class="hljs-string">,</span> <span class="hljs-string">'mb-3'</span><span class="hljs-string">]</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Float Right'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['float-end',</span> <span class="hljs-string">'ms-3'</span><span class="hljs-string">,</span> <span class="hljs-string">'mb-3'</span><span class="hljs-string">]</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Center'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['d-block',</span> <span class="hljs-string">'mx-auto'</span><span class="hljs-string">]</span>

        <span class="hljs-comment"># Size Styles</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Thumbnail'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['img-thumbnail']</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Rounded'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['rounded']</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Circle'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['rounded-circle']</span>

        <span class="hljs-comment"># Responsive</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Responsive'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['img-fluid']</span>

      <span class="hljs-attr">groupDefinitions:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Image Alignment'</span>
          <span class="hljs-attr">styles:</span> <span class="hljs-string">['Float</span> <span class="hljs-string">Left',</span> <span class="hljs-string">'Float Right'</span><span class="hljs-string">,</span> <span class="hljs-string">'Center'</span><span class="hljs-string">]</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Image Style'</span>
          <span class="hljs-attr">styles:</span> <span class="hljs-string">['Thumbnail',</span> <span class="hljs-string">'Rounded'</span><span class="hljs-string">,</span> <span class="hljs-string">'Circle'</span><span class="hljs-string">,</span> <span class="hljs-string">'Responsive'</span><span class="hljs-string">]</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="css-if-not-using-bootstrap">
            <h3>CSS (if not using Bootstrap)<a class="headerlink" href="#css-if-not-using-bootstrap" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_site/Resources/Public/Css/rte-images.css</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs css"><span class="hljs-selector-class">.float-start</span> { <span class="hljs-attribute">float</span>: left; }
<span class="hljs-selector-class">.float-end</span> { <span class="hljs-attribute">float</span>: right; }
<span class="hljs-selector-class">.me-3</span> { <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">1rem</span>; }
<span class="hljs-selector-class">.ms-3</span> { <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">1rem</span>; }
<span class="hljs-selector-class">.mb-3</span> { <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1rem</span>; }
<span class="hljs-selector-class">.d-block</span> { <span class="hljs-attribute">display</span>: block; }
<span class="hljs-selector-class">.mx-auto</span> { <span class="hljs-attribute">margin-left</span>: auto; <span class="hljs-attribute">margin-right</span>: auto; }

<span class="hljs-selector-class">.img-thumbnail</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.25rem</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#dee2e6</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">0.25rem</span>;
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: auto;
}

<span class="hljs-selector-class">.rounded</span> { <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">0.25rem</span>; }
<span class="hljs-selector-class">.rounded-circle</span> { <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>; }
<span class="hljs-selector-class">.img-fluid</span> { <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">height</span>: auto; }</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Result</strong>: Professional image styling options ‚úÖ</p>

    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#ckeditor-style-integration">CKEditor Style Integration</a> - Style system details</li>
    <li class="dash"><a href="#examples-responsive-images">Responsive Images</a> - Responsive image examples</li>
    <li class="dash"><a href="#integration">Integration &amp; Configuration</a> - Configuration guide</li>
</ul>

    </section>
    </section>

        </article>
<article>
            
<section class="section" id="responsive-images" data-rst-anchor="examples-responsive-images">
            <a id="examples-responsive-images"></a>
            <h1>Responsive Images<a class="headerlink" href="#responsive-images" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Examples for implementing responsive images with srcset and automatic generation.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#automatic-srcset-generation">Automatic srcset Generation</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#typoscript-setup">TypoScript Setup</a>


</li>
            <li class="toc-item">
    <a href="#php-implementation">PHP Implementation</a>


</li>
            <li class="toc-item">
    <a href="#result-html">Result HTML</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="automatic-srcset-generation">
            <h2>Automatic srcset Generation<a class="headerlink" href="#automatic-srcset-generation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p><strong>Objective</strong>: Generate responsive images with srcset</p>

            <section class="section" id="typoscript-setup">
            <h3>TypoScript Setup<a class="headerlink" href="#typoscript-setup" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_site/Configuration/TypoScript/setup.typoscript</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE {
    tags.img = <span class="hljs-keyword">TEXT</span>
    tags.img {
        current = 1
        preUserFunc = MyVendor\MySite\UserFunc\ResponsiveImageRenderer-&gt;render
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="php-implementation">
            <h3>PHP Implementation<a class="headerlink" href="#php-implementation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_site/Classes/UserFunc/ResponsiveImageRenderer.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">MyVendor</span>\<span class="hljs-title">MySite</span>\<span class="hljs-title">UserFunc</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Resource</span>\<span class="hljs-title">FileRepository</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Resource</span>\<span class="hljs-title">ProcessedFile</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Utility</span>\<span class="hljs-title">GeneralUtility</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Frontend</span>\<span class="hljs-title">ContentObject</span>\<span class="hljs-title">ContentObjectRenderer</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ResponsiveImageRenderer</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span><span class="hljs-params">(
        string $content,
        array $conf,
        ContentObjectRenderer $cObj
    )</span>: <span class="hljs-title">string</span> </span>{
        <span class="hljs-comment">// Parse img tag</span>
        <span class="hljs-keyword">if</span> (!preg_match(<span class="hljs-string">'/&lt;img([^&gt;]*)&gt;/i'</span>, $content, $imgMatch)) {
            <span class="hljs-keyword">return</span> $content;
        }

        <span class="hljs-comment">// Extract data-htmlarea-file-uid</span>
        <span class="hljs-keyword">if</span> (!preg_match(<span class="hljs-string">'/data-htmlarea-file-uid="(\d+)"/'</span>, $imgMatch[<span class="hljs-number">1</span>], $uidMatch)) {
            <span class="hljs-keyword">return</span> $content;
        }

        $fileUid = (int)$uidMatch[<span class="hljs-number">1</span>];

        <span class="hljs-comment">// Get FAL file</span>
        $fileRepository = GeneralUtility::makeInstance(FileRepository::class);
        <span class="hljs-keyword">try</span> {
            $file = $fileRepository-&gt;findByUid($fileUid);
        } <span class="hljs-keyword">catch</span> (\<span class="hljs-keyword">Exception</span> $e) {
            <span class="hljs-keyword">return</span> $content;
        }

        <span class="hljs-comment">// Generate responsive variants</span>
        $breakpoints = [
            <span class="hljs-string">'xs'</span> =&gt; <span class="hljs-number">480</span>,
            <span class="hljs-string">'sm'</span> =&gt; <span class="hljs-number">768</span>,
            <span class="hljs-string">'md'</span> =&gt; <span class="hljs-number">992</span>,
            <span class="hljs-string">'lg'</span> =&gt; <span class="hljs-number">1200</span>,
            <span class="hljs-string">'xl'</span> =&gt; <span class="hljs-number">1920</span>
        ];

        $srcsetParts = [];
        <span class="hljs-keyword">foreach</span> ($breakpoints <span class="hljs-keyword">as</span> $name =&gt; $width) {
            $processedFile = $file-&gt;process(
                ProcessedFile::CONTEXT_IMAGECROPSCALEMASK,
                [<span class="hljs-string">'width'</span> =&gt; $width]
            );
            $srcsetParts[] = $processedFile-&gt;getPublicUrl() . <span class="hljs-string">' '</span> . $width . <span class="hljs-string">'w'</span>;
        }

        $srcset = implode(<span class="hljs-string">', '</span>, $srcsetParts);
        $sizes = <span class="hljs-string">'(max-width: 768px) 100vw, (max-width: 992px) 50vw, 33vw'</span>;

        <span class="hljs-comment">// Replace img tag with srcset version</span>
        $newImg = str_replace(
            <span class="hljs-string">'&lt;img'</span>,
            <span class="hljs-string">'&lt;img srcset="'</span> . htmlspecialchars($srcset) . <span class="hljs-string">'" sizes="'</span> . $sizes . <span class="hljs-string">'"'</span>,
            $imgMatch[<span class="hljs-number">0</span>]
        );

        <span class="hljs-keyword">return</span> str_replace($imgMatch[<span class="hljs-number">0</span>], $newImg, $content);
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="result-html">
            <h3>Result HTML<a class="headerlink" href="#result-html" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span>
    <span class="hljs-attr">src</span>=<span class="hljs-string">"/fileadmin/image.jpg"</span>
    <span class="hljs-attr">srcset</span>=<span class="hljs-string">"/fileadmin/_processed_/image_480.jpg 480w,
            /fileadmin/_processed_/image_768.jpg 768w,
            /fileadmin/_processed_/image_992.jpg 992w,
            /fileadmin/_processed_/image_1200.jpg 1200w,
            /fileadmin/_processed_/image_1920.jpg 1920w"</span>
    <span class="hljs-attr">sizes</span>=<span class="hljs-string">"(max-width: 768px) 100vw, (max-width: 992px) 50vw, 33vw"</span>
    <span class="hljs-attr">alt</span>=<span class="hljs-string">"Image description"</span>
/&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Result</strong>: Automatic responsive images ‚úÖ</p>

    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#examples-advanced-features">Advanced Features</a> - Lightbox and lazy loading</li>
    <li class="dash"><a href="#integration">Integration &amp; Configuration</a> - Configuration guide</li>
    <li class="dash"><a href="#api-controllers">Controllers API</a> - Controller APIs</li>
</ul>

    </section>
    </section>

        </article>
<article>
            
<section class="section" id="advanced-features" data-rst-anchor="examples-advanced-features">
            <a id="examples-advanced-features"></a>
            <h1>Advanced Features<a class="headerlink" href="#advanced-features" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Examples for implementing lightbox functionality and lazy loading for performance optimization.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#lightbox-integration">Lightbox Integration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#photoswipe-lightbox">PhotoSwipe Lightbox</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#install-photoswipe">Install PhotoSwipe</a>


</li>
            <li class="toc-item">
    <a href="#typoscript-setup">TypoScript Setup</a>


</li>
            <li class="toc-item">
    <a href="#php-wrapper">PHP Wrapper</a>


</li>
            <li class="toc-item">
    <a href="#javascript-initialization">JavaScript Initialization</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#lazy-loading">Lazy Loading</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#native-lazy-loading">Native Lazy Loading</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#typoscript-setup">TypoScript Setup</a>


</li>
            <li class="toc-item">
    <a href="#result-html">Result HTML</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#intersection-observer-fallback">Intersection Observer Fallback</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#typoscript">TypoScript</a>


</li>
            <li class="toc-item">
    <a href="#javascript">JavaScript</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="lightbox-integration">
            <h2>Lightbox Integration<a class="headerlink" href="#lightbox-integration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="photoswipe-lightbox">
            <h3>PhotoSwipe Lightbox<a class="headerlink" href="#photoswipe-lightbox" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Objective</strong>: Add lightbox functionality to images</p>

            <section class="section" id="install-photoswipe">
            <h4>Install PhotoSwipe<a class="headerlink" href="#install-photoswipe" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">npm install photoswipe</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="typoscript-setup">
            <h4>TypoScript Setup<a class="headerlink" href="#typoscript-setup" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">page {
    includeJSFooterlibs {
        photoswipe = <span class="hljs-bullet">EXT:my_site/Resources/Public/JavaScript/photoswipe.min.js</span>
        photoswipe_init = <span class="hljs-bullet">EXT:my_site/Resources/Public/JavaScript/lightbox-init.js</span>
    }

    includeCSS {
        photoswipe = <span class="hljs-bullet">EXT:my_site/Resources/Public/Css/photoswipe.css</span>
    }
}

lib.parseFunc_RTE {
    tags.img = <span class="hljs-keyword">TEXT</span>
    tags.img {
        current = 1
        preUserFunc = MyVendor\MySite\UserFunc\LightboxImageRenderer-&gt;render
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="php-wrapper">
            <h4>PHP Wrapper<a class="headerlink" href="#php-wrapper" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_site/Classes/UserFunc/LightboxImageRenderer.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">MyVendor</span>\<span class="hljs-title">MySite</span>\<span class="hljs-title">UserFunc</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Resource</span>\<span class="hljs-title">FileRepository</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Utility</span>\<span class="hljs-title">GeneralUtility</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Frontend</span>\<span class="hljs-title">ContentObject</span>\<span class="hljs-title">ContentObjectRenderer</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LightboxImageRenderer</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span><span class="hljs-params">(
        string $content,
        array $conf,
        ContentObjectRenderer $cObj
    )</span>: <span class="hljs-title">string</span> </span>{
        <span class="hljs-comment">// Check if zoom enabled</span>
        <span class="hljs-keyword">if</span> (strpos($content, <span class="hljs-string">'data-htmlarea-zoom'</span>) === <span class="hljs-keyword">false</span>) {
            <span class="hljs-keyword">return</span> $content;
        }

        <span class="hljs-comment">// Extract file UID</span>
        <span class="hljs-keyword">if</span> (!preg_match(<span class="hljs-string">'/data-htmlarea-file-uid="(\d+)"/'</span>, $content, $match)) {
            <span class="hljs-keyword">return</span> $content;
        }

        $fileUid = (int)$match[<span class="hljs-number">1</span>];
        $fileRepository = GeneralUtility::makeInstance(FileRepository::class);

        <span class="hljs-keyword">try</span> {
            $file = $fileRepository-&gt;findByUid($fileUid);
        } <span class="hljs-keyword">catch</span> (\<span class="hljs-keyword">Exception</span> $e) {
            <span class="hljs-keyword">return</span> $content;
        }

        <span class="hljs-comment">// Remove data attributes for frontend</span>
        $content = preg_replace(<span class="hljs-string">'/\s*data-htmlarea-[^=]+="[^"]*"/'</span>, <span class="hljs-string">''</span>, $content);

        <span class="hljs-comment">// Wrap in lightbox link</span>
        $lightboxLink = sprintf(
            <span class="hljs-string">'&lt;a href="%s" data-pswp-width="%d" data-pswp-height="%d" target="_blank"&gt;%s&lt;/a&gt;'</span>,
            $file-&gt;getPublicUrl(),
            $file-&gt;getProperty(<span class="hljs-string">'width'</span>),
            $file-&gt;getProperty(<span class="hljs-string">'height'</span>),
            $content
        );

        <span class="hljs-keyword">return</span> $lightboxLink;
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="javascript-initialization">
            <h4>JavaScript Initialization<a class="headerlink" href="#javascript-initialization" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_site/Resources/Public/JavaScript/lightbox-init.js</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">import</span> PhotoSwipeLightbox <span class="hljs-keyword">from</span> <span class="hljs-string">'photoswipe/lightbox'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'photoswipe/style.css'</span>;

<span class="hljs-keyword">const</span> lightbox = <span class="hljs-keyword">new</span> PhotoSwipeLightbox({
    <span class="hljs-attr">gallery</span>: <span class="hljs-string">'.ce-bodytext'</span>,
    <span class="hljs-attr">children</span>: <span class="hljs-string">'a[data-pswp-width]'</span>,
    <span class="hljs-attr">pswpModule</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'photoswipe'</span>),
});

lightbox.init();</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Result</strong>: Click-to-enlarge images with lightbox ‚úÖ</p>

    </section>
    </section>
    </section>
            <section class="section" id="lazy-loading">
            <h2>Lazy Loading<a class="headerlink" href="#lazy-loading" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="native-lazy-loading">
            <h3>Native Lazy Loading<a class="headerlink" href="#native-lazy-loading" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Objective</strong>: Improve page load performance with native lazy loading</p>

            <section class="section" id="typoscript-setup">
            <h4>TypoScript Setup<a class="headerlink" href="#typoscript-setup" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE {
    nonTypoTagStdWrap.HTMLparser.tags.img {
        fixAttrib {
            loading {
                set = lazy
            }
            <span class="hljs-comment"># Remove internal attributes</span>
            data-htmlarea-file-uid.unset = 1
            data-htmlarea-file-table.unset = 1
            data-htmlarea-zoom.unset = 1
        }
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="result-html">
            <h4>Result HTML<a class="headerlink" href="#result-html" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"..."</span> <span class="hljs-attr">loading</span>=<span class="hljs-string">"lazy"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"..."</span> /&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="intersection-observer-fallback">
            <h3>Intersection Observer Fallback<a class="headerlink" href="#intersection-observer-fallback" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>For older browsers</strong>:</p>

            <section class="section" id="typoscript">
            <h4>TypoScript<a class="headerlink" href="#typoscript" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">page.includeJSFooterlibs.lazyload = <span class="hljs-bullet">EXT:my_site/Resources/Public/JavaScript/lazyload.js</span>

lib.parseFunc_RTE {
    nonTypoTagStdWrap.HTMLparser.tags.img {
        fixAttrib {
            class {
                list = lazyload
            }
            data-src {
                <span class="hljs-comment"># Copy src to data-src</span>
                stdWrap.field = src
            }
            src {
                <span class="hljs-comment"># Set placeholder</span>
<span class="hljs-assignment">                set = data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 3 2'%3E%3C/svg%3E</span>
            }
        }
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="javascript">
            <h4>JavaScript<a class="headerlink" href="#javascript" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_site/Resources/Public/JavaScript/lazyload.js</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> imageObserver = <span class="hljs-keyword">new</span> IntersectionObserver(<span class="hljs-function">(<span class="hljs-params">entries, observer</span>) =&gt;</span> {
        entries.forEach(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
            <span class="hljs-keyword">if</span> (entry.isIntersecting) {
                <span class="hljs-keyword">const</span> img = entry.target;
                img.src = img.dataset.src;
                img.classList.remove(<span class="hljs-string">'lazyload'</span>);
                imageObserver.unobserve(img);
            }
        });
    });

    <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'img.lazyload'</span>).forEach(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> {
        imageObserver.observe(img);
    });
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Result</strong>: Progressive image loading ‚úÖ</p>

    </section>
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#examples-responsive-images">Responsive Images</a> - Responsive image implementation</li>
    <li class="dash"><a href="#examples-custom-extensions">Custom Extensions</a> - Custom dialog and extensions</li>
    <li class="dash"><a href="#integration">Integration &amp; Configuration</a> - Configuration guide</li>
</ul>

    </section>
    </section>

        </article>
<article>
            
<section class="section" id="custom-extensions" data-rst-anchor="examples-custom-extensions">
            <a id="examples-custom-extensions"></a>
            <h1>Custom Extensions<a class="headerlink" href="#custom-extensions" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Advanced examples for extending the image plugin with custom fields, external image handling, multi-language support, and backend processing.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#custom-image-dialog">Custom Image Dialog</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#extended-image-properties">Extended Image Properties</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#ckeditor-plugin-extension">CKEditor Plugin Extension</a>


</li>
            <li class="toc-item">
    <a href="#register-plugin">Register Plugin</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#external-image-handling">External Image Handling</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#fetch-and-upload-external-images">Fetch and Upload External Images</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#extension-configuration">Extension Configuration</a>


</li>
            <li class="toc-item">
    <a href="#custom-upload-folder">Custom Upload Folder</a>


</li>
            <li class="toc-item">
    <a href="#custom-fetch-handler">Custom Fetch Handler</a>


</li>
            <li class="toc-item">
    <a href="#register-hook">Register Hook</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#multi-language-setup">Multi-Language Setup</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#language-specific-image-variants">Language-Specific Image Variants</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#page-tsconfig">Page TSConfig</a>


</li>
            <li class="toc-item">
    <a href="#rte-configuration">RTE Configuration</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#custom-backend-processing">Custom Backend Processing</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#automatic-image-optimization">Automatic Image Optimization</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#custom-hook">Custom Hook</a>


</li>
            <li class="toc-item">
    <a href="#register-hook">Register Hook</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="custom-image-dialog">
            <h2>Custom Image Dialog<a class="headerlink" href="#custom-image-dialog" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="extended-image-properties">
            <h3>Extended Image Properties<a class="headerlink" href="#extended-image-properties" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Objective</strong>: Add custom fields to image dialog</p>

            <section class="section" id="ckeditor-plugin-extension">
            <h4>CKEditor Plugin Extension<a class="headerlink" href="#ckeditor-plugin-extension" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_site/Resources/Public/JavaScript/Plugins/extended-typo3image.js</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">import</span> { Plugin } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ckeditor/ckeditor5-core'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExtendedTypo3Image</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Plugin</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> pluginName() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'ExtendedTypo3Image'</span>;
    }

    init() {
        <span class="hljs-keyword">const</span> editor = <span class="hljs-keyword">this</span>.editor;

        <span class="hljs-comment">// Extend schema with custom attributes</span>
        editor.model.schema.extend(<span class="hljs-string">'typo3image'</span>, {
            <span class="hljs-attr">allowAttributes</span>: [<span class="hljs-string">'customCaption'</span>, <span class="hljs-string">'customCopyright'</span>]
        });

        <span class="hljs-comment">// Add upcast conversion</span>
        editor.conversion.for(<span class="hljs-string">'upcast'</span>).attributeToAttribute({
            <span class="hljs-attr">view</span>: <span class="hljs-string">'data-custom-caption'</span>,
            <span class="hljs-attr">model</span>: <span class="hljs-string">'customCaption'</span>
        });

        <span class="hljs-comment">// Add downcast conversion</span>
        editor.conversion.for(<span class="hljs-string">'downcast'</span>).attributeToAttribute({
            <span class="hljs-attr">model</span>: <span class="hljs-string">'customCaption'</span>,
            <span class="hljs-attr">view</span>: <span class="hljs-string">'data-custom-caption'</span>
        });

        <span class="hljs-comment">// Modify image dialog</span>
        editor.on(<span class="hljs-string">'typo3image:dialog'</span>, (evt, { dialog, modelElement }) =&gt; {
            <span class="hljs-comment">// Add custom fields to dialog</span>
            <span class="hljs-keyword">const</span> customFields = $(<span class="hljs-string">`
                &lt;div class="form-group"&gt;
                    &lt;label&gt;Custom Caption&lt;/label&gt;
                    &lt;input type="text" class="form-control" name="customCaption"
                           value="<span class="hljs-subst">${modelElement.getAttribute(<span class="hljs-string">'customCaption'</span>) || <span class="hljs-string">''</span>}</span>" /&gt;
                &lt;/div&gt;
                &lt;div class="form-group"&gt;
                    &lt;label&gt;Copyright&lt;/label&gt;
                    &lt;input type="text" class="form-control" name="customCopyright"
                           value="<span class="hljs-subst">${modelElement.getAttribute(<span class="hljs-string">'customCopyright'</span>) || <span class="hljs-string">''</span>}</span>" /&gt;
                &lt;/div&gt;
            `</span>);

            dialog.$el.append(customFields);

            <span class="hljs-comment">// Override dialog.get() to include custom fields</span>
            <span class="hljs-keyword">const</span> originalGet = dialog.get;
            dialog.get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">const</span> attrs = originalGet.call(<span class="hljs-keyword">this</span>);
                attrs.customCaption = customFields.find(<span class="hljs-string">'[name="customCaption"]'</span>).val();
                attrs.customCopyright = customFields.find(<span class="hljs-string">'[name="customCopyright"]'</span>).val();
                <span class="hljs-keyword">return</span> attrs;
            };
        });
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="register-plugin">
            <h4>Register Plugin<a class="headerlink" href="#register-plugin" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
                <div class="code-block-caption">
        <span class="caption-text">Configuration/RTE/Extended.yaml</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">importModules:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'@my-vendor/my-site/extended-typo3image.js'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Result</strong>: Custom image metadata fields ‚úÖ</p>

    </section>
    </section>
    </section>
            <section class="section" id="external-image-handling">
            <h2>External Image Handling<a class="headerlink" href="#external-image-handling" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="fetch-and-upload-external-images">
            <h3>Fetch and Upload External Images<a class="headerlink" href="#fetch-and-upload-external-images" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="extension-configuration">
            <h4>Extension Configuration<a class="headerlink" href="#extension-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
                <div class="code-block-caption">
        <span class="caption-text">settings.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'EXTENSIONS'</span>][<span class="hljs-string">'rte_ckeditor_image'</span>] = [
    <span class="hljs-string">'fetchExternalImages'</span> =&gt; <span class="hljs-keyword">true</span>,
];</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="custom-upload-folder">
            <h4>Custom Upload Folder<a class="headerlink" href="#custom-upload-folder" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
                <div class="code-block-caption">
        <span class="caption-text">User TSConfig</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">options.defaultUploadFolder = 1:user_upload/rte_images/</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="custom-fetch-handler">
            <h4>Custom Fetch Handler<a class="headerlink" href="#custom-fetch-handler" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_site/Classes/Hooks/CustomImageFetchHook.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">MyVendor</span>\<span class="hljs-title">MySite</span>\<span class="hljs-title">Hooks</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Resource</span>\<span class="hljs-title">File</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Resource</span>\<span class="hljs-title">Folder</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomImageFetchHook</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postProcessExternalImage</span><span class="hljs-params">(
        string $externalUrl,
        File $uploadedFile,
        Folder $targetFolder
    )</span>: <span class="hljs-title">void</span> </span>{
        <span class="hljs-comment">// Add custom metadata</span>
        $uploadedFile-&gt;updateProperties([
            <span class="hljs-string">'title'</span> =&gt; <span class="hljs-string">'Imported from '</span> . parse_url($externalUrl, PHP_URL_HOST),
            <span class="hljs-string">'description'</span> =&gt; <span class="hljs-string">'Automatically fetched external image'</span>,
        ]);

        <span class="hljs-comment">// Trigger image optimization</span>
        <span class="hljs-keyword">$this</span>-&gt;optimizeImage($uploadedFile);
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">optimizeImage</span><span class="hljs-params">(File $file)</span>: <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// Custom optimization logic</span>
        <span class="hljs-comment">// e.g., compress, resize, convert format</span>
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="register-hook">
            <h4>Register Hook<a class="headerlink" href="#register-hook" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
                <div class="code-block-caption">
        <span class="caption-text">ext_localconf.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'SC_OPTIONS'</span>][<span class="hljs-string">'rte_ckeditor_image'</span>][<span class="hljs-string">'postProcessExternalImage'</span>][]
    = \MyVendor\MySite\Hooks\CustomImageFetchHook::class . <span class="hljs-string">'-&gt;postProcessExternalImage'</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Result</strong>: Automatic external image import ‚úÖ</p>

    </section>
    </section>
    </section>
            <section class="section" id="multi-language-setup">
            <h2>Multi-Language Setup<a class="headerlink" href="#multi-language-setup" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="language-specific-image-variants">
            <h3>Language-Specific Image Variants<a class="headerlink" href="#language-specific-image-variants" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="page-tsconfig">
            <h4>Page TSConfig<a class="headerlink" href="#page-tsconfig" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-meta">[siteLanguage("languageId") == 0]</span>
    <span class="hljs-comment"># Default language (English)</span>
    RTE.default.preset = default
<span class="hljs-meta">[END]</span>

<span class="hljs-meta">[siteLanguage("languageId") == 1]</span>
    <span class="hljs-comment"># German</span>
    RTE.default.preset = german
    RTE.default.buttons.image.options.defaultUploadFolder = 1:user_upload/de/
<span class="hljs-meta">[END]</span>

<span class="hljs-meta">[siteLanguage("languageId") == 2]</span>
    <span class="hljs-comment"># French</span>
    RTE.default.preset = french
    RTE.default.buttons.image.options.defaultUploadFolder = 1:user_upload/fr/
<span class="hljs-meta">[END]</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="rte-configuration">
            <h4>RTE Configuration<a class="headerlink" href="#rte-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
                <div class="code-block-caption">
        <span class="caption-text">Configuration/RTE/German.yaml</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">imports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor_image/Configuration/RTE/Plugin.yaml"</span> <span class="hljs-string">}</span>

<span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">language:</span> <span class="hljs-string">de</span>
    <span class="hljs-attr">style:</span>
      <span class="hljs-attr">definitions:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Bild Links'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['float-left']</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Bild Rechts'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['float-right']</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Result</strong>: Language-specific configurations ‚úÖ</p>

    </section>
    </section>
    </section>
            <section class="section" id="custom-backend-processing">
            <h2>Custom Backend Processing<a class="headerlink" href="#custom-backend-processing" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="automatic-image-optimization">
            <h3>Automatic Image Optimization<a class="headerlink" href="#automatic-image-optimization" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="custom-hook">
            <h4>Custom Hook<a class="headerlink" href="#custom-hook" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
                <div class="code-block-caption">
        <span class="caption-text">EXT:my_site/Classes/Hooks/ImageOptimizationHook.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">MyVendor</span>\<span class="hljs-title">MySite</span>\<span class="hljs-title">Hooks</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">DataHandling</span>\<span class="hljs-title">DataHandler</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Resource</span>\<span class="hljs-title">FileRepository</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Utility</span>\<span class="hljs-title">GeneralUtility</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ImageOptimizationHook</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processDatamap_afterDatabaseOperations</span><span class="hljs-params">(
        string $status,
        string $table,
        string $id,
        array $fieldArray,
        DataHandler $dataHandler
    )</span>: <span class="hljs-title">void</span> </span>{
        <span class="hljs-keyword">if</span> ($table !== <span class="hljs-string">'tt_content'</span>) {
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">foreach</span> ($fieldArray <span class="hljs-keyword">as</span> $field =&gt; $value) {
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">$this</span>-&gt;isRteField($table, $field)) {
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-comment">// Find images in RTE content</span>
            preg_match_all(<span class="hljs-string">'/data-htmlarea-file-uid="(\d+)"/'</span>, $value, $matches);

            <span class="hljs-keyword">foreach</span> ($matches[<span class="hljs-number">1</span>] <span class="hljs-keyword">as</span> $fileUid) {
                <span class="hljs-keyword">$this</span>-&gt;optimizeImage((int)$fileUid);
            }
        }
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isRteField</span><span class="hljs-params">(string $table, string $field)</span>: <span class="hljs-title">bool</span>
    </span>{
        $tcaConfig = $GLOBALS[<span class="hljs-string">'TCA'</span>][$table][<span class="hljs-string">'columns'</span>][$field][<span class="hljs-string">'config'</span>] ?? [];
        <span class="hljs-keyword">return</span> ($tcaConfig[<span class="hljs-string">'enableRichtext'</span>] ?? <span class="hljs-keyword">false</span>) === <span class="hljs-keyword">true</span>;
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">optimizeImage</span><span class="hljs-params">(int $fileUid)</span>: <span class="hljs-title">void</span>
    </span>{
        $fileRepository = GeneralUtility::makeInstance(FileRepository::class);

        <span class="hljs-keyword">try</span> {
            $file = $fileRepository-&gt;findByUid($fileUid);

            <span class="hljs-comment">// Generate optimized variants</span>
            $file-&gt;process(
                \TYPO3\CMS\Core\Resource\ProcessedFile::CONTEXT_IMAGECROPSCALEMASK,
                [<span class="hljs-string">'width'</span> =&gt; <span class="hljs-number">1920</span>, <span class="hljs-string">'height'</span> =&gt; <span class="hljs-number">1080</span>]
            );

            <span class="hljs-comment">// Generate WebP variant</span>
            $file-&gt;process(
                \TYPO3\CMS\Core\Resource\ProcessedFile::CONTEXT_IMAGECROPSCALEMASK,
                [<span class="hljs-string">'width'</span> =&gt; <span class="hljs-number">1920</span>, <span class="hljs-string">'height'</span> =&gt; <span class="hljs-number">1080</span>, <span class="hljs-string">'fileExtension'</span> =&gt; <span class="hljs-string">'webp'</span>]
            );
        } <span class="hljs-keyword">catch</span> (\<span class="hljs-keyword">Exception</span> $e) {
            <span class="hljs-comment">// Log error</span>
        }
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="register-hook">
            <h4>Register Hook<a class="headerlink" href="#register-hook" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
                <div class="code-block-caption">
        <span class="caption-text">ext_localconf.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'SC_OPTIONS'</span>][<span class="hljs-string">'t3lib/class.t3lib_tcemain.php'</span>][<span class="hljs-string">'processDatamapClass'</span>][]
    = \MyVendor\MySite\Hooks\ImageOptimizationHook::class;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Result</strong>: Automatic optimization on save ‚úÖ</p>

    </section>
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#ckeditor-plugin-development">CKEditor Plugin Development</a> - Plugin development guide</li>
    <li class="dash"><a href="#api-eventlisteners">Event Listeners API</a> - Event listener API</li>
    <li class="dash"><a href="#examples-testing">Testing Examples</a> - Testing examples</li>
    <li class="dash"><a href="#integration">Integration &amp; Configuration</a> - Configuration guide</li>
</ul>

    </section>
    </section>

        </article>
<article>
            
<section class="section" id="testing-examples" data-rst-anchor="examples-testing">
            <a id="examples-testing"></a>
            <h1>Testing Examples<a class="headerlink" href="#testing-examples" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Examples for writing functional and unit tests for the RTE CKEditor Image extension.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#functional-test">Functional Test</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#controller-test-example">Controller Test Example</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#unit-test">Unit Test</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#database-hook-test-example">Database Hook Test Example</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#run-tests">Run Tests</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#execute-test-suites">Execute Test Suites</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="functional-test">
            <h2>Functional Test<a class="headerlink" href="#functional-test" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="controller-test-example">
            <h3>Controller Test Example<a class="headerlink" href="#controller-test-example" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                <div class="code-block-caption">
        <span class="caption-text">Tests/Functional/Controller/SelectImageControllerTest.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Netresearch</span>\<span class="hljs-title">RteCKEditorImage</span>\<span class="hljs-title">Tests</span>\<span class="hljs-title">Functional</span>\<span class="hljs-title">Controller</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">TestingFramework</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Functional</span>\<span class="hljs-title">FunctionalTestCase</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SelectImageControllerTest</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FunctionalTestCase</span>
</span>{
    <span class="hljs-keyword">protected</span> $testExtensionsToLoad = [
        <span class="hljs-string">'typo3conf/ext/rte_ckeditor_image'</span>
    ];

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@test</span>
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">infoActionReturnsJsonForValidFile</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// Import test data</span>
        <span class="hljs-keyword">$this</span>-&gt;importDataSet(<span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/Fixtures/sys_file.xml'</span>);

        <span class="hljs-comment">// Create request</span>
        $request = <span class="hljs-keyword">$this</span>-&gt;createRequest(<span class="hljs-string">'/typo3/rte/wizard/selectimage'</span>)
            -&gt;withQueryParams([
                <span class="hljs-string">'action'</span> =&gt; <span class="hljs-string">'info'</span>,
                <span class="hljs-string">'fileId'</span> =&gt; <span class="hljs-number">1</span>,
                <span class="hljs-string">'table'</span> =&gt; <span class="hljs-string">'sys_file'</span>
            ]);

        <span class="hljs-comment">// Execute</span>
        $response = <span class="hljs-keyword">$this</span>-&gt;executeFrontendRequest($request);

        <span class="hljs-comment">// Assert</span>
        <span class="hljs-keyword">self</span>::assertEquals(<span class="hljs-number">200</span>, $response-&gt;getStatusCode());

        $json = json_decode((string)$response-&gt;getBody(), <span class="hljs-keyword">true</span>);
        <span class="hljs-keyword">self</span>::assertArrayHasKey(<span class="hljs-string">'uid'</span>, $json);
        <span class="hljs-keyword">self</span>::assertArrayHasKey(<span class="hljs-string">'url'</span>, $json);
        <span class="hljs-keyword">self</span>::assertEquals(<span class="hljs-number">1</span>, $json[<span class="hljs-string">'uid'</span>]);
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="unit-test">
            <h2>Unit Test<a class="headerlink" href="#unit-test" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="database-hook-test-example">
            <h3>Database Hook Test Example<a class="headerlink" href="#database-hook-test-example" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                <div class="code-block-caption">
        <span class="caption-text">Tests/Unit/Database/RteImagesDbHookTest.php</span>
    </div><div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Netresearch</span>\<span class="hljs-title">RteCKEditorImage</span>\<span class="hljs-title">Tests</span>\<span class="hljs-title">Unit</span>\<span class="hljs-title">Database</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Netresearch</span>\<span class="hljs-title">RteCKEditorImage</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">RteImagesDbHook</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">TestingFramework</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Unit</span>\<span class="hljs-title">UnitTestCase</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RteImagesDbHookTest</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">UnitTestCase</span>
</span>{
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@test</span>
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">transformRteAddsAltAttributeIfMissing</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span>
    </span>{
        $hook = <span class="hljs-keyword">new</span> RteImagesDbHook(<span class="hljs-comment">/* dependencies */</span>);

        $input = <span class="hljs-string">'&lt;img src="/fileadmin/image.jpg" data-htmlarea-file-uid="123" /&gt;'</span>;
        $output = $hook-&gt;transform_rte($input, $rteHtmlParser);

        <span class="hljs-keyword">self</span>::assertStringContainsString(<span class="hljs-string">'alt='</span>, $output);
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="run-tests">
            <h2>Run Tests<a class="headerlink" href="#run-tests" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="execute-test-suites">
            <h3>Execute Test Suites<a class="headerlink" href="#execute-test-suites" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Functional tests</span>
./vendor/bin/phpunit -c Build/phpunit-functional.xml

<span class="hljs-comment"># Unit tests</span>
./vendor/bin/phpunit -c Build/phpunit-unit.xml</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Result</strong>: Automated testing suite ‚úÖ</p>

    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#api-controllers">Controllers API</a> - Controller API documentation</li>
    <li class="dash"><a href="#api-datahandling">Data Handling API</a> - Data handling API</li>
    <li class="dash"><a href="#examples-custom-extensions">Custom Extensions</a> - Custom extensions</li>
    <li class="dash"><a href="#troubleshooting-index">Troubleshooting &amp; Support</a> - Common issues</li>
</ul>

    </section>
    </section>

        </article>
<article>
            <section class="section" id="troubleshooting-support" data-rst-anchor="troubleshooting-index">
            <a id="troubleshooting-index"></a>
            <h1>Troubleshooting &amp; Support<a class="headerlink" href="#troubleshooting-support" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Solutions to common issues, debugging techniques, and support resources.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#quick-fixes">Quick Fixes</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#most-common-issues">Most Common Issues</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#debugging-techniques">Debugging Techniques</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#enable-debug-mode">Enable Debug Mode</a>


</li>
            <li class="toc-item">
    <a href="#browser-console">Browser Console</a>


</li>
            <li class="toc-item">
    <a href="#typo3-logs">TYPO3 Logs</a>


</li>
            <li class="toc-item">
    <a href="#database-queries">Database Queries</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#getting-help">Getting Help</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#self-help-resources">Self-Help Resources</a>


</li>
            <li class="toc-item">
    <a href="#community-support">Community Support</a>


</li>
            <li class="toc-item">
    <a href="#reporting-bugs">Reporting Bugs</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#troubleshooting-topics">Troubleshooting Topics</a>


</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="quick-fixes">
            <h2>Quick Fixes<a class="headerlink" href="#quick-fixes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="most-common-issues">
            <h3>Most Common Issues<a class="headerlink" href="#most-common-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="1-style-dropdown-disabled-v13-0-0">
            <h4>1. Style Dropdown Disabled (v13.0.0+)<a class="headerlink" href="#1-style-dropdown-disabled-v13-0-0" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Ensure these dependencies are present:</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> requires() {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'StyleUtils'</span>, <span class="hljs-string">'GeneralHtmlSupport'</span>];
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition seealso" role="alert">
    <p class="admonition-title">See also</p>
            
    <p><a href="#troubleshooting-style-dropdown">Issue: Style Drop-Down Not Working with Images</a></p>

</div>
    </section>
            <section class="section" id="2-images-not-appearing-in-frontend">
            <h4>2. Images Not Appearing in Frontend<a class="headerlink" href="#2-images-not-appearing-in-frontend" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            

<ul>
    <li>Check TypoScript setup</li>
    <li>Verify file permissions</li>
    <li>Clear all caches</li>
</ul>

                
<div class="admonition seealso" role="alert">
    <p class="admonition-title">See also</p>
            
    <p><a href="#troubleshooting-frontend-rendering">Image Display Problems</a></p>

</div>
    </section>
            <section class="section" id="3-file-browser-not-opening">
            <h4>3. File Browser Not Opening<a class="headerlink" href="#3-file-browser-not-opening" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            

<ul>
    <li>Check backend user permissions</li>
    <li>Verify TSConfig</li>
    <li>Check file mount configuration</li>
</ul>

                
<div class="admonition seealso" role="alert">
    <p class="admonition-title">See also</p>
            
    <p><a href="#troubleshooting-file-browser">Issue: File Browser Empty or Not Loading</a></p>

</div>
    </section>
    </section>
    </section>
            <section class="section" id="debugging-techniques">
            <h2>Debugging Techniques<a class="headerlink" href="#debugging-techniques" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="enable-debug-mode">
            <h3>Enable Debug Mode<a class="headerlink" href="#enable-debug-mode" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'SYS'</span>][<span class="hljs-string">'devIPmask'</span>] = <span class="hljs-string">'*'</span>;
$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'SYS'</span>][<span class="hljs-string">'displayErrors'</span>] = <span class="hljs-number">1</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="browser-console">
            <h3>Browser Console<a class="headerlink" href="#browser-console" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li>Check for JavaScript errors</li>
    <li>Monitor network requests</li>
    <li>Inspect CKEditor plugin loading</li>
</ul>

    </section>
            <section class="section" id="typo3-logs">
            <h3>TYPO3 Logs<a class="headerlink" href="#typo3-logs" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li>Check <code>var/log/typo3_*.log</code></li>
    <li>Review deprecation log</li>
    <li>Monitor PHP error log</li>
</ul>

    </section>
            <section class="section" id="database-queries">
            <h3>Database Queries<a class="headerlink" href="#database-queries" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li>Enable SQL debug mode</li>
    <li>Check soft references</li>
    <li>Verify file relations</li>
</ul>

    </section>
    </section>
            <section class="section" id="getting-help">
            <h2>Getting Help<a class="headerlink" href="#getting-help" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="self-help-resources">
            <h3>Self-Help Resources<a class="headerlink" href="#self-help-resources" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    
<ol start="1" type="1">
    <li value="1">Check this troubleshooting guide</li>
    <li value="2">Review <a href="#integration">Integration &amp; Configuration</a></li>
    <li value="3">Consult <a href="#examples-common-use-cases">Examples &amp; Use Cases</a></li>
    <li value="4">Search <a href="https://github.com/netresearch/t3x-rte_ckeditor_image/issues">GitHub Issues</a></li>
</ol>

    </section>
            <section class="section" id="community-support">
            <h3>Community Support<a class="headerlink" href="#community-support" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                
<div class="admonition tip" role="alert">
    <p class="admonition-title">Tip</p>
            
    <p>Multiple community channels are available for support:</p>

</div>
            <dl>
                        <dt><strong>GitHub Discussions</strong></dt>
        
        <dd><a href="https://github.com/netresearch/t3x-rte_ckeditor_image/discussions">github.com/netresearch/t3x-rte_ckeditor_image/discussions</a></dd>
                                <dt><strong>TYPO3 Slack</strong></dt>
        
        <dd><a href="https://typo3.slack.com/archives/ext-rte_ckeditor_image">#ext-rte_ckeditor_image channel</a></dd>
                                <dt><strong>TYPO3 Forum</strong></dt>
        
        <dd><a href="https://typo3.org/community/meet/">typo3.org/community/meet</a></dd>
            </dl>
    </section>
            <section class="section" id="reporting-bugs">
            <h3>Reporting Bugs<a class="headerlink" href="#reporting-bugs" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
                
<div class="admonition warning" role="alert">
    <p class="admonition-title">Warning</p>
            
    <p>Before reporting, please:</p>

    
<ol start="1" type="1">
    <li value="1">Check if issue already exists</li>
    <li value="2">Verify you&#039;re using latest version</li>
    <li value="3">Test with minimal configuration</li>
    <li value="4">Collect debugging information</li>
</ol>

</div>
            
    <p><strong>Report bugs:</strong> <a href="https://github.com/netresearch/t3x-rte_ckeditor_image/issues">github.com/netresearch/t3x-rte_ckeditor_image/issues</a></p>

            
    <p>Include:</p>

            

<ul>
    <li>TYPO3 version</li>
    <li>PHP version</li>
    <li>Extension version</li>
    <li>Steps to reproduce</li>
    <li>Error messages</li>
    <li>Browser console output</li>
</ul>

    </section>
    </section>
            <section class="section" id="troubleshooting-topics">
            <h2>Troubleshooting Topics<a class="headerlink" href="#troubleshooting-topics" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <div class="row card-group pb-4 row-cols-1 row-cols-md-2 g-4">
    <div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üì¶ Installation Issues<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Extension installation problems, dependency conflicts, cache issues, and permission problems</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#troubleshooting-installation-issues" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>‚úèÔ∏è Editor Issues<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Image button problems, style dropdown issues, file browser problems, and CKEditor errors</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#troubleshooting-editor-issues" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üñ•Ô∏è Frontend Issues<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Image display problems, broken links, dimension issues, and rendering problems</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#troubleshooting-frontend-issues" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>‚ö° Performance Issues<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Editor performance, frontend performance, image processing optimization, and database performance</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#troubleshooting-performance-issues" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div></div>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <div class="row card-group pb-4 row-cols-1 row-cols-md-2 g-4">
    <div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>‚öôÔ∏è Configuration<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Correct configuration and setup guide</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#integration" class="btn btn-secondary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üìö Examples<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Working implementations and use cases</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#examples-common-use-cases" class="btn btn-secondary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üèóÔ∏è Architecture<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>System design and component interaction</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#architecture-overview" class="btn btn-secondary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üîå API Reference<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Technical API documentation</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#api-index" class="btn btn-secondary stretched-link">Read more</a>
                                </div>
    </div>
        </div></div>
            
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="installation-issues" data-rst-anchor="troubleshooting-installation-issues">
            <a id="troubleshooting-installation-issues"></a>
            <h1>Installation Issues<a class="headerlink" href="#installation-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Solutions for problems encountered during extension installation, configuration, and setup.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#extension-installation-problems">Extension Installation Problems</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-extension-not-working-after-typo3-13-upgrade">Issue: Extension Not Working After TYPO3 13 Upgrade</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#dependency-conflicts">Dependency Conflicts</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-style-drop-down-dependency-error">Issue: Style Drop-Down Dependency Error</a>


</li>
            <li class="toc-item">
    <a href="#issue-javascript-dependency-errors">Issue: JavaScript Dependency Errors</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#cache-related-issues">Cache-Related Issues</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-configuration-changes-not-applied">Issue: Configuration Changes Not Applied</a>


</li>
            <li class="toc-item">
    <a href="#issue-file-references-not-updated">Issue: File References Not Updated</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#permission-problems">Permission Problems</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-file-browser-empty-or-not-loading">Issue: File Browser Empty or Not Loading</a>


</li>
            <li class="toc-item">
    <a href="#issue-processed-images-directory-not-writable">Issue: Processed Images Directory Not Writable</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#static-template-configuration">Static Template Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-static-template-not-included">Issue: Static Template Not Included</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#image-processing-configuration">Image Processing Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-imagemagick-graphicsmagick-not-configured">Issue: ImageMagick/GraphicsMagick Not Configured</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#debugging-installation">Debugging Installation</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#check-extension-installation">Check Extension Installation</a>


</li>
            <li class="toc-item">
    <a href="#verify-configuration-loading">Verify Configuration Loading</a>


</li>
            <li class="toc-item">
    <a href="#check-browser-console">Check Browser Console</a>


</li>
            <li class="toc-item">
    <a href="#monitor-network-requests">Monitor Network Requests</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#database-issues">Database Issues</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-large-database-size">Issue: Large Database Size</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    <li class="toc-item">
    <a href="#getting-help">Getting Help</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="extension-installation-problems">
            <h2>Extension Installation Problems<a class="headerlink" href="#extension-installation-problems" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-extension-not-working-after-typo3-13-upgrade">
            <h3>Issue: Extension Not Working After TYPO3 13 Upgrade<a class="headerlink" href="#issue-extension-not-working-after-typo3-13-upgrade" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Extension installed but not functional</li>
    <li>Errors about missing classes</li>
</ul>

            
    <p><strong>Solution:</strong> Ensure correct version compatibility:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs json">{
  <span class="hljs-attr">"require"</span>: {
    <span class="hljs-attr">"typo3/cms-core"</span>: <span class="hljs-string">"^13.4"</span>,
    <span class="hljs-attr">"netresearch/rte-ckeditor-image"</span>: <span class="hljs-string">"^13.0"</span>
  }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">composer update
./vendor/bin/typo3 cache:flush
./vendor/bin/typo3 extension:setup</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition warning" role="alert">
    <p class="admonition-title">Warning</p>
            
    <p>TYPO3 13 requires extension version 13.0.0 or higher for compatibility.</p>

</div>
            <hr />
    </section>
    </section>
            <section class="section" id="dependency-conflicts">
            <h2>Dependency Conflicts<a class="headerlink" href="#dependency-conflicts" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-style-drop-down-dependency-error">
            <h3>Issue: Style Drop-Down Dependency Error<a class="headerlink" href="#issue-style-drop-down-dependency-error" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Styles disabled when image selected</li>
    <li>Style changes not applied to images</li>
</ul>

            
    <p><strong>Cause:</strong> Missing <code>GeneralHtmlSupport</code> dependency (fixed in v13.0.0+)</p>

            
    <p><strong>Solution:</strong> Ensure you&#039;re using extension version 13.0.0 or higher:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">composer require netresearch/rte-ckeditor-image:^13.0</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>The plugin now requires:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> requires() {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'StyleUtils'</span>, <span class="hljs-string">'GeneralHtmlSupport'</span>];  <span class="hljs-comment">// Both mandatory</span>
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition important" role="alert">
    <p class="admonition-title">Important</p>
            
    <p>The <code>GeneralHtmlSupport</code> dependency is critical for style functionality in v13.0.0+</p>

</div>
            <hr />
    </section>
            <section class="section" id="issue-javascript-dependency-errors">
            <h3>Issue: JavaScript Dependency Errors<a class="headerlink" href="#issue-javascript-dependency-errors" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Browser console shows &quot;GeneralHtmlSupport is not defined&quot;</li>
    <li>Editor doesn&#039;t load properly</li>
</ul>

            
    <p><strong>Cause:</strong> Extension version &lt; 13.0.0</p>

            
    <p><strong>Solution:</strong> Update to latest version:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">composer update netresearch/rte-ckeditor-image</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="cache-related-issues">
            <h2>Cache-Related Issues<a class="headerlink" href="#cache-related-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-configuration-changes-not-applied">
            <h3>Issue: Configuration Changes Not Applied<a class="headerlink" href="#issue-configuration-changes-not-applied" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>RTE configuration changes don&#039;t take effect</li>
    <li>Old behavior persists after updates</li>
</ul>

            
    <p><strong>Solution:</strong> Clear all caches:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Clear all TYPO3 caches</span>
./vendor/bin/typo3 cache:flush

<span class="hljs-comment"># Clear system cache specifically</span>
./vendor/bin/typo3 cache:flush --group=system

<span class="hljs-comment"># Clear browser cache and reload</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition tip" role="alert">
    <p class="admonition-title">Tip</p>
            
    <p>Always clear caches after modifying RTE configuration files.</p>

</div>
            <hr />
    </section>
            <section class="section" id="issue-file-references-not-updated">
            <h3>Issue: File References Not Updated<a class="headerlink" href="#issue-file-references-not-updated" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Image selected but error occurs</li>
    <li>Empty image inserted</li>
    <li>&quot;File Not Found&quot; errors</li>
</ul>

            
    <p><strong>Solution:</strong> Clear file abstraction layer cache:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">./vendor/bin/typo3 cache:flush --group=system</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Additional Steps:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">Verify file exists in <code>fileadmin/</code></li>
    <li value="2">Check file permissions (readable by web server)</li>
    <li value="3">Rebuild reference index:</li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">./vendor/bin/typo3 referenceindex:update</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="permission-problems">
            <h2>Permission Problems<a class="headerlink" href="#permission-problems" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-file-browser-empty-or-not-loading">
            <h3>Issue: File Browser Empty or Not Loading<a class="headerlink" href="#issue-file-browser-empty-or-not-loading" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Modal opens but shows no files</li>
    <li>File browser stuck loading</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">No file mount configured for backend user</li>
    <li value="2">Missing file permissions</li>
    <li value="3">Empty fileadmin directory</li>
</ol>

            
    <p><strong>Solution:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># User TSConfig</span>
options.defaultUploadFolder = 1:<span class="hljs-bullet">fileadmin/user_upload/</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Verify backend user has file mount in:
<strong>Backend</strong> ‚Üí <strong>User Management</strong> ‚Üí <strong>Backend Users</strong> ‚Üí <strong>File Mounts</strong></p>

            <hr />
    </section>
            <section class="section" id="issue-processed-images-directory-not-writable">
            <h3>Issue: Processed Images Directory Not Writable<a class="headerlink" href="#issue-processed-images-directory-not-writable" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Original large images displayed</li>
    <li>No <code>_processed_/</code> directory created</li>
    <li>Slow page load due to large images</li>
</ul>

            
    <p><strong>Solution:</strong> Check directory permissions:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Ensure _processed_/ is writable</span>
chmod 775 fileadmin/_processed_/

<span class="hljs-comment"># Verify ownership</span>
chown www-data:www-data fileadmin/_processed_/</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="static-template-configuration">
            <h2>Static Template Configuration<a class="headerlink" href="#static-template-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-static-template-not-included">
            <h3>Issue: Static Template Not Included<a class="headerlink" href="#issue-static-template-not-included" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Images visible in backend RTE</li>
    <li>Images missing in frontend output</li>
</ul>

            
    <p><strong>Solution:</strong></p>

            
    
<ol start="1">
    <li value="1">
    <p><strong>Include Static Template:</strong></p>


<ul>
    <li>Go to <strong>Template</strong> ‚Üí <strong>Info/Modify</strong></li>
    <li>Edit whole template record</li>
    <li>Include <code>CKEditor Image Support</code> before Fluid Styled Content</li>
</ul>
</li>
    <li value="2"><strong>Verify TypoScript:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE {
    tags.img = <span class="hljs-keyword">TEXT</span>
    tags.img {
        current = 1
        preUserFunc = Netresearch\RteCKEditorImage\Controller\ImageRenderingController-&gt;renderImageAttributes
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition warning" role="alert">
    <p class="admonition-title">Warning</p>
            
    <p>Always include the static template BEFORE Fluid Styled Content for proper rendering.</p>

</div>
            <hr />
    </section>
    </section>
            <section class="section" id="image-processing-configuration">
            <h2>Image Processing Configuration<a class="headerlink" href="#image-processing-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-imagemagick-graphicsmagick-not-configured">
            <h3>Issue: ImageMagick/GraphicsMagick Not Configured<a class="headerlink" href="#issue-imagemagick-graphicsmagick-not-configured" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Original large images displayed instead of processed versions</li>
    <li>Image processing test fails</li>
</ul>

            
    <p><strong>Solution:</strong> Verify image processing configuration:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// LocalConfiguration.php</span>
$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>] = [
    <span class="hljs-string">'processor'</span> =&gt; <span class="hljs-string">'ImageMagick'</span>,  <span class="hljs-comment">// or 'GraphicsMagick'</span>
    <span class="hljs-string">'processor_path'</span> =&gt; <span class="hljs-string">'/usr/bin/'</span>,
    <span class="hljs-string">'processor_enabled'</span> =&gt; <span class="hljs-keyword">true</span>,
];</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Test Image Processing:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">./vendor/bin/typo3 backend:<span class="hljs-built_in">test</span>:imageprocessing</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="debugging-installation">
            <h2>Debugging Installation<a class="headerlink" href="#debugging-installation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="check-extension-installation">
            <h3>Check Extension Installation<a class="headerlink" href="#check-extension-installation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Verify extension is installed</span>
composer show netresearch/rte-ckeditor-image

<span class="hljs-comment"># Check TYPO3 extension list</span>
./vendor/bin/typo3 extension:list</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="verify-configuration-loading">
            <h3>Verify Configuration Loading<a class="headerlink" href="#verify-configuration-loading" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># Page TSConfig - Enable RTE debugging</span>
RTE.default.showButtons = *
RTE.default.hideButtons =</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="check-browser-console">
            <h3>Check Browser Console<a class="headerlink" href="#check-browser-console" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    
<ol start="1" type="1">
    <li value="1">Open browser DevTools (F12)</li>
    <li value="2">Go to Console tab</li>
    <li value="3">
    <p>Look for errors related to:</p>


<ul>
    <li>Plugin loading</li>
    <li>Configuration issues</li>
    <li>Missing dependencies</li>
</ul>
</li>
</ol>

    </section>
            <section class="section" id="monitor-network-requests">
            <h3>Monitor Network Requests<a class="headerlink" href="#monitor-network-requests" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    
<ol start="1" type="1">
    <li value="1">Open browser DevTools</li>
    <li value="2">Go to Network tab</li>
    <li value="3">
    <p>Check for failed requests to:</p>


<ul>
    <li><code>/rte/wizard/selectimage</code></li>
    <li>Backend image info API</li>
</ul>
</li>
</ol>

            <hr />
    </section>
    </section>
            <section class="section" id="database-issues">
            <h2>Database Issues<a class="headerlink" href="#database-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-large-database-size">
            <h3>Issue: Large Database Size<a class="headerlink" href="#issue-large-database-size" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Database growing rapidly</li>
    <li>sys_refindex table very large</li>
</ul>

            
    <p><strong>Cause:</strong> Excessive soft reference entries</p>

            
    <p><strong>Solution:</strong> Rebuild reference index:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">./vendor/bin/typo3 referenceindex:update</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Check References:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs sql"><span class="hljs-comment">-- Find images in RTE content</span>
<span class="hljs-keyword">SELECT</span> uid, bodytext
<span class="hljs-keyword">FROM</span> tt_content
<span class="hljs-keyword">WHERE</span> bodytext <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%data-htmlarea-file-uid%'</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p><strong>Other Troubleshooting Topics:</strong></p>

            

<ul>
    <li><a href="#troubleshooting-editor-issues">Editor Issues</a> - Editor and backend problems</li>
    <li><a href="#troubleshooting-frontend-issues">Frontend Issues</a> - Frontend rendering issues</li>
    <li><a href="#troubleshooting-performance-issues">Performance Issues</a> - Performance optimization</li>
</ul>

            
    <p><strong>Additional Resources:</strong></p>

            

<ul>
    <li><a href="#integration">Integration &amp; Configuration</a> - Configuration guide</li>
    <li><a href="#architecture-overview">System Architecture</a> - System architecture</li>
    <li><a href="#getting-started">Getting Started</a> - Initial setup</li>
</ul>

    </section>
            <section class="section" id="getting-help">
            <h2>Getting Help<a class="headerlink" href="#getting-help" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>If issues persist after troubleshooting:</p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Check GitHub Issues:</strong> <a href="https://github.com/netresearch/t3x-rte_ckeditor_image/issues">https://github.com/netresearch/t3x-rte_ckeditor_image/issues</a></li>
    <li value="2"><strong>Review Changelog:</strong> Look for breaking changes in CHANGELOG.md</li>
    <li value="3"><strong>TYPO3 Slack:</strong> Join <a href="https://typo3.slack.com/archives/typo3-cms">#typo3-cms</a></li>
    <li value="4"><strong>Stack Overflow:</strong> Tag questions with <code>typo3</code> and <code>ckeditor</code></li>
</ol>

                
<div class="admonition important" role="alert">
    <p class="admonition-title">Important</p>
            
    <p>When reporting issues, include:</p>


<ul>
    <li>TYPO3 version</li>
    <li>Extension version</li>
    <li>PHP version</li>
    <li>Browser console errors</li>
    <li>RTE configuration (sanitized)</li>
    <li>Steps to reproduce</li>
</ul>

</div>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="editor-issues" data-rst-anchor="troubleshooting-editor-issues">
            <a id="troubleshooting-editor-issues"></a>
            <h1>Editor Issues<a class="headerlink" href="#editor-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Solutions for problems encountered in the TYPO3 backend editor and CKEditor functionality.</p>

                
<div class="admonition important" role="alert">
    <p class="admonition-title">Important</p>
            
    <p><strong>Zero-Configuration Installation (v13.0.0+)</strong></p>

    <p>The extension works out-of-the-box after <code>composer require netresearch/rte-ckeditor-image</code>.
Most issues below only apply to <strong>custom RTE preset configurations</strong>.</p>

    <p>If you&#039;re using the default automatic configuration and experiencing issues, check:</p>

    
<ol start="1" type="1">
    <li value="1">Clear caches: <code>./vendor/bin/typo3 cache:flush</code></li>
    <li value="2">Verify extension is activated</li>
    <li value="3">Check browser console for JavaScript errors</li>
</ol>

</div>
            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#image-button-problems">Image Button Problems</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-image-button-not-visible-in-toolbar">Issue: Image Button Not Visible in Toolbar</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#style-dropdown-problems">Style Dropdown Problems</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-style-drop-down-not-working-with-images">Issue: Style Drop-Down Not Working with Images</a>


</li>
            <li class="toc-item">
    <a href="#issue-custom-image-styles-lost-after-upgrade">Issue: Custom Image Styles Lost After Upgrade</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#file-browser-issues">File Browser Issues</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-file-browser-empty-or-not-loading">Issue: File Browser Empty or Not Loading</a>


</li>
            <li class="toc-item">
    <a href="#issue-file-not-found-after-selection">Issue: &quot;File Not Found&quot; After Selection</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#image-dimension-problems">Image Dimension Problems</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-magic-image-maximum-dimensions-not-working">Issue: Magic Image Maximum Dimensions Not Working</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#javascript-ckeditor-errors">JavaScript/CKEditor Errors</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-javascript-console-errors">Issue: JavaScript Console Errors</a>


</li>
            <li class="toc-item">
    <a href="#issue-double-click-on-image-does-nothing">Issue: Double-Click on Image Does Nothing</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#editor-loading-problems">Editor Loading Problems</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-editor-not-initializing">Issue: Editor Not Initializing</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#plugin-configuration-issues">Plugin Configuration Issues</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-plugin-not-recognized">Issue: Plugin Not Recognized</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#debugging-editor-issues">Debugging Editor Issues</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#enable-rte-debugging">Enable RTE Debugging</a>


</li>
            <li class="toc-item">
    <a href="#check-loaded-configuration">Check Loaded Configuration</a>


</li>
            <li class="toc-item">
    <a href="#monitor-network-requests">Monitor Network Requests</a>


</li>
            <li class="toc-item">
    <a href="#inspect-dom-elements">Inspect DOM Elements</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    <li class="toc-item">
    <a href="#getting-help">Getting Help</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="image-button-problems">
            <h2>Image Button Problems<a class="headerlink" href="#image-button-problems" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-image-button-not-visible-in-toolbar" data-rst-anchor="troubleshooting-image-button-missing">
            <a id="troubleshooting-image-button-missing"></a>
            <h3>Issue: Image Button Not Visible in Toolbar<a class="headerlink" href="#issue-image-button-not-visible-in-toolbar" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Insert image button missing from CKEditor toolbar</li>
    <li>RTE loads but no image functionality</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">Plugin not properly imported in RTE configuration</li>
    <li value="2"><code>removePlugins</code> includes image plugin</li>
    <li value="3">Toolbar configuration missing <code>insertimage</code> item</li>
</ol>

            
    <p><strong>Solution:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-comment"># Configuration/RTE/Default.yaml</span>
<span class="hljs-attr">imports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor_image/Configuration/RTE/Plugin.yaml"</span> <span class="hljs-string">}</span>

<span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">removePlugins:</span> <span class="hljs-literal">null</span>  <span class="hljs-comment"># Critical: Don't remove image plugin</span>
    <span class="hljs-attr">toolbar:</span>
      <span class="hljs-attr">items:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">insertimage</span>  <span class="hljs-comment"># Add to toolbar</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="style-dropdown-problems">
            <h2>Style Dropdown Problems<a class="headerlink" href="#style-dropdown-problems" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-style-drop-down-not-working-with-images" data-rst-anchor="troubleshooting-style-dropdown">
            <a id="troubleshooting-style-dropdown"></a>
            <h3>Issue: Style Drop-Down Not Working with Images<a class="headerlink" href="#issue-style-drop-down-not-working-with-images" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Styles disabled when image selected</li>
    <li>Style changes not applied to images</li>
</ul>

            
    <p><strong>Cause:</strong> Missing <code>GeneralHtmlSupport</code> dependency (fixed in v13.0.0+)</p>

            
    <p><strong>Solution:</strong> Ensure you&#039;re using extension version 13.0.0 or higher:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">composer require netresearch/rte-ckeditor-image:^13.0</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>The plugin now requires:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> requires() {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'StyleUtils'</span>, <span class="hljs-string">'GeneralHtmlSupport'</span>];  <span class="hljs-comment">// Both mandatory</span>
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition important" role="alert">
    <p class="admonition-title">Important</p>
            
    <p>The <code>GeneralHtmlSupport</code> dependency is critical for style functionality in v13.0.0+</p>

</div>
            <hr />
    </section>
            <section class="section" id="issue-custom-image-styles-lost-after-upgrade">
            <h3>Issue: Custom Image Styles Lost After Upgrade<a class="headerlink" href="#issue-custom-image-styles-lost-after-upgrade" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Custom styles no longer available</li>
    <li>Style drop-down empty</li>
</ul>

            
    <p><strong>Cause:</strong> RTE configuration changed</p>

            
    <p><strong>Solution:</strong> Re-apply custom styles in RTE configuration:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">style:</span>
      <span class="hljs-attr">definitions:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Your Custom Style'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['your-class']</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="file-browser-issues">
            <h2>File Browser Issues<a class="headerlink" href="#file-browser-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-file-browser-empty-or-not-loading" data-rst-anchor="troubleshooting-file-browser">
            <a id="troubleshooting-file-browser"></a>
            <h3>Issue: File Browser Empty or Not Loading<a class="headerlink" href="#issue-file-browser-empty-or-not-loading" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Modal opens but shows no files</li>
    <li>File browser stuck loading</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">No file mount configured for backend user</li>
    <li value="2">Missing file permissions</li>
    <li value="3">Empty fileadmin directory</li>
</ol>

            
    <p><strong>Solution:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># User TSConfig</span>
options.defaultUploadFolder = 1:<span class="hljs-bullet">fileadmin/user_upload/</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Verify backend user has file mount in:
<strong>Backend</strong> ‚Üí <strong>User Management</strong> ‚Üí <strong>Backend Users</strong> ‚Üí <strong>File Mounts</strong></p>

            <hr />
    </section>
            <section class="section" id="issue-file-not-found-after-selection">
            <h3>Issue: &quot;File Not Found&quot; After Selection<a class="headerlink" href="#issue-file-not-found-after-selection" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Image selected but error occurs</li>
    <li>Empty image inserted</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">File reference invalid</li>
    <li value="2">Storage not accessible</li>
    <li value="3">File deleted from filesystem</li>
</ol>

            
    <p><strong>Solution:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">Verify file exists in <code>fileadmin/</code></li>
    <li value="2">Check file permissions (readable by web server)</li>
    <li value="3">Clear file abstraction layer cache:</li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">./vendor/bin/typo3 cache:flush --group=system</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="image-dimension-problems">
            <h2>Image Dimension Problems<a class="headerlink" href="#image-dimension-problems" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-magic-image-maximum-dimensions-not-working">
            <h3>Issue: Magic Image Maximum Dimensions Not Working<a class="headerlink" href="#issue-magic-image-maximum-dimensions-not-working" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Images not respecting configured maxWidth/maxHeight</li>
    <li>Large images not being resized</li>
</ul>

            
    <p><strong>Cause:</strong> TSConfig settings in custom template extension not loaded (TYPO3 bug #87068)</p>

            
    <p><strong>Solution:</strong> Add settings to root page config instead:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># In root page TSConfig (not template extension)</span>
RTE.default.buttons.image.options.magic {
    maxWidth = 1920
    maxHeight = 9999
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition tip" role="alert">
    <p class="admonition-title">Tip</p>
            
    <p>Place TSConfig settings in root page configuration for proper loading.</p>

</div>
            <hr />
    </section>
    </section>
            <section class="section" id="javascript-ckeditor-errors">
            <h2>JavaScript/CKEditor Errors<a class="headerlink" href="#javascript-ckeditor-errors" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-javascript-console-errors">
            <h3>Issue: JavaScript Console Errors<a class="headerlink" href="#issue-javascript-console-errors" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Browser console shows errors</li>
    <li>Editor doesn&#039;t load properly</li>
</ul>

            <section class="section" id="common-errors">
            <h4>Common Errors<a class="headerlink" href="#common-errors" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <section class="section" id="1-generalhtmlsupport-is-not-defined">
            <h5>1. &quot;GeneralHtmlSupport is not defined&quot;<a class="headerlink" href="#1-generalhtmlsupport-is-not-defined" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h5>
            
    <p><strong>Cause:</strong> Extension version &lt; 13.0.0</p>

            
    <p><strong>Solution:</strong> Update to latest version:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">composer update netresearch/rte-ckeditor-image</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="2-cannot-read-property-typo3image-of-undefined">
            <h5>2. &quot;Cannot read property &#039;typo3image&#039; of undefined&quot;<a class="headerlink" href="#2-cannot-read-property-typo3image-of-undefined" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h5>
            
    <p><strong>Cause:</strong> Plugin configuration not loaded</p>

            
    <p><strong>Solution:</strong> Verify <code>Configuration/RTE/Plugin.yaml</code> imported:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">imports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor_image/Configuration/RTE/Plugin.yaml"</span> <span class="hljs-string">}</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="3-jquery-errors">
            <h5>3. jQuery Errors<a class="headerlink" href="#3-jquery-errors" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h5>
            
    <p><strong>Cause:</strong> jQuery not available in context</p>

            
    <p><strong>Solution:</strong> The plugin requires jQuery. Ensure TYPO3 backend context loads it (typically automatic).</p>

            <hr />
    </section>
    </section>
    </section>
            <section class="section" id="issue-double-click-on-image-does-nothing">
            <h3>Issue: Double-Click on Image Does Nothing<a class="headerlink" href="#issue-double-click-on-image-does-nothing" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Double-clicking image doesn&#039;t open dialog</li>
    <li>Edit functionality not working</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">DoubleClickObserver not registered</li>
    <li value="2">JavaScript error blocking execution</li>
    <li value="3">Image not recognized as typo3image</li>
</ol>

            
    <p><strong>Solution:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">Check browser console for JavaScript errors</li>
    <li value="2">Verify image has <code>data-htmlarea-file-uid</code> attribute</li>
    <li value="3">Clear browser cache and reload</li>
    <li value="4">Check CKEditor version compatibility (requires CKEditor 5)</li>
</ol>

            <hr />
    </section>
    </section>
            <section class="section" id="editor-loading-problems">
            <h2>Editor Loading Problems<a class="headerlink" href="#editor-loading-problems" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-editor-not-initializing">
            <h3>Issue: Editor Not Initializing<a class="headerlink" href="#issue-editor-not-initializing" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>CKEditor doesn&#039;t load</li>
    <li>Textarea remains plain text field</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">JavaScript errors preventing initialization</li>
    <li value="2">RTE configuration not loaded</li>
    <li value="3">Browser cache issues</li>
</ol>

            
    <p><strong>Solution:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">Check browser console for errors</li>
    <li value="2">Verify RTE preset is enabled:</li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-comment"># Configuration/RTE/Default.yaml</span>
<span class="hljs-attr">imports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor/Configuration/RTE/Default.yaml"</span> <span class="hljs-string">}</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor_image/Configuration/RTE/Plugin.yaml"</span> <span class="hljs-string">}</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="3" type="1">
    <li value="3">Clear browser and TYPO3 caches:</li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">./vendor/bin/typo3 cache:flush</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="4" type="1">
    <li value="4">Force reload in browser (Ctrl+Shift+R)</li>
</ol>

            <hr />
    </section>
    </section>
            <section class="section" id="plugin-configuration-issues">
            <h2>Plugin Configuration Issues<a class="headerlink" href="#plugin-configuration-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-plugin-not-recognized">
            <h3>Issue: Plugin Not Recognized<a class="headerlink" href="#issue-plugin-not-recognized" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Image plugin functionality missing</li>
    <li>Console error about undefined plugin</li>
</ul>

            
    <p><strong>Cause:</strong> Plugin configuration not properly loaded</p>

            
    <p><strong>Solution:</strong> Ensure proper import order:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-comment"># Configuration/RTE/Default.yaml</span>
<span class="hljs-attr">imports:</span>
  <span class="hljs-comment"># Base CKEditor configuration first</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor/Configuration/RTE/Default.yaml"</span> <span class="hljs-string">}</span>
  <span class="hljs-comment"># Then image plugin</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">{</span> <span class="hljs-attr">resource:</span> <span class="hljs-string">"EXT:rte_ckeditor_image/Configuration/RTE/Plugin.yaml"</span> <span class="hljs-string">}</span>

<span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-comment"># Ensure plugin is not removed</span>
    <span class="hljs-attr">removePlugins:</span> <span class="hljs-literal">null</span>
    <span class="hljs-attr">toolbar:</span>
      <span class="hljs-attr">items:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">insertimage</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="debugging-editor-issues">
            <h2>Debugging Editor Issues<a class="headerlink" href="#debugging-editor-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="enable-rte-debugging">
            <h3>Enable RTE Debugging<a class="headerlink" href="#enable-rte-debugging" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># Page TSConfig</span>
RTE.default.showButtons = *
RTE.default.hideButtons =</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="check-loaded-configuration">
            <h3>Check Loaded Configuration<a class="headerlink" href="#check-loaded-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Browser console:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Check if plugin loaded</span>
<span class="hljs-built_in">console</span>.log(CKEDITOR.instances);

<span class="hljs-comment">// Inspect editor config</span>
<span class="hljs-keyword">const</span> editor = <span class="hljs-built_in">Object</span>.values(CKEDITOR.instances)[<span class="hljs-number">0</span>];
<span class="hljs-built_in">console</span>.log(editor.config);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="monitor-network-requests">
            <h3>Monitor Network Requests<a class="headerlink" href="#monitor-network-requests" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    
<ol start="1" type="1">
    <li value="1">Open browser DevTools</li>
    <li value="2">Go to Network tab</li>
    <li value="3">Trigger image selection</li>
    <li value="4">
    <p>Check for failed requests to:</p>


<ul>
    <li><code>/rte/wizard/selectimage</code></li>
    <li>Backend image info API</li>
</ul>
</li>
</ol>

    </section>
            <section class="section" id="inspect-dom-elements">
            <h3>Inspect DOM Elements<a class="headerlink" href="#inspect-dom-elements" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Check if images have required attributes:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// In browser console</span>
<span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'img[data-htmlarea-file-uid]'</span>);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p><strong>Other Troubleshooting Topics:</strong></p>

            

<ul>
    <li><a href="#troubleshooting-installation-issues">Installation Issues</a> - Installation and setup problems</li>
    <li><a href="#troubleshooting-frontend-issues">Frontend Issues</a> - Frontend rendering issues</li>
    <li><a href="#troubleshooting-performance-issues">Performance Issues</a> - Performance optimization</li>
</ul>

            
    <p><strong>Additional Resources:</strong></p>

            

<ul>
    <li><a href="#integration">Integration &amp; Configuration</a> - Configuration guide</li>
    <li><a href="#ckeditor-plugin-development">CKEditor Plugin Development</a> - CKEditor plugin architecture</li>
    <li><a href="#integration">Integration &amp; Configuration</a> - Image selection features</li>
</ul>

    </section>
            <section class="section" id="getting-help">
            <h2>Getting Help<a class="headerlink" href="#getting-help" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>If issues persist after troubleshooting:</p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Check GitHub Issues:</strong> <a href="https://github.com/netresearch/t3x-rte_ckeditor_image/issues">https://github.com/netresearch/t3x-rte_ckeditor_image/issues</a></li>
    <li value="2"><strong>Review Changelog:</strong> Look for breaking changes in CHANGELOG.md</li>
    <li value="3"><strong>TYPO3 Slack:</strong> Join <a href="https://typo3.slack.com/archives/typo3-cms">#typo3-cms</a></li>
    <li value="4"><strong>Stack Overflow:</strong> Tag questions with <code>typo3</code> and <code>ckeditor</code></li>
</ol>

                
<div class="admonition important" role="alert">
    <p class="admonition-title">Important</p>
            
    <p>When reporting issues, include:</p>


<ul>
    <li>TYPO3 version</li>
    <li>Extension version</li>
    <li>PHP version</li>
    <li>Browser console errors</li>
    <li>RTE configuration (sanitized)</li>
    <li>Steps to reproduce</li>
</ul>

</div>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="frontend-issues" data-rst-anchor="troubleshooting-frontend-issues">
            <a id="troubleshooting-frontend-issues"></a>
            <h1>Frontend Issues<a class="headerlink" href="#frontend-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Solutions for problems with image display and rendering in the frontend.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#image-display-problems">Image Display Problems</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-images-not-appearing-in-frontend">Issue: Images Not Appearing in Frontend</a>


</li>
            <li class="toc-item">
    <a href="#issue-processed-images-not-generated">Issue: Processed Images Not Generated</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#broken-links-and-references">Broken Links and References</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-broken-image-links">Issue: Broken Image Links</a>


</li>
            <li class="toc-item">
    <a href="#issue-wrong-image-path-in-output">Issue: Wrong Image Path in Output</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#dimension-problems">Dimension Problems</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-images-display-at-wrong-size">Issue: Images Display at Wrong Size</a>


</li>
            <li class="toc-item">
    <a href="#issue-image-dimensions-not-preserved">Issue: Image Dimensions Not Preserved</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#style-and-class-problems">Style and Class Problems</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-css-classes-not-applied">Issue: CSS Classes Not Applied</a>


</li>
            <li class="toc-item">
    <a href="#issue-data-attributes-visible-in-frontend">Issue: Data Attributes Visible in Frontend</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#link-rendering-problems">Link Rendering Problems</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-image-links-not-working">Issue: Image Links Not Working</a>


</li>
            <li class="toc-item">
    <a href="#issue-lightbox-zoom-not-working">Issue: Lightbox/Zoom Not Working</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#responsive-image-issues">Responsive Image Issues</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-images-not-responsive">Issue: Images Not Responsive</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#caching-issues">Caching Issues</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-old-images-still-displayed">Issue: Old Images Still Displayed</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#debugging-frontend-issues">Debugging Frontend Issues</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#check-generated-html">Check Generated HTML</a>


</li>
            <li class="toc-item">
    <a href="#verify-typoscript-processing">Verify TypoScript Processing</a>


</li>
            <li class="toc-item">
    <a href="#check-browser-network-tab">Check Browser Network Tab</a>


</li>
            <li class="toc-item">
    <a href="#inspect-css">Inspect CSS</a>


</li>
            <li class="toc-item">
    <a href="#monitor-console-errors">Monitor Console Errors</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    <li class="toc-item">
    <a href="#getting-help">Getting Help</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="image-display-problems" data-rst-anchor="troubleshooting-frontend-rendering">
            <a id="troubleshooting-frontend-rendering"></a>
            <h2>Image Display Problems<a class="headerlink" href="#image-display-problems" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-images-not-appearing-in-frontend">
            <h3>Issue: Images Not Appearing in Frontend<a class="headerlink" href="#issue-images-not-appearing-in-frontend" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Images visible in backend RTE</li>
    <li>Images missing in frontend output</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">TypoScript rendering hooks missing (rare with v13.0.0+)</li>
    <li value="2">Cached content</li>
    <li value="3">Custom TypoScript overriding automatic configuration</li>
</ol>

            
    <p><strong>Solution:</strong></p>

            
    
<ol start="1">
    <li value="1">
    <p><strong>Verify TypoScript is loaded (v13.0.0+ automatic):</strong></p>

    <p>The extension automatically loads TypoScript. Verify it&#039;s present:</p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE {
    tags.img = <span class="hljs-keyword">TEXT</span>
    tags.img {
        current = 1
        preUserFunc = Netresearch\RteCKEditorImage\Controller\ImageRenderingController-&gt;renderImageAttributes
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div></li>
    <li value="2">
    <p><strong>Clear Caches:</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">./vendor/bin/typo3 cache:flush</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div></li>
    <li value="3">
    <p><strong>Check for TypoScript conflicts:</strong></p>

    <p>If you have custom <code>lib.parseFunc_RTE</code> configuration, ensure it doesn&#039;t override the image rendering hooks.</p>
</li>
</ol>

                
<div class="admonition note" role="alert">
    <p class="admonition-title">Note</p>
            
    <p>Since v13.0.0, TypoScript is automatically loaded. Manual static template inclusion is optional.</p>

</div>
            <hr />
    </section>
            <section class="section" id="issue-processed-images-not-generated">
            <h3>Issue: Processed Images Not Generated<a class="headerlink" href="#issue-processed-images-not-generated" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Original large images displayed</li>
    <li>No <code>_processed_/</code> directory created</li>
    <li>Slow page load due to large images</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">Image processing disabled</li>
    <li value="2">ImageMagick/GraphicsMagick not configured</li>
    <li value="3">File permissions issue</li>
</ol>

            
    <p><strong>Solution:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Verify Image Processing Configuration:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// LocalConfiguration.php</span>
$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>] = [
    <span class="hljs-string">'processor'</span> =&gt; <span class="hljs-string">'ImageMagick'</span>,  <span class="hljs-comment">// or 'GraphicsMagick'</span>
    <span class="hljs-string">'processor_path'</span> =&gt; <span class="hljs-string">'/usr/bin/'</span>,
    <span class="hljs-string">'processor_enabled'</span> =&gt; <span class="hljs-keyword">true</span>,
];</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2" type="1">
    <li value="2"><strong>Test Image Processing:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># TYPO3 CLI</span>
./vendor/bin/typo3 backend:<span class="hljs-built_in">test</span>:imageprocessing</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="3" type="1">
    <li value="3"><strong>Check Directory Permissions:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Ensure _processed_/ is writable</span>
chmod 775 fileadmin/_processed_/</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="4" type="1">
    <li value="4"><strong>Check Processed Files:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">ls -la fileadmin/_processed_/</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="broken-links-and-references">
            <h2>Broken Links and References<a class="headerlink" href="#broken-links-and-references" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-broken-image-links">
            <h3>Issue: Broken Image Links<a class="headerlink" href="#issue-broken-image-links" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Broken image icon displayed</li>
    <li>404 errors in browser console</li>
    <li>Missing image files</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">File moved or deleted</li>
    <li value="2">Invalid file reference</li>
    <li value="3">Storage configuration changed</li>
</ol>

            
    <p><strong>Solution:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Verify File Exists:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Check if file exists in fileadmin</span>
ls -la fileadmin/path/to/image.jpg</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2" type="1">
    <li value="2"><strong>Check File References:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs sql"><span class="hljs-comment">-- Find images in RTE content</span>
<span class="hljs-keyword">SELECT</span> uid, pid, bodytext
<span class="hljs-keyword">FROM</span> tt_content
<span class="hljs-keyword">WHERE</span> bodytext <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%data-htmlarea-file-uid%'</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="3" type="1">
    <li value="3"><strong>Rebuild Reference Index:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">./vendor/bin/typo3 referenceindex:update</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="4" type="1">
    <li value="4"><strong>Clear File Caches:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">./vendor/bin/typo3 cache:flush --group=system</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
            <section class="section" id="issue-wrong-image-path-in-output">
            <h3>Issue: Wrong Image Path in Output<a class="headerlink" href="#issue-wrong-image-path-in-output" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Image src points to wrong location</li>
    <li>Absolute paths instead of relative</li>
    <li>Missing domain in URLs</li>
</ul>

            
    <p><strong>Cause:</strong> Incorrect TypoScript configuration</p>

            
    <p><strong>Solution:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># Ensure proper path generation</span>
config.absRefPrefix = /
<span class="hljs-assignment">config.baseURL = https://your-domain.com/</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="dimension-problems">
            <h2>Dimension Problems<a class="headerlink" href="#dimension-problems" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-images-display-at-wrong-size">
            <h3>Issue: Images Display at Wrong Size<a class="headerlink" href="#issue-images-display-at-wrong-size" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Images too large or too small</li>
    <li>Dimensions not respected</li>
    <li>Responsive behavior broken</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">CSS conflicts</li>
    <li value="2">Missing width/height attributes</li>
    <li value="3">Responsive image configuration issues</li>
</ol>

            
    <p><strong>Solution:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Check Generated HTML:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-comment">&lt;!-- Should include width and height --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"..."</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"800"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"600"</span> /&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2" type="1">
    <li value="2"><strong>Verify CSS:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs css"><span class="hljs-comment">/* Ensure images are responsive */</span>
<span class="hljs-selector-class">.rte</span> <span class="hljs-selector-tag">img</span> {
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: auto;
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="3" type="1">
    <li value="3"><strong>Check TypoScript Configuration:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE.tags.img {
    current = 1
    preUserFunc = Netresearch\RteCKEditorImage\Controller\ImageRenderingController-&gt;renderImageAttributes
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
            <section class="section" id="issue-image-dimensions-not-preserved">
            <h3>Issue: Image Dimensions Not Preserved<a class="headerlink" href="#issue-image-dimensions-not-preserved" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Aspect ratio distorted</li>
    <li>Images stretched or squashed</li>
</ul>

            
    <p><strong>Cause:</strong> Missing or incorrect dimension attributes</p>

            
    <p><strong>Solution:</strong></p>

            
    <p>Ensure both width and height are rendered:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE.tags.img {
    current = 1
    preUserFunc = Netresearch\RteCKEditorImage\Controller\ImageRenderingController-&gt;renderImageAttributes
    stdWrap {
        wrap = &lt;div class="rte-image"&gt;|&lt;/div&gt;
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="style-and-class-problems">
            <h2>Style and Class Problems<a class="headerlink" href="#style-and-class-problems" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-css-classes-not-applied">
            <h3>Issue: CSS Classes Not Applied<a class="headerlink" href="#issue-css-classes-not-applied" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Custom classes missing from output</li>
    <li>Styles not visible in frontend</li>
    <li>Classes work in backend but not frontend</li>
</ul>

            
    <p><strong>Cause:</strong> HTMLparser configuration stripping classes</p>

            
    <p><strong>Solution:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE.nonTypoTagStdWrap.HTMLparser {
    keepNonMatchedTags = 1
    tags.img {
        allowedAttribs = class,src,alt,title,width,height
        fixAttrib.class.list = your-allowed-classes
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
            <section class="section" id="issue-data-attributes-visible-in-frontend">
            <h3>Issue: Data Attributes Visible in Frontend<a class="headerlink" href="#issue-data-attributes-visible-in-frontend" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li><code>data-htmlarea-file-uid</code> visible in HTML</li>
    <li>Internal attributes exposed</li>
</ul>

            
    <p><strong>Cause:</strong> HTMLparser configuration missing</p>

            
    <p><strong>Solution:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE.nonTypoTagStdWrap.HTMLparser.tags.img.fixAttrib {
    data-htmlarea-file-uid.unset = 1
    data-htmlarea-file-table.unset = 1
    data-htmlarea-zoom.unset = 1
    data-title-override.unset = 1
    data-alt-override.unset = 1
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition note" role="alert">
    <p class="admonition-title">Note</p>
            
    <p>Internal data attributes should always be removed in frontend rendering.</p>

</div>
            <hr />
    </section>
    </section>
            <section class="section" id="link-rendering-problems">
            <h2>Link Rendering Problems<a class="headerlink" href="#link-rendering-problems" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-image-links-not-working">
            <h3>Issue: Image Links Not Working<a class="headerlink" href="#issue-image-links-not-working" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Clickable images don&#039;t work</li>
    <li>Links stripped from output</li>
    <li>JavaScript conflicts</li>
</ul>

            
    <p><strong>Cause:</strong> Link processing configuration</p>

            
    <p><strong>Solution:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE {
    tags.a = <span class="hljs-keyword">TEXT</span>
    tags.a {
        current = 1
        typolink {
            parameter.data = parameters:href
            title.data = parameters:title
            ATagParams.data = parameters:allParams
        }
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
            <section class="section" id="issue-lightbox-zoom-not-working">
            <h3>Issue: Lightbox/Zoom Not Working<a class="headerlink" href="#issue-lightbox-zoom-not-working" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>data-htmlarea-zoom attribute present but zoom doesn&#039;t work</li>
    <li>Lightbox not triggering</li>
</ul>

            
    <p><strong>Cause:</strong> Missing JavaScript or CSS for lightbox</p>

            
    <p><strong>Solution:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Ensure Zoom Attribute Rendered:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE.tags.img {
    current = 1
    preUserFunc = Netresearch\RteCKEditorImage\Controller\ImageRenderingController-&gt;renderImageAttributes
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2" type="1">
    <li value="2"><strong>Include Lightbox Library:</strong></li>
</ol>

            
    <p>Add your preferred lightbox library (e.g., Fancybox, Lightbox2, PhotoSwipe)</p>

            
    
<ol start="3" type="1">
    <li value="3"><strong>Initialize Lightbox:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Example with Fancybox</span>
<span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'img[data-htmlarea-zoom]'</span>).forEach(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> link = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'a'</span>);
    link.href = img.src.replace(<span class="hljs-regexp">/\/_processed_\/.*/</span>, <span class="hljs-string">'/'</span> + img.dataset.htmlareaZoom);
    link.setAttribute(<span class="hljs-string">'data-fancybox'</span>, <span class="hljs-string">'gallery'</span>);
    img.parentNode.insertBefore(link, img);
    link.appendChild(img);
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="responsive-image-issues">
            <h2>Responsive Image Issues<a class="headerlink" href="#responsive-image-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-images-not-responsive">
            <h3>Issue: Images Not Responsive<a class="headerlink" href="#issue-images-not-responsive" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Images overflow container on mobile</li>
    <li>Fixed width prevents scaling</li>
    <li>No srcset generated</li>
</ul>

            
    <p><strong>Cause:</strong> Missing responsive configuration</p>

            
    <p><strong>Solution:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs css"><span class="hljs-comment">/* Basic responsive images */</span>
<span class="hljs-selector-class">.rte</span> <span class="hljs-selector-tag">img</span> {
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: auto;
    <span class="hljs-attribute">display</span>: block;
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>For advanced responsive images with srcset, configure image processing:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE.tags.img {
    current = 1
    preUserFunc = Netresearch\RteCKEditorImage\Controller\ImageRenderingController-&gt;renderImageAttributes
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="caching-issues">
            <h2>Caching Issues<a class="headerlink" href="#caching-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-old-images-still-displayed">
            <h3>Issue: Old Images Still Displayed<a class="headerlink" href="#issue-old-images-still-displayed" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Updated images not showing</li>
    <li>Old version cached</li>
    <li>Changes visible in backend but not frontend</li>
</ul>

            
    <p><strong>Solution:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Clear TYPO3 Caches:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">./vendor/bin/typo3 cache:flush</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2">
    <li value="2">
    <p><strong>Clear Browser Cache:</strong></p>


<ul>
    <li>Hard reload: Ctrl+Shift+R (Windows/Linux)</li>
    <li>Hard reload: Cmd+Shift+R (Mac)</li>
</ul>
</li>
    <li value="3"><strong>Clear Processed Images:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Remove all processed images</span>
rm -rf fileadmin/_processed_/*</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="4" type="1">
    <li value="4"><strong>Verify Cache Configuration:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">config {
    sendCacheHeaders = 1
    cache_period = 86400
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="debugging-frontend-issues">
            <h2>Debugging Frontend Issues<a class="headerlink" href="#debugging-frontend-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="check-generated-html">
            <h3>Check Generated HTML<a class="headerlink" href="#check-generated-html" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>View page source and inspect image markup:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-comment">&lt;!-- Expected output --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"fileadmin/_processed_/.../image.jpg"</span>
     <span class="hljs-attr">alt</span>=<span class="hljs-string">"Description"</span>
     <span class="hljs-attr">width</span>=<span class="hljs-string">"800"</span>
     <span class="hljs-attr">height</span>=<span class="hljs-string">"600"</span>
     <span class="hljs-attr">class</span>=<span class="hljs-string">"your-class"</span> /&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="verify-typoscript-processing">
            <h3>Verify TypoScript Processing<a class="headerlink" href="#verify-typoscript-processing" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># Enable TypoScript debugging</span>
config {
    debug = 1
    admPanel = 1
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="check-browser-network-tab">
            <h3>Check Browser Network Tab<a class="headerlink" href="#check-browser-network-tab" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    
<ol start="1" type="1">
    <li value="1">Open DevTools (F12)</li>
    <li value="2">Go to Network tab</li>
    <li value="3">Filter by images</li>
    <li value="4">
    <p>Check for:</p>


<ul>
    <li>404 errors</li>
    <li>Slow loading</li>
    <li>Wrong paths</li>
</ul>
</li>
</ol>

    </section>
            <section class="section" id="inspect-css">
            <h3>Inspect CSS<a class="headerlink" href="#inspect-css" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs css"><span class="hljs-comment">/* Check for conflicts */</span>
<span class="hljs-selector-class">.rte</span> <span class="hljs-selector-tag">img</span> {
    <span class="hljs-comment">/* Ensure no display:none or visibility:hidden */</span>
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="monitor-console-errors">
            <h3>Monitor Console Errors<a class="headerlink" href="#monitor-console-errors" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Look for JavaScript errors that might affect image rendering:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Common issues</span>
- Failed to load resource
- CORS errors
- JavaScript blocking rendering</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p><strong>Other Troubleshooting Topics:</strong></p>

            

<ul>
    <li><a href="#troubleshooting-installation-issues">Installation Issues</a> - Installation and setup problems</li>
    <li><a href="#troubleshooting-editor-issues">Editor Issues</a> - Editor and backend problems</li>
    <li><a href="#troubleshooting-performance-issues">Performance Issues</a> - Performance optimization</li>
</ul>

            
    <p><strong>Additional Resources:</strong></p>

            

<ul>
    <li><a href="#integration-configuration-frontend-rendering">Frontend Rendering</a> - TypoScript configuration</li>
    <li><a href="#architecture-system-components">System Architecture</a> - Rendering pipeline details</li>
    <li><a href="#integration-configuration-frontend-rendering">Frontend Rendering</a> - Frontend features</li>
</ul>

    </section>
            <section class="section" id="getting-help">
            <h2>Getting Help<a class="headerlink" href="#getting-help" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>If issues persist after troubleshooting:</p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Check GitHub Issues:</strong> <a href="https://github.com/netresearch/t3x-rte_ckeditor_image/issues">https://github.com/netresearch/t3x-rte_ckeditor_image/issues</a></li>
    <li value="2"><strong>Review Changelog:</strong> Look for breaking changes in CHANGELOG.md</li>
    <li value="3"><strong>TYPO3 Slack:</strong> Join <a href="https://typo3.slack.com/archives/typo3-cms">#typo3-cms</a></li>
    <li value="4"><strong>Stack Overflow:</strong> Tag questions with <code>typo3</code> and <code>ckeditor</code></li>
</ol>

                
<div class="admonition important" role="alert">
    <p class="admonition-title">Important</p>
            
    <p>When reporting issues, include:</p>


<ul>
    <li>TYPO3 version</li>
    <li>Extension version</li>
    <li>Browser and version</li>
    <li>Generated HTML (view source)</li>
    <li>TypoScript configuration</li>
    <li>Browser console errors</li>
    <li>Network tab screenshots</li>
</ul>

</div>
    </section>
    </section>

        </article>
<article>
            
<section class="section" id="performance-issues" data-rst-anchor="troubleshooting-performance-issues">
            <a id="troubleshooting-performance-issues"></a>
            <h1>Performance Issues<a class="headerlink" href="#performance-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Solutions for performance problems, slow loading, and optimization strategies.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#editor-performance">Editor Performance</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-slow-editor-loading">Issue: Slow Editor Loading</a>


</li>
            <li class="toc-item">
    <a href="#issue-image-selection-dialog-slow">Issue: Image Selection Dialog Slow</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#frontend-performance">Frontend Performance</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-slow-page-load-due-to-images">Issue: Slow Page Load Due to Images</a>


</li>
            <li class="toc-item">
    <a href="#issue-excessive-bandwidth-usage">Issue: Excessive Bandwidth Usage</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#image-processing-performance">Image Processing Performance</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-image-processing-timeouts">Issue: Image Processing Timeouts</a>


</li>
            <li class="toc-item">
    <a href="#issue-processed-images-directory-growing">Issue: Processed Images Directory Growing</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#database-performance">Database Performance</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-large-database-size">Issue: Large Database Size</a>


</li>
            <li class="toc-item">
    <a href="#issue-slow-reference-index-updates">Issue: Slow Reference Index Updates</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#cache-performance">Cache Performance</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-excessive-cache-invalidation">Issue: Excessive Cache Invalidation</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#network-performance">Network Performance</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-slow-image-loading-from-cdn">Issue: Slow Image Loading from CDN</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#monitoring-and-profiling">Monitoring and Profiling</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#performance-monitoring">Performance Monitoring</a>


</li>
            <li class="toc-item">
    <a href="#database-query-profiling">Database Query Profiling</a>


</li>
            <li class="toc-item">
    <a href="#image-processing-profiling">Image Processing Profiling</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#optimization-best-practices">Optimization Best Practices</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#image-optimization-checklist">Image Optimization Checklist</a>


</li>
            <li class="toc-item">
    <a href="#server-optimization-checklist">Server Optimization Checklist</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    <li class="toc-item">
    <a href="#getting-help">Getting Help</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="editor-performance">
            <h2>Editor Performance<a class="headerlink" href="#editor-performance" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-slow-editor-loading">
            <h3>Issue: Slow Editor Loading<a class="headerlink" href="#issue-slow-editor-loading" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>CKEditor takes long time to initialize</li>
    <li>Image browser slow to open</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">Large number of files in file browser</li>
    <li value="2">Unoptimized image processing settings</li>
    <li value="3">Network latency</li>
    <li value="4">Browser resource constraints</li>
</ol>

            
    <p><strong>Solutions:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Optimize Image Processing:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// LocalConfiguration.php</span>
$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>][<span class="hljs-string">'jpg_quality'</span>] = <span class="hljs-number">85</span>;
$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>][<span class="hljs-string">'processor_effects'</span>] = <span class="hljs-keyword">false</span>;  <span class="hljs-comment">// If not needed</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2" type="1">
    <li value="2"><strong>Reduce Maximum Dimensions:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">RTE.default.buttons.image.options.magic {
    maxWidth = 1200  <span class="hljs-comment"># Instead of 1920</span>
    maxHeight = 800  <span class="hljs-comment"># Instead of 9999</span>
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="3" type="1">
    <li value="3"><strong>Limit File Browser Results:</strong></li>
</ol>

            
    <p>Configure file mounts to show only relevant directories:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># User TSConfig</span>
options.folderTree.uploadFieldsInLinkBrowser = 0
options.pageTree.showPageIdWithTitle = 0</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition tip" role="alert">
    <p class="admonition-title">Tip</p>
            
    <p>Reducing maximum dimensions can significantly improve editor performance.</p>

</div>
            <hr />
    </section>
            <section class="section" id="issue-image-selection-dialog-slow">
            <h3>Issue: Image Selection Dialog Slow<a class="headerlink" href="#issue-image-selection-dialog-slow" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Modal takes long time to open</li>
    <li>Thumbnails load slowly</li>
    <li>Browser becomes unresponsive</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">Too many files in directory</li>
    <li value="2">Large unprocessed images</li>
    <li value="3">Missing thumbnail cache</li>
</ol>

            
    <p><strong>Solutions:</strong></p>

            
    
<ol start="1">
    <li value="1">
    <p><strong>Organize Files into Subdirectories:</strong></p>


<ul>
    <li>Group images by category</li>
    <li>Use year/month folder structure</li>
    <li>Keep directories under 100 files</li>
</ul>
</li>
    <li value="2"><strong>Pre-generate Thumbnails:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Generate missing thumbnails</span>
./vendor/bin/typo3 cleanup:missingfiles
./vendor/bin/typo3 cleanup:previewlinks</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="3" type="1">
    <li value="3"><strong>Optimize File Storage:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># Limit file selection to specific folders</span>
options.defaultUploadFolder = 1:<span class="hljs-bullet">fileadmin/user_upload/</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="frontend-performance">
            <h2>Frontend Performance<a class="headerlink" href="#frontend-performance" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-slow-page-load-due-to-images">
            <h3>Issue: Slow Page Load Due to Images<a class="headerlink" href="#issue-slow-page-load-due-to-images" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Pages load slowly</li>
    <li>Large images not processed</li>
    <li>High bandwidth usage</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">Original large images served instead of processed versions</li>
    <li value="2">No image compression</li>
    <li value="3">Missing lazy loading</li>
    <li value="4">Too many images on page</li>
</ol>

            
    <p><strong>Solutions:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Enable Image Processing:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// LocalConfiguration.php</span>
$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>] = [
    <span class="hljs-string">'processor_enabled'</span> =&gt; <span class="hljs-keyword">true</span>,
    <span class="hljs-string">'processor'</span> =&gt; <span class="hljs-string">'ImageMagick'</span>,
    <span class="hljs-string">'jpg_quality'</span> =&gt; <span class="hljs-number">85</span>,
];</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2" type="1">
    <li value="2"><strong>Configure Reasonable Maximum Dimensions:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">RTE.default.buttons.image.options.magic {
    maxWidth = 1920
    maxHeight = 1080
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="3" type="1">
    <li value="3"><strong>Implement Lazy Loading:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE.tags.img {
    current = 1
    preUserFunc = Netresearch\RteCKEditorImage\Controller\ImageRenderingController-&gt;renderImageAttributes
    stdWrap.replacement {
        <span class="hljs-title">10</span> {
            search = &lt;img
            replace = &lt;img loading="lazy"
        }
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="4" type="1">
    <li value="4"><strong>Enable Browser Caching:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs apache"><span class="hljs-comment"># .htaccess</span>
<span class="hljs-section">&lt;IfModule mod_expires.c&gt;</span>
    <span class="hljs-attribute">ExpiresActive</span> <span class="hljs-literal">On</span>
    <span class="hljs-attribute">ExpiresByType</span> image/jpeg <span class="hljs-string">"access plus 1 year"</span>
    <span class="hljs-attribute">ExpiresByType</span> image/png <span class="hljs-string">"access plus 1 year"</span>
    <span class="hljs-attribute">ExpiresByType</span> image/webp <span class="hljs-string">"access plus 1 year"</span>
<span class="hljs-section">&lt;/IfModule&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
            <section class="section" id="issue-excessive-bandwidth-usage">
            <h3>Issue: Excessive Bandwidth Usage<a class="headerlink" href="#issue-excessive-bandwidth-usage" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>High server bandwidth consumption</li>
    <li>Slow site on mobile devices</li>
    <li>Large page sizes</li>
</ul>

            
    <p><strong>Solutions:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Use WebP Format:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// LocalConfiguration.php</span>
$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>][<span class="hljs-string">'processor_allowUpscaling'</span>] = <span class="hljs-keyword">false</span>;
$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>][<span class="hljs-string">'processor_stripColorProfileByDefault'</span>] = <span class="hljs-keyword">true</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2" type="1">
    <li value="2"><strong>Implement Progressive JPEG:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>][<span class="hljs-string">'processor_interlace'</span>] = <span class="hljs-keyword">true</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="3" type="1">
    <li value="3"><strong>Compress Images:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>][<span class="hljs-string">'jpg_quality'</span>] = <span class="hljs-number">80</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="image-processing-performance">
            <h2>Image Processing Performance<a class="headerlink" href="#image-processing-performance" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-image-processing-timeouts">
            <h3>Issue: Image Processing Timeouts<a class="headerlink" href="#issue-image-processing-timeouts" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>500 errors when uploading images</li>
    <li>Processing hangs</li>
    <li>Timeouts in backend</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">Insufficient PHP memory</li>
    <li value="2">Low execution time limits</li>
    <li value="3">Slow image processor</li>
    <li value="4">Very large source images</li>
</ol>

            
    <p><strong>Solutions:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Increase PHP Limits:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// php.ini or LocalConfiguration.php</span>
memory_limit = <span class="hljs-number">512</span>M
max_execution_time = <span class="hljs-number">300</span>
upload_max_filesize = <span class="hljs-number">20</span>M
post_max_size = <span class="hljs-number">20</span>M</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2" type="1">
    <li value="2"><strong>Optimize Image Processor:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// LocalConfiguration.php</span>
$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>][<span class="hljs-string">'processor_path_lzw'</span>] = <span class="hljs-string">''</span>;
$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>][<span class="hljs-string">'processor_colorspace'</span>] = <span class="hljs-string">'RGB'</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="3" type="1">
    <li value="3"><strong>Limit Upload Size:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript"><span class="hljs-comment"># Page TSConfig</span>
RTE.default.buttons.image.options.magic {
    maxFileSize = 5000  <span class="hljs-comment"># 5MB in KB</span>
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
            <section class="section" id="issue-processed-images-directory-growing">
            <h3>Issue: Processed Images Directory Growing<a class="headerlink" href="#issue-processed-images-directory-growing" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Large <code>_processed_/</code> directory</li>
    <li>Disk space issues</li>
    <li>Duplicate processed images</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">Old processed images not cleaned up</li>
    <li value="2">Multiple versions of same image</li>
    <li value="3">Unused processed files accumulating</li>
</ol>

            
    <p><strong>Solutions:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Clean Old Processed Files:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Remove processed files older than 30 days</span>
find fileadmin/_processed_ -<span class="hljs-built_in">type</span> f -mtime +30 -delete</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2" type="1">
    <li value="2"><strong>Implement Automated Cleanup:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// LocalConfiguration.php</span>
$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>][<span class="hljs-string">'processor_allowTemporaryMasksAsPng'</span>] = <span class="hljs-keyword">false</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="3" type="1">
    <li value="3"><strong>Schedule Cleanup Task:</strong></li>
</ol>

            
    <p>Create a scheduler task to regularly clean old processed images:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Cron job example (runs weekly)</span>
0 2 * * 0 find /path/to/fileadmin/_processed_ -<span class="hljs-built_in">type</span> f -mtime +30 -delete</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="database-performance">
            <h2>Database Performance<a class="headerlink" href="#database-performance" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-large-database-size">
            <h3>Issue: Large Database Size<a class="headerlink" href="#issue-large-database-size" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Database growing rapidly</li>
    <li>sys_refindex table very large</li>
    <li>Slow queries</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">Excessive soft reference entries</li>
    <li value="2">Orphaned records</li>
    <li value="3">Unoptimized indexes</li>
</ol>

            
    <p><strong>Solutions:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Rebuild Reference Index:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">./vendor/bin/typo3 referenceindex:update</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2" type="1">
    <li value="2"><strong>Clean Up Orphaned Records:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs sql"><span class="hljs-comment">-- Find images in deleted content</span>
<span class="hljs-keyword">SELECT</span> uid, bodytext
<span class="hljs-keyword">FROM</span> tt_content
<span class="hljs-keyword">WHERE</span> deleted = <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> bodytext <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%data-htmlarea-file-uid%'</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="3" type="1">
    <li value="3"><strong>Optimize Tables:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs sql"><span class="hljs-keyword">OPTIMIZE</span> <span class="hljs-keyword">TABLE</span> sys_refindex;
<span class="hljs-keyword">OPTIMIZE</span> <span class="hljs-keyword">TABLE</span> tt_content;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
            <section class="section" id="issue-slow-reference-index-updates">
            <h3>Issue: Slow Reference Index Updates<a class="headerlink" href="#issue-slow-reference-index-updates" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Reference index update takes long time</li>
    <li>High CPU usage during updates</li>
</ul>

            
    <p><strong>Solutions:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Batch Update References:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Update in smaller batches</span>
./vendor/bin/typo3 referenceindex:update --check</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2" type="1">
    <li value="2"><strong>Schedule Off-Peak Updates:</strong></li>
</ol>

            
    <p>Run reference index updates during low-traffic periods:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Cron job (runs at 3 AM)</span>
0 3 * * * /path/to/vendor/bin/typo3 referenceindex:update</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="cache-performance">
            <h2>Cache Performance<a class="headerlink" href="#cache-performance" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-excessive-cache-invalidation">
            <h3>Issue: Excessive Cache Invalidation<a class="headerlink" href="#issue-excessive-cache-invalidation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Caches cleared too frequently</li>
    <li>Slow page regeneration</li>
    <li>High server load</li>
</ul>

            
    <p><strong>Causes:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">Aggressive cache clearing</li>
    <li value="2">Content changes trigger full cache clear</li>
    <li value="3">Misconfigured cache tags</li>
</ol>

            
    <p><strong>Solutions:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Optimize Cache Configuration:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// LocalConfiguration.php</span>
$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'SYS'</span>][<span class="hljs-string">'caching'</span>][<span class="hljs-string">'cacheConfigurations'</span>][<span class="hljs-string">'pages'</span>] = [
    <span class="hljs-string">'backend'</span> =&gt; \TYPO3\CMS\Core\Cache\Backend\RedisBackend::class,
    <span class="hljs-string">'options'</span> =&gt; [
        <span class="hljs-string">'hostname'</span> =&gt; <span class="hljs-string">'localhost'</span>,
        <span class="hljs-string">'database'</span> =&gt; <span class="hljs-number">0</span>,
        <span class="hljs-string">'port'</span> =&gt; <span class="hljs-number">6379</span>,
    ],
];</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2" type="1">
    <li value="2"><strong>Use Cache Tags Effectively:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">config {
    cache_period = 86400
    sendCacheHeaders = 1
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="3" type="1">
    <li value="3"><strong>Implement Selective Cache Clearing:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Clear only specific cache groups</span>
./vendor/bin/typo3 cache:flush --group=pages</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="network-performance">
            <h2>Network Performance<a class="headerlink" href="#network-performance" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-slow-image-loading-from-cdn">
            <h3>Issue: Slow Image Loading from CDN<a class="headerlink" href="#issue-slow-image-loading-from-cdn" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li>Images load slowly despite CDN</li>
    <li>Inconsistent loading times</li>
    <li>Failed CDN requests</li>
</ul>

            
    <p><strong>Solutions:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Configure Proper CDN:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">config {
    absRefPrefix = /
<span class="hljs-assignment">    baseURL = https://cdn.yourdomain.com/</span>
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2" type="1">
    <li value="2"><strong>Use HTTP/2:</strong></li>
</ol>

            
    <p>Ensure your server supports HTTP/2 for multiplexing</p>

            
    
<ol start="3" type="1">
    <li value="3"><strong>Implement Preconnect:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.yourdomain.com"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.yourdomain.com"</span>&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="monitoring-and-profiling">
            <h2>Monitoring and Profiling<a class="headerlink" href="#monitoring-and-profiling" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="performance-monitoring">
            <h3>Performance Monitoring<a class="headerlink" href="#performance-monitoring" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    
<ol start="1" type="1">
    <li value="1"><strong>Enable TYPO3 Admin Panel:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">config.admPanel = 1</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="2" type="1">
    <li value="2"><strong>Monitor Image Processing:</strong></li>
</ol>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Check processing time</span>
./vendor/bin/typo3 backend:<span class="hljs-built_in">test</span>:imageprocessing</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    
<ol start="3" type="1">
    <li value="3"><strong>Track Page Load Times:</strong></li>
</ol>

            <dl>
                        <dt>Use browser DevTools Network tab to monitor:</dt>
        
        <dd>

<ul>
    <li>Image load times</li>
    <li>TTFB (Time to First Byte)</li>
    <li>Total page load time</li>
</ul>
</dd>
            </dl>
    </section>
            <section class="section" id="database-query-profiling">
            <h3>Database Query Profiling<a class="headerlink" href="#database-query-profiling" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs sql"><span class="hljs-comment">-- Find slow queries</span>
<span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">PROCESSLIST</span>;

<span class="hljs-comment">-- Analyze reference index queries</span>
<span class="hljs-keyword">EXPLAIN</span> <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> sys_refindex <span class="hljs-keyword">WHERE</span> tablename=<span class="hljs-string">'tt_content'</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="image-processing-profiling">
            <h3>Image Processing Profiling<a class="headerlink" href="#image-processing-profiling" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># Time image processing</span>
time ./vendor/bin/typo3 backend:<span class="hljs-built_in">test</span>:imageprocessing

<span class="hljs-comment"># Monitor processed files</span>
watch -n 5 <span class="hljs-string">"ls -lh fileadmin/_processed_/ | wc -l"</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <hr />
    </section>
    </section>
            <section class="section" id="optimization-best-practices">
            <h2>Optimization Best Practices<a class="headerlink" href="#optimization-best-practices" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="image-optimization-checklist">
            <h3>Image Optimization Checklist<a class="headerlink" href="#image-optimization-checklist" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>‚úì <strong>Configure reasonable maximum dimensions:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">RTE.default.buttons.image.options.magic {
    maxWidth = 1920
    maxHeight = 1080
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>‚úì <strong>Enable image processing:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>][<span class="hljs-string">'processor_enabled'</span>] = <span class="hljs-keyword">true</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>‚úì <strong>Set appropriate JPEG quality:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'GFX'</span>][<span class="hljs-string">'jpg_quality'</span>] = <span class="hljs-number">85</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>‚úì <strong>Implement lazy loading:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">loading</span>=<span class="hljs-string">"lazy"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"..."</span> /&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>‚úì <strong>Use browser caching:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs apache"><span class="hljs-attribute">ExpiresActive</span> <span class="hljs-literal">On</span>
<span class="hljs-attribute">ExpiresByType</span> image/jpeg <span class="hljs-string">"access plus 1 year"</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>‚úì <strong>Regular cleanup of processed files:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash">find fileadmin/_processed_ -<span class="hljs-built_in">type</span> f -mtime +30 -delete</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>‚úì <strong>Monitor disk space and database size</strong></p>

            
    <p>‚úì <strong>Optimize images before upload</strong> (recommend to editors)</p>

    </section>
            <section class="section" id="server-optimization-checklist">
            <h3>Server Optimization Checklist<a class="headerlink" href="#server-optimization-checklist" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>‚úì <strong>Adequate PHP memory:</strong> 512M minimum</p>

            
    <p>‚úì <strong>Fast image processor:</strong> ImageMagick or GraphicsMagick</p>

            
    <p>‚úì <strong>Redis/Memcached for caching</strong></p>

            
    <p>‚úì <strong>HTTP/2 support enabled</strong></p>

            
    <p>‚úì <strong>CDN for static assets</strong></p>

            
    <p>‚úì <strong>Regular database optimization</strong></p>

            
    <p>‚úì <strong>Scheduled cleanup tasks</strong></p>

            <hr />
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p><strong>Other Troubleshooting Topics:</strong></p>

            

<ul>
    <li><a href="#troubleshooting-installation-issues">Installation Issues</a> - Installation and setup problems</li>
    <li><a href="#troubleshooting-editor-issues">Editor Issues</a> - Editor and backend problems</li>
    <li><a href="#troubleshooting-frontend-issues">Frontend Issues</a> - Frontend rendering issues</li>
</ul>

            
    <p><strong>Additional Resources:</strong></p>

            

<ul>
    <li><a href="#integration">Integration &amp; Configuration</a> - Configuration guide</li>
    <li><a href="#architecture-system-components">System Architecture</a> - Image processing details</li>
    <li><a href="#best-practices">Best Practices</a> - Performance best practices</li>
</ul>

    </section>
            <section class="section" id="getting-help">
            <h2>Getting Help<a class="headerlink" href="#getting-help" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>If issues persist after troubleshooting:</p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Check GitHub Issues:</strong> <a href="https://github.com/netresearch/t3x-rte_ckeditor_image/issues">https://github.com/netresearch/t3x-rte_ckeditor_image/issues</a></li>
    <li value="2"><strong>Review Changelog:</strong> Look for performance improvements in CHANGELOG.md</li>
    <li value="3"><strong>TYPO3 Slack:</strong> Join <a href="https://typo3.slack.com/archives/typo3-cms">#typo3-cms</a></li>
    <li value="4"><strong>Stack Overflow:</strong> Tag questions with <code>typo3</code> and <code>performance</code></li>
</ol>

                
<div class="admonition important" role="alert">
    <p class="admonition-title">Important</p>
            
    <p>When reporting performance issues, include:</p>


<ul>
    <li>TYPO3 version</li>
    <li>Extension version</li>
    <li>PHP version and limits</li>
    <li>Server specifications</li>
    <li>Database size</li>
    <li>Number of images</li>
    <li>Performance measurements</li>
    <li>Profiling data</li>
</ul>

</div>
    </section>
    </section>

        </article>
<article>
            <section class="section" id="architecture-design" data-rst-anchor="architecture-index">
            <a id="architecture-index"></a>
            <a id="architecture"></a>
            <h1>Architecture &amp; Design<a class="headerlink" href="#architecture-design" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>System architecture, component design, and technical implementation details for the RTE CKEditor Image extension.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#overview">Overview</a>


</li>
    <li class="toc-item">
    <a href="#architecture-topics">Architecture Topics</a>


</li>
    <li class="toc-item">
    <a href="#quick-links">Quick Links</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#system-understanding">System Understanding</a>


</li>
            <li class="toc-item">
    <a href="#integration-reference">Integration Reference</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="overview">
            <h2>Overview<a class="headerlink" href="#overview" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>This section explains the architectural decisions, design patterns, and component interactions in the RTE CKEditor Image extension.</p>

    </section>
            <section class="section" id="architecture-topics">
            <h2>Architecture Topics<a class="headerlink" href="#architecture-topics" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <div class="row card-group pb-4 row-cols-1 row-cols-md-2 g-4">
    <div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üèõÔ∏è System Architecture<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Three-layer architecture, core components, technology stack, and security/performance considerations</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#architecture-system-components" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üéØ Design Patterns<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Key design patterns, integration points, data flow, and extension points for developers</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#architecture-design-patterns" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div></div>
    </section>
            <section class="section" id="quick-links">
            <h2>Quick Links<a class="headerlink" href="#quick-links" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="system-understanding">
            <h3>System Understanding<a class="headerlink" href="#system-understanding" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><strong>Learn the architecture</strong> ‚Üí <a href="#architecture-system-components">System Architecture</a></li>
    <li class="dash"><strong>Understand data flow</strong> ‚Üí <a href="#architecture-data-flow">Design Patterns &amp; Integration</a></li>
    <li class="dash"><strong>Extend the system</strong> ‚Üí <a href="#architecture-extension-points">Design Patterns &amp; Integration</a></li>
</ul>

    </section>
            <section class="section" id="integration-reference">
            <h3>Integration Reference<a class="headerlink" href="#integration-reference" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><strong>TYPO3 Core integration</strong> ‚Üí <a href="#architecture-integration-points">Design Patterns &amp; Integration</a></li>
    <li class="dash"><strong>CKEditor integration</strong> ‚Üí <a href="#ckeditor-plugin-development">CKEditor Plugin Development</a></li>
    <li class="dash"><strong>Backend APIs</strong> ‚Üí <a href="#api-documentation">API Documentation</a></li>
</ul>

    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#ckeditor-plugin-development">CKEditor Plugin Development</a> - CKEditor 5 plugin implementation</li>
    <li class="dash"><a href="#api-documentation">API Documentation</a> - PHP backend APIs</li>
    <li class="dash"><a href="#integration">Integration &amp; Configuration</a> - Configuration reference</li>
    <li class="dash"><a href="#examples-common-use-cases">Examples &amp; Use Cases</a> - Practical examples</li>
</ul>

            
    </section>
    </section>

        </article>
<article>
            <section class="section" id="system-architecture" data-rst-anchor="architecture-technology-stack">
            <a id="architecture-technology-stack"></a>
            <a id="architecture-system-components"></a>
            <a id="architecture-overview"></a>
            <h1>System Architecture<a class="headerlink" href="#system-architecture" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>System architecture overview for the RTE CKEditor Image extension, covering the three-layer architecture, core components, and technology stack.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#overview">Overview</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#three-layer-architecture">Three-Layer Architecture</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#system-design">System Design</a>


</li>
    <li class="toc-item">
    <a href="#high-level-architecture">High-Level Architecture</a>


</li>
    <li class="toc-item">
    <a href="#core-components">Core Components</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#backend-layer">Backend Layer</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#1-controllers-classes-controller">1. Controllers (Classes/Controller/)</a>


</li>
            <li class="toc-item">
    <a href="#2-event-listeners-classes-eventlistener">2. Event Listeners (Classes/EventListener/)</a>


</li>
            <li class="toc-item">
    <a href="#3-database-hooks-classes-database">3. Database Hooks (Classes/Database/)</a>


</li>
            <li class="toc-item">
    <a href="#4-data-handling-classes-datahandling-softreference">4. Data Handling (Classes/DataHandling/SoftReference/)</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#frontend-layer-ckeditor-plugin">Frontend Layer (CKEditor Plugin)</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#javascript-module-resources-public-javascript-plugins-typo3image-js">JavaScript Module (Resources/Public/JavaScript/Plugins/typo3image.js)</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#configuration-layer">Configuration Layer</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#yaml-configuration">YAML Configuration</a>


</li>
            <li class="toc-item">
    <a href="#typoscript">TypoScript</a>


</li>
            <li class="toc-item">
    <a href="#backend-routes">Backend Routes</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#technology-stack">Technology Stack</a>


</li>
    <li class="toc-item">
    <a href="#security-considerations">Security Considerations</a>


</li>
    <li class="toc-item">
    <a href="#performance-considerations">Performance Considerations</a>


</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="overview">
            <h2>Overview<a class="headerlink" href="#overview" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>This document explains the architectural structure and core components of the RTE CKEditor Image extension. For design patterns and integration details, see <a href="#architecture-design-patterns">Design Patterns &amp; Integration</a>.</p>

            <section class="section" id="three-layer-architecture">
            <h3>Three-Layer Architecture<a class="headerlink" href="#three-layer-architecture" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    
<ol start="1">
    <li value="1">
    <p><strong>CKEditor Plugin Layer</strong> (JavaScript)</p>


<ul>
    <li class="dash">Custom typo3image plugin</li>
    <li class="dash">Model element definition</li>
    <li class="dash">UI components and commands</li>
    <li class="dash">Upcast/downcast conversions</li>
</ul>
</li>
    <li value="2">
    <p><strong>TYPO3 Backend Layer</strong> (PHP)</p>


<ul>
    <li class="dash">Controllers for image selection and rendering</li>
    <li class="dash">Database hooks for content processing</li>
    <li class="dash">FAL integration</li>
    <li class="dash">Event listeners</li>
</ul>
</li>
    <li value="3">
    <p><strong>Frontend Rendering Layer</strong> (PHP/HTML)</p>


<ul>
    <li class="dash">TypoScript configuration</li>
    <li class="dash">Image processing and optimization</li>
    <li class="dash">HTML generation</li>
</ul>
</li>
</ol>

    </section>
    </section>
            <section class="section" id="system-design">
            <h2>System Design<a class="headerlink" href="#system-design" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>The rte_ckeditor_image extension follows TYPO3&#039;s modern extension architecture with CKEditor 5 integration, providing seamless FAL (File Abstraction Layer) image management within rich text editors.</p>

    </section>
            <section class="section" id="high-level-architecture">
            <h2>High-Level Architecture<a class="headerlink" href="#high-level-architecture" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs plaintext">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    TYPO3 Backend                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ   CKEditor   ‚îÇ  ‚îÇ    Image     ‚îÇ  ‚îÇ     FAL      ‚îÇ ‚îÇ
‚îÇ  ‚îÇ   Plugin     ‚îÇ‚îÄ‚ñ∂‚îÇ  Controller  ‚îÇ‚îÄ‚ñ∂‚îÇ   Storage    ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ         ‚îÇ                 ‚îÇ                             ‚îÇ
‚îÇ         ‚ñº                 ‚ñº                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ  ‚îÇ  JavaScript  ‚îÇ  ‚îÇ  Backend     ‚îÇ                    ‚îÇ
‚îÇ  ‚îÇ   Dialog     ‚îÇ  ‚îÇ    Route     ‚îÇ                    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Content Storage                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  RTE Content with data-htmlarea-* attributes    ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Frontend Rendering                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  TypoScript  ‚îÇ‚îÄ‚ñ∂‚îÇ   Image      ‚îÇ‚îÄ‚ñ∂‚îÇ   Rendered   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ    Hooks     ‚îÇ  ‚îÇ  Rendering   ‚îÇ  ‚îÇ     HTML     ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="core-components">
            <h2>Core Components<a class="headerlink" href="#core-components" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="backend-layer">
            <h3>Backend Layer<a class="headerlink" href="#backend-layer" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="1-controllers-classes-controller">
            <h4>1. Controllers (<code>Classes/Controller/</code>)<a class="headerlink" href="#1-controllers-classes-controller" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            

<ul>
    <li class="dash"><strong>SelectImageController</strong>: Handles image selection and processing</li>
    <li class="dash"><strong>ImageRenderingController</strong>: Frontend image rendering</li>
    <li class="dash"><strong>ImageLinkRenderingController</strong>: Renders images within links</li>
</ul>

    </section>
            <section class="section" id="2-event-listeners-classes-eventlistener">
            <h4>2. Event Listeners (<code>Classes/EventListener/</code>)<a class="headerlink" href="#2-event-listeners-classes-eventlistener" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            

<ul>
    <li class="dash"><strong>RteConfigurationListener</strong>: Customizes RTE configuration before initialization</li>
</ul>

    </section>
            <section class="section" id="3-database-hooks-classes-database">
            <h4>3. Database Hooks (<code>Classes/Database/</code>)<a class="headerlink" href="#3-database-hooks-classes-database" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            

<ul>
    <li class="dash"><strong>RteImagesDbHook</strong>: TCEmain data processing for image references</li>
</ul>

    </section>
            <section class="section" id="4-data-handling-classes-datahandling-softreference">
            <h4>4. Data Handling (<code>Classes/DataHandling/SoftReference/</code>)<a class="headerlink" href="#4-data-handling-classes-datahandling-softreference" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            

<ul>
    <li class="dash"><strong>RteImageSoftReferenceParser</strong>: Tracks soft references for link management</li>
</ul>

    </section>
    </section>
            <section class="section" id="frontend-layer-ckeditor-plugin">
            <h3>Frontend Layer (CKEditor Plugin)<a class="headerlink" href="#frontend-layer-ckeditor-plugin" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="javascript-module-resources-public-javascript-plugins-typo3image-js">
            <h4>JavaScript Module (<code>Resources/Public/JavaScript/Plugins/typo3image.js</code>)<a class="headerlink" href="#javascript-module-resources-public-javascript-plugins-typo3image-js" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            

<ul>
    <li class="dash"><strong>Typo3Image Plugin</strong>: CKEditor 5 plugin class</li>
    <li class="dash"><strong>Custom Model</strong>: <code>typo3image</code> element with rich attributes</li>
    <li class="dash"><strong>UI Components</strong>: Image dialog, selection modal</li>
    <li class="dash"><strong>Style Integration</strong>: StyleUtils and GeneralHtmlSupport integration</li>
    <li class="dash"><strong>Conversion System</strong>: Upcast (HTML ‚Üí Model) and Downcast (Model ‚Üí HTML)</li>
</ul>

    </section>
    </section>
            <section class="section" id="configuration-layer">
            <h3>Configuration Layer<a class="headerlink" href="#configuration-layer" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="yaml-configuration">
            <h4>YAML Configuration<a class="headerlink" href="#yaml-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            

<ul>
    <li class="dash"><strong>Services.yaml</strong>: Dependency injection container configuration</li>
    <li class="dash"><strong>Plugin.yaml</strong>: RTE plugin registration</li>
</ul>

    </section>
            <section class="section" id="typoscript">
            <h4>TypoScript<a class="headerlink" href="#typoscript" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            

<ul>
    <li class="dash"><strong>setup.typoscript</strong>: Frontend rendering configuration</li>
    <li class="dash"><strong>page.tsconfig</strong>: Backend RTE configuration</li>
</ul>

    </section>
            <section class="section" id="backend-routes">
            <h4>Backend Routes<a class="headerlink" href="#backend-routes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            

<ul>
    <li class="dash"><strong>Routes.php</strong>: Backend route definitions for image selection</li>
</ul>

    </section>
    </section>
    </section>
            <section class="section" id="technology-stack">
            <h2>Technology Stack<a class="headerlink" href="#technology-stack" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><strong>PHP</strong>: 8.2-8.9 with strict types</li>
    <li class="dash"><strong>TYPO3</strong>: 13.4.x (Core, Backend, Frontend, Extbase, RTE CKEditor)</li>
    <li class="dash"><strong>JavaScript</strong>: ES6 modules</li>
    <li class="dash"><strong>CKEditor</strong>: 5.x with @typo3/ckeditor5-bundle.js</li>
    <li class="dash"><strong>Dependency Injection</strong>: Symfony service container</li>
    <li class="dash"><strong>Standards</strong>: PSR-12, PER-CS2.0</li>
</ul>

    </section>
            <section class="section" id="security-considerations">
            <h2>Security Considerations<a class="headerlink" href="#security-considerations" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash">File access through FAL security layer</li>
    <li class="dash">Backend routes require authentication</li>
    <li class="dash">Input validation on all user data</li>
    <li class="dash">XSS prevention through proper encoding</li>
    <li class="dash">Data attribute sanitization on frontend</li>
</ul>

    </section>
            <section class="section" id="performance-considerations">
            <h2>Performance Considerations<a class="headerlink" href="#performance-considerations" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash">Processed images cached by TYPO3</li>
    <li class="dash">Lazy loading support for frontend</li>
    <li class="dash">Minimal JavaScript footprint</li>
    <li class="dash">Efficient database queries with soft references</li>
</ul>

    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#architecture-design-patterns">Design Patterns &amp; Integration</a> - Design patterns, integration points, and data flow</li>
    <li class="dash">Component Details - Detailed component breakdown</li>
    <li class="dash">Data Flow - Complete request/response flows</li>
    <li class="dash">CKEditor Integration - Editor integration details</li>
</ul>

    </section>
    </section>

        </article>
<article>
            <section class="section" id="design-patterns-integration" data-rst-anchor="architecture-extension-points">
            <a id="architecture-extension-points"></a>
            <a id="architecture-data-flow"></a>
            <a id="architecture-integration-points"></a>
            <a id="architecture-design-patterns"></a>
            <h1>Design Patterns &amp; Integration<a class="headerlink" href="#design-patterns-integration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Design patterns, integration points, data flow, and extension mechanisms for the RTE CKEditor Image extension.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#overview">Overview</a>


</li>
    <li class="toc-item">
    <a href="#key-design-patterns">Key Design Patterns</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#dependency-injection">Dependency Injection</a>


</li>
            <li class="toc-item">
    <a href="#event-driven-architecture">Event-Driven Architecture</a>


</li>
            <li class="toc-item">
    <a href="#mvc-pattern">MVC Pattern</a>


</li>
            <li class="toc-item">
    <a href="#plugin-pattern">Plugin Pattern</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#integration-points">Integration Points</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#typo3-core-integration">TYPO3 Core Integration</a>


</li>
            <li class="toc-item">
    <a href="#ckeditor-integration">CKEditor Integration</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#data-flow">Data Flow</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#image-selection-flow">Image Selection Flow</a>


</li>
            <li class="toc-item">
    <a href="#frontend-rendering-flow">Frontend Rendering Flow</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#extension-points">Extension Points</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#example-event-listener">Example Event Listener</a>


</li>
            <li class="toc-item">
    <a href="#example-typoscript-extension">Example TypoScript Extension</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="overview">
            <h2>Overview<a class="headerlink" href="#overview" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>This document explains the design patterns, integration approaches, and data flow used in the RTE CKEditor Image extension. For system architecture and components, see <a href="#architecture-overview">System Architecture</a>.</p>

    </section>
            <section class="section" id="key-design-patterns">
            <h2>Key Design Patterns<a class="headerlink" href="#key-design-patterns" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>The extension employs several proven design patterns for maintainability and extensibility:</p>

            

<ul>
    <li class="dash"><strong>MVC Pattern</strong> - Controllers, models, and views separation</li>
    <li class="dash"><strong>Event-Driven</strong> - PSR-14 events for extensibility</li>
    <li class="dash"><strong>Plugin Architecture</strong> - Modular CKEditor plugin</li>
    <li class="dash"><strong>Soft References</strong> - TYPO3 reference tracking</li>
    <li class="dash"><strong>Command Pattern</strong> - CKEditor commands for actions</li>
</ul>

            <section class="section" id="dependency-injection">
            <h3>Dependency Injection<a class="headerlink" href="#dependency-injection" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>All PHP classes use Symfony&#039;s dependency injection:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">services:</span>
  <span class="hljs-attr">_defaults:</span>
    <span class="hljs-attr">autowire:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">autoconfigure:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">public:</span> <span class="hljs-literal">false</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>This approach provides:</p>

            

<ul>
    <li class="dash">Loose coupling between components</li>
    <li class="dash">Easier testing through dependency substitution</li>
    <li class="dash">Clear component dependencies</li>
    <li class="dash">Automatic service wiring</li>
</ul>

    </section>
            <section class="section" id="event-driven-architecture">
            <h3>Event-Driven Architecture<a class="headerlink" href="#event-driven-architecture" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>TYPO3 event system for loose coupling:</p>

            

<ul>
    <li class="dash"><code>AfterPrepareConfigurationForEditorEvent</code> - RTE configuration</li>
    <li class="dash">TCEmain hooks for data processing</li>
</ul>

            
    <p>Benefits:</p>

            

<ul>
    <li class="dash">Components can be extended without modification</li>
    <li class="dash">Third-party extensions can hook into processing</li>
    <li class="dash">Maintainable separation of concerns</li>
    <li class="dash">Clear extension points for customization</li>
</ul>

    </section>
            <section class="section" id="mvc-pattern">
            <h3>MVC Pattern<a class="headerlink" href="#mvc-pattern" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Controllers handle requests, models represent data, views render output:</p>

            

<ul>
    <li class="dash"><strong>Controllers</strong>: Process backend requests and coordinate actions</li>
    <li class="dash"><strong>FAL Models</strong>: Represent files and their metadata</li>
    <li class="dash"><strong>TypoScript Views</strong>: Render frontend HTML output</li>
</ul>

            
    <p>This separation ensures:</p>

            

<ul>
    <li class="dash">Clear responsibility boundaries</li>
    <li class="dash">Independent testing of each layer</li>
    <li class="dash">Flexible view rendering strategies</li>
    <li class="dash">Reusable business logic</li>
</ul>

    </section>
            <section class="section" id="plugin-pattern">
            <h3>Plugin Pattern<a class="headerlink" href="#plugin-pattern" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>CKEditor 5 plugin system:</p>

            

<ul>
    <li class="dash">Custom <code>typo3image</code> model element</li>
    <li class="dash">Editor commands and UI components</li>
    <li class="dash">Conversion system for data transformation</li>
</ul>

            
    <p>Implementation details:</p>

            

<ul>
    <li class="dash">Plugin registration via <code>Plugin.yaml</code></li>
    <li class="dash">Custom schema definitions for model elements</li>
    <li class="dash">Bidirectional conversion (upcast/downcast)</li>
    <li class="dash">Integration with CKEditor&#039;s command system</li>
</ul>

    </section>
    </section>
            <section class="section" id="integration-points">
            <h2>Integration Points<a class="headerlink" href="#integration-points" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="typo3-core-integration">
            <h3>TYPO3 Core Integration<a class="headerlink" href="#typo3-core-integration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    
<ol start="1">
    <li value="1">
    <p><strong>RTE CKEditor</strong>: Extends TYPO3&#039;s CKEditor integration</p>


<ul>
    <li class="dash">Registers custom plugin through YAML configuration</li>
    <li class="dash">Extends default RTE configuration</li>
    <li class="dash">Adds TYPO3-specific functionality to editor</li>
</ul>
</li>
    <li value="2">
    <p><strong>FAL</strong>: Uses File Abstraction Layer for file management</p>


<ul>
    <li class="dash">Leverages FAL for unified file handling</li>
    <li class="dash">Respects file permissions and access rights</li>
    <li class="dash">Supports all FAL storage drivers</li>
    <li class="dash">Maintains file reference integrity</li>
</ul>
</li>
    <li value="3">
    <p><strong>TCEmain</strong>: Hooks into data processing pipeline</p>


<ul>
    <li class="dash">Processes image references during save operations</li>
    <li class="dash">Updates soft references automatically</li>
    <li class="dash">Validates data integrity</li>
    <li class="dash">Triggers reference index updates</li>
</ul>
</li>
    <li value="4">
    <p><strong>Soft References</strong>: Tracks file references for integrity</p>


<ul>
    <li class="dash">Custom soft reference parser for RTE images</li>
    <li class="dash">Enables reference tracking across content</li>
    <li class="dash">Supports reference index operations</li>
    <li class="dash">Prevents orphaned file records</li>
</ul>
</li>
</ol>

    </section>
            <section class="section" id="ckeditor-integration">
            <h3>CKEditor Integration<a class="headerlink" href="#ckeditor-integration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    
<ol start="1">
    <li value="1">
    <p><strong>Plugin Registration</strong>: Via JavaScriptModules.php and Plugin.yaml</p>


<ul>
    <li class="dash">Module registration in PHP</li>
    <li class="dash">Plugin configuration in YAML</li>
    <li class="dash">Integration with TYPO3&#039;s asset management</li>
    <li class="dash">Proper loading order and dependencies</li>
</ul>
</li>
    <li value="2">
    <p><strong>Custom Model</strong>: <code>typo3image</code> element with TYPO3-specific attributes</p>


<ul>
    <li class="dash">Schema definition for element structure</li>
    <li class="dash">Support for data-htmlarea-* attributes</li>
    <li class="dash">Custom properties for FAL integration</li>
    <li class="dash">Validation rules for data integrity</li>
</ul>
</li>
    <li value="3">
    <p><strong>Style System</strong>: Integration with CKEditor&#039;s style drop-down</p>


<ul>
    <li class="dash">Custom style definitions</li>
    <li class="dash">Integration with GeneralHtmlSupport</li>
    <li class="dash">TYPO3-specific class handling</li>
    <li class="dash">Style persistence in content</li>
</ul>
</li>
    <li value="4">
    <p><strong>Conversion</strong>: Bidirectional HTML ‚Üî Model conversion</p>


<ul>
    <li class="dash"><strong>Upcast</strong>: HTML to model during editor initialization</li>
    <li class="dash"><strong>Downcast</strong>: Model to HTML during save operations</li>
    <li class="dash">Attribute mapping and transformation</li>
    <li class="dash">Special handling for TYPO3 data attributes</li>
</ul>
</li>
</ol>

    </section>
    </section>
            <section class="section" id="data-flow">
            <h2>Data Flow<a class="headerlink" href="#data-flow" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="image-selection-flow">
            <h3>Image Selection Flow<a class="headerlink" href="#image-selection-flow" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs plaintext">User clicks insert image
    ‚Üì
CKEditor plugin opens modal
    ‚Üì
Backend route loads file browser
    ‚Üì
User selects image
    ‚Üì
JavaScript receives file UID
    ‚Üì
Backend API returns image info
    ‚Üì
Dialog opens with image properties
    ‚Üì
User confirms settings
    ‚Üì
typo3image model element created
    ‚Üì
Content saved to database</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Detailed steps:</p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>User Interaction</strong>: Editor toolbar button clicked</li>
    <li value="2"><strong>Modal Opening</strong>: CKEditor executes custom command</li>
    <li value="3"><strong>Browser Loading</strong>: AJAX call to backend route</li>
    <li value="4"><strong>File Selection</strong>: User navigates FAL structure</li>
    <li value="5"><strong>Data Retrieval</strong>: File UID sent to backend API</li>
    <li value="6"><strong>Properties Dialog</strong>: JavaScript populates form with file data</li>
    <li value="7"><strong>Confirmation</strong>: User sets dimensions, alignment, etc.</li>
    <li value="8"><strong>Model Creation</strong>: CKEditor creates typo3image element</li>
    <li value="9"><strong>Persistence</strong>: Content saved with data-htmlarea-* attributes</li>
</ol>

    </section>
            <section class="section" id="frontend-rendering-flow">
            <h3>Frontend Rendering Flow<a class="headerlink" href="#frontend-rendering-flow" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs plaintext">RTE content loaded from database
    ‚Üì
lib.parseFunc_RTE processes content
    ‚Üì
ImageRenderingController hook invoked
    ‚Üì
FAL file loaded from UID
    ‚Üì
Magic image processing applied
    ‚Üì
Processed image URL generated
    ‚Üì
HTML with processed URL rendered
    ‚Üì
Internal data-* attributes removed</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Detailed steps:</p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Content Retrieval</strong>: Database query loads RTE field</li>
    <li value="2"><strong>TypoScript Processing</strong>: lib.parseFunc_RTE activated</li>
    <li value="3"><strong>Hook Execution</strong>: Custom rendering hook triggered</li>
    <li value="4"><strong>File Loading</strong>: FAL resolves file UID to file object</li>
    <li value="5"><strong>Image Processing</strong>: Magic image generation (resize, crop, etc.)</li>
    <li value="6"><strong>URL Generation</strong>: Processed image URL created</li>
    <li value="7"><strong>HTML Rendering</strong>: Final img tag generated</li>
    <li value="8"><strong>Attribute Cleanup</strong>: Internal data-* attributes stripped</li>
</ol>

    </section>
    </section>
            <section class="section" id="extension-points">
            <h2>Extension Points<a class="headerlink" href="#extension-points" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>Developers can extend the extension through:</p>

            
    
<ol start="1">
    <li value="1">
    <p><strong>Event listeners</strong> (PSR-14 events)</p>


<ul>
    <li class="dash"><code>AfterPrepareConfigurationForEditorEvent</code>: Customize RTE configuration</li>
    <li class="dash">Custom events can be added for additional hooks</li>
    <li class="dash">Event priority allows fine-grained control</li>
    <li class="dash">Standard TYPO3 event dispatcher patterns</li>
</ul>
</li>
    <li value="2">
    <p><strong>TypoScript configuration</strong></p>


<ul>
    <li class="dash">Override rendering settings</li>
    <li class="dash">Custom image processing instructions</li>
    <li class="dash">Template modifications</li>
    <li class="dash">Additional CSS classes or attributes</li>
</ul>
</li>
    <li value="3">
    <p><strong>XClasses</strong> (not recommended)</p>


<ul>
    <li class="dash">Last resort for core modifications</li>
    <li class="dash">Potential compatibility issues</li>
    <li class="dash">Better alternatives usually exist</li>
    <li class="dash">Should only be used when no other option available</li>
</ul>
</li>
    <li value="4">
    <p><strong>Custom processing hooks</strong></p>


<ul>
    <li class="dash">TCEmain hooks for data manipulation</li>
    <li class="dash">Content element rendering hooks</li>
    <li class="dash">Custom transformations during save/load</li>
    <li class="dash">Validation and sanitization extensions</li>
</ul>
</li>
    <li value="5">
    <p><strong>Additional CKEditor plugins</strong></p>


<ul>
    <li class="dash">Complementary functionality</li>
    <li class="dash">Integration with typo3image plugin</li>
    <li class="dash">Custom commands and UI components</li>
    <li class="dash">Extended model attributes</li>
</ul>
</li>
</ol>

            <section class="section" id="example-event-listener">
            <h3>Example Event Listener<a class="headerlink" href="#example-event-listener" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">RteCKEditor</span>\<span class="hljs-title">Form</span>\<span class="hljs-title">Element</span>\<span class="hljs-title">Event</span>\<span class="hljs-title">AfterPrepareConfigurationForEditorEvent</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomRteConfigurationListener</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__invoke</span><span class="hljs-params">(AfterPrepareConfigurationForEditorEvent $event)</span>: <span class="hljs-title">void</span>
    </span>{
        $config = $event-&gt;getConfiguration();

        <span class="hljs-comment">// Modify configuration as needed</span>
        $config[<span class="hljs-string">'typo3image'</span>][<span class="hljs-string">'customSetting'</span>] = <span class="hljs-string">'value'</span>;

        $event-&gt;setConfiguration($config);
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="example-typoscript-extension">
            <h3>Example TypoScript Extension<a class="headerlink" href="#example-typoscript-extension" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE {
    tags {
        img {
            width = 1920
            height = 1080

            <span class="hljs-comment">// Custom processing</span>
            params = class="custom-image-class"
        }
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#architecture-overview">System Architecture</a> - System architecture and core components</li>
    <li class="dash">Component Details - Detailed component breakdown</li>
    <li class="dash">CKEditor Integration - Editor integration details</li>
    <li class="dash">API Reference - Complete API documentation</li>
</ul>

    </section>
    </section>

        </article>
<article>
            <section class="section" id="api-documentation-1" data-rst-anchor="api-index">
            <a id="api-index"></a>
            <a id="api-documentation"></a>
            <h1>API Documentation<a class="headerlink" href="#api-documentation-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Complete API reference for all PHP classes in the RTE CKEditor Image extension.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#api-components">API Components</a>


</li>
    <li class="toc-item">
    <a href="#usage-examples">Usage Examples</a>


</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="api-components">
            <h2>API Components<a class="headerlink" href="#api-components" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <div class="row card-group pb-4 row-cols-1 row-cols-md-2 g-4">
    <div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üéÆ Controllers API<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Frontend and backend controllers for image handling and rendering</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#api-controllers" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üìä Data Handling API<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Database hooks, content processing, and image transformations</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#api-datahandling" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üîî Event Listeners<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>PSR-14 event system integration for RTE configuration</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#api-eventlisteners" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div></div>
    </section>
            <section class="section" id="usage-examples">
            <h2>Usage Examples<a class="headerlink" href="#usage-examples" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>See <a href="#examples-common-use-cases">Common Use Cases</a> for practical implementation examples of these APIs.</p>

    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#architecture-overview">Architecture Overview</a> - Understand how components interact</li>
    <li class="dash"><a href="#ckeditor-plugin-development">CKEditor Plugin Development</a> - Frontend JavaScript components</li>
    <li class="dash"><a href="#integration">Configuration Guide</a> - Configure PHP components</li>
</ul>

            
    </section>
    </section>

        </article>
<article>
            <section class="section" id="controllers-api" data-rst-anchor="api-controllers">
            <a id="api-controllers"></a>
            <h1>Controllers API<a class="headerlink" href="#controllers-api" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Controllers handle HTTP requests in the backend, providing image selection, information retrieval, and processing capabilities.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#selectimagecontroller">SelectImageController</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#methods">Methods</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#mainaction">mainAction()</a>


</li>
            <li class="toc-item">
    <a href="#infoaction">infoAction()</a>


</li>
            <li class="toc-item">
    <a href="#getimage">getImage()</a>


</li>
            <li class="toc-item">
    <a href="#processimage">processImage()</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#imagerenderingcontroller">ImageRenderingController</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#methods">Methods</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#renderimageattributes">renderImageAttributes()</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#imagelinkrenderingcontroller">ImageLinkRenderingController</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#methods">Methods</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#renderimages">renderImages()</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#service-configuration">Service Configuration</a>


</li>
    <li class="toc-item">
    <a href="#usage-examples">Usage Examples</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#calling-image-info-from-javascript">Calling Image Info from JavaScript</a>


</li>
            <li class="toc-item">
    <a href="#typoscript-configuration">TypoScript Configuration</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="selectimagecontroller" data-rst-anchor="api-selectimagecontroller">
            <h2>SelectImageController<a class="headerlink" href="#selectimagecontroller" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <a id="api-selectimagecontroller"></a>
            <dl class="field-list simple ">
            <dt class="field-odd">Namespace</dt>

        <dd class="field-odd">
            
    <p><code>Netresearch\RteCKEditorImage\Controller</code></p>
        </dd>
            <dt class="field-odd">Purpose</dt>

        <dd class="field-odd">
            
    <p>Main controller for image selection and processing in the CKEditor context</p>
        </dd>
            <dt class="field-odd">Backend Route</dt>

        <dd class="field-odd">
            
    <p><code>rteckeditorimage_wizard_select_image</code> ‚Üí <code>/rte/wizard/selectimage</code></p>
        </dd>
    </dl>
            <section class="section" id="methods">
            <h3>Methods<a class="headerlink" href="#methods" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="mainaction">
            <h4>mainAction()<a class="headerlink" href="#mainaction" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php method">
    <dt class="sig sig-object php" id="mainaction">
<span class="sig-name descname"><span class="pre">mainAction</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">ServerRequestInterface $request</span></em><span class="sig-paren">)</span>
<em class="sig-returns"><span class="pre">: ResponseInterface</span></em>
        <a class="headerlink" href="#mainaction" data-id="mainaction" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:mainAction`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Entry point for the image browser/selection interface.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param ServerRequestInterface $request</dt>

        <dd class="field-odd">
            
    <p>PSR-7 server request with query parameters</p>
        </dd>
            <dt class="field-odd">returntype</dt>

        <dd class="field-odd">
            
    <p>ResponseInterface</p>
        </dd>
    </dl>
    <p><strong>Query Parameters:</strong></p>
<dl class="field-list simple ">
            <dt class="field-odd">`mode`</dt>

        <dd class="field-odd">
            
    <p>Browser mode (default: <code>file</code> from route configuration)</p>
        </dd>
            <dt class="field-odd">`bparams`</dt>

        <dd class="field-odd">
            
    <p>Browser parameters passed to file browser</p>
        </dd>
    </dl>
    <p><strong>Usage Example:</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Called from CKEditor plugin</span>
<span class="hljs-keyword">const</span> contentUrl = routeUrl + <span class="hljs-string">'&amp;contentsLanguage=en&amp;editorId=123&amp;bparams='</span> + bparams.join(<span class="hljs-string">'|'</span>);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                    <dl class="field-list simple">
                <dt class="field-even">Returns</dt>
                <dd class="field-even">
                    
    <p>PSR-7 response with file browser HTML</p>

                </dd>
            </dl>
        </dd>
</dl>
    </section>
            <section class="section" id="infoaction">
            <h4>infoAction()<a class="headerlink" href="#infoaction" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php method">
    <dt class="sig sig-object php" id="infoaction">
<span class="sig-name descname"><span class="pre">infoAction</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">ServerRequestInterface $request</span></em><span class="sig-paren">)</span>
<em class="sig-returns"><span class="pre">: ResponseInterface</span></em>
        <a class="headerlink" href="#infoaction" data-id="infoaction" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:infoAction`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Returns JSON with image information and processed variants.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param ServerRequestInterface $request</dt>

        <dd class="field-odd">
            
    <p>Server request with file identification and processing parameters</p>
        </dd>
            <dt class="field-odd">returntype</dt>

        <dd class="field-odd">
            
    <p>ResponseInterface</p>
        </dd>
    </dl>
    <p><strong>Query Parameters:</strong></p>
<dl class="field-list simple ">
            <dt class="field-odd">`fileId`</dt>

        <dd class="field-odd">
            
    <p>FAL file UID</p>
        </dd>
            <dt class="field-odd">`table`</dt>

        <dd class="field-odd">
            
    <p>Database table (usually <code>sys_file</code>)</p>
        </dd>
            <dt class="field-odd">`P[width]`</dt>

        <dd class="field-odd">
            
    <p>Desired width (optional)</p>
        </dd>
            <dt class="field-odd">`P[height]`</dt>

        <dd class="field-odd">
            
    <p>Desired height (optional)</p>
        </dd>
            <dt class="field-odd">`action`</dt>

        <dd class="field-odd">
            
    <p>Action type (<code>info</code>)</p>
        </dd>
    </dl>
    <p><strong>Response Structure:</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs json">{
  <span class="hljs-attr">"uid"</span>: <span class="hljs-number">123</span>,
  <span class="hljs-attr">"url"</span>: <span class="hljs-string">"/fileadmin/user_upload/image.jpg"</span>,
  <span class="hljs-attr">"width"</span>: <span class="hljs-number">1920</span>,
  <span class="hljs-attr">"height"</span>: <span class="hljs-number">1080</span>,
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Image title"</span>,
  <span class="hljs-attr">"alt"</span>: <span class="hljs-string">"Alternative text"</span>,
  <span class="hljs-attr">"processed"</span>: {
    <span class="hljs-attr">"url"</span>: <span class="hljs-string">"/fileadmin/_processed_/image_hash.jpg"</span>,
    <span class="hljs-attr">"width"</span>: <span class="hljs-number">800</span>,
    <span class="hljs-attr">"height"</span>: <span class="hljs-number">450</span>
  },
  <span class="hljs-attr">"lang"</span>: {
    <span class="hljs-attr">"override"</span>: <span class="hljs-string">"Override %s"</span>,
    <span class="hljs-attr">"overrideNoDefault"</span>: <span class="hljs-string">"Override (no default)"</span>,
    <span class="hljs-attr">"zoom"</span>: <span class="hljs-string">"Zoom"</span>,
    <span class="hljs-attr">"cssClass"</span>: <span class="hljs-string">"CSS Class"</span>
  }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    <p><strong>Usage Example:</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// From CKEditor plugin</span>
getImageInfo(editor, <span class="hljs-string">'sys_file'</span>, <span class="hljs-number">123</span>, {<span class="hljs-attr">width</span>: <span class="hljs-string">'800'</span>, <span class="hljs-attr">height</span>: <span class="hljs-string">'450'</span>})
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">img</span>) </span>{
    <span class="hljs-comment">// Use image data</span>
  });</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                    <dl class="field-list simple">
                <dt class="field-even">Returns</dt>
                <dd class="field-even">
                    
    <p>JSON response with image data</p>

                </dd>
            </dl>
        </dd>
</dl>
    </section>
            <section class="section" id="getimage">
            <h4>getImage()<a class="headerlink" href="#getimage" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php method">
    <dt class="sig sig-object php" id="getimage">
<span class="sig-name descname"><span class="pre">getImage</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">int fileUid</span></em>, <em class="sig-param"><span class="pre">string table</span></em><span class="sig-paren">)</span>
        <a class="headerlink" href="#getimage" data-id="getimage" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:getImage`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Retrieves FAL File object.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param int fileUid</dt>

        <dd class="field-odd">
            
    <p>File UID from FAL</p>
        </dd>
            <dt class="field-odd">param string table</dt>

        <dd class="field-odd">
            
    <p>Database table (sys_file)</p>
        </dd>
            <dt class="field-odd">returntype</dt>

        <dd class="field-odd">
            
    <p>TYPO3\CMS\Core\Resource\File|null</p>
        </dd>
            <dt class="field-odd">throws</dt>

        <dd class="field-odd">
            
    <p>Exception if file cannot be loaded</p>
        </dd>
    </dl>
                    <dl class="field-list simple">
                <dt class="field-even">Returns</dt>
                <dd class="field-even">
                    
    <p>File object or null if not found</p>

                </dd>
            </dl>
        </dd>
</dl>
    </section>
            <section class="section" id="processimage">
            <h4>processImage()<a class="headerlink" href="#processimage" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php method">
    <dt class="sig sig-object php" id="processimage">
<span class="sig-name descname"><span class="pre">processImage</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">File file</span></em>, <em class="sig-param"><span class="pre">array processingInstructions</span></em><span class="sig-paren">)</span>
        <a class="headerlink" href="#processimage" data-id="processimage" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:processImage`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Creates processed image variant with specified dimensions.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param File file</dt>

        <dd class="field-odd">
            
    <p>Original FAL file</p>
        </dd>
            <dt class="field-odd">param array processingInstructions</dt>

        <dd class="field-odd">
            
    <p>Array with <code>width</code>, <code>height</code>, <code>crop</code>, etc.</p>
        </dd>
            <dt class="field-odd">returntype</dt>

        <dd class="field-odd">
            
    <p>TYPO3\CMS\Core\Resource\ProcessedFile|null</p>
        </dd>
    </dl>
    <p><strong>Processing Instructions:</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">[
    <span class="hljs-string">'width'</span> =&gt; <span class="hljs-string">'800'</span>,
    <span class="hljs-string">'height'</span> =&gt; <span class="hljs-string">'600'</span>,
    <span class="hljs-string">'crop'</span> =&gt; <span class="hljs-keyword">null</span>  <span class="hljs-comment">// Optional crop configuration</span>
]</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                    <dl class="field-list simple">
                <dt class="field-even">Returns</dt>
                <dd class="field-even">
                    
    <p>Processed file or null</p>

                </dd>
            </dl>
        </dd>
</dl>
    </section>
    </section>
    </section>
            <section class="section" id="imagerenderingcontroller" data-rst-anchor="api-imagerenderingcontroller">
            <h2>ImageRenderingController<a class="headerlink" href="#imagerenderingcontroller" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <a id="api-imagerenderingcontroller"></a>
            <dl class="field-list simple ">
            <dt class="field-odd">Namespace</dt>

        <dd class="field-odd">
            
    <p><code>Netresearch\RteCKEditorImage\Controller</code></p>
        </dd>
            <dt class="field-odd">Purpose</dt>

        <dd class="field-odd">
            
    <p>Frontend rendering controller for <code>&lt;img&gt;</code> tags in RTE content</p>
        </dd>
    </dl>
            
    <p><strong>TypoScript Integration:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE {
    tags.img = <span class="hljs-keyword">TEXT</span>
    tags.img {
        current = 1
        preUserFunc = Netresearch\RteCKEditorImage\Controller\ImageRenderingController-&gt;renderImageAttributes
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <section class="section" id="methods">
            <h3>Methods<a class="headerlink" href="#methods" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="renderimageattributes">
            <h4>renderImageAttributes()<a class="headerlink" href="#renderimageattributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php method">
    <dt class="sig sig-object php" id="renderimageattributes">
<span class="sig-name descname"><span class="pre">renderImageAttributes</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">string $content</span></em>, <em class="sig-param"><span class="pre">array $conf</span></em>, <em class="sig-param"><span class="pre">ContentObjectRenderer $cObj</span></em><span class="sig-paren">)</span>
<em class="sig-returns"><span class="pre">: string</span></em>
        <a class="headerlink" href="#renderimageattributes" data-id="renderimageattributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:renderImageAttributes`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Processes <code>&lt;img&gt;</code> tags in RTE content, applying magic images and FAL processing.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param string $content</dt>

        <dd class="field-odd">
            
    <p>Current HTML content (single <code>&lt;img&gt;</code> tag)</p>
        </dd>
            <dt class="field-odd">param array $conf</dt>

        <dd class="field-odd">
            
    <p>TypoScript configuration</p>
        </dd>
            <dt class="field-odd">param ContentObjectRenderer $cObj</dt>

        <dd class="field-odd">
            
    <p>Content object renderer</p>
        </dd>
            <dt class="field-odd">returntype</dt>

        <dd class="field-odd">
            
    <p>string</p>
        </dd>
    </dl>
    <p><strong>Processing Steps:</strong></p>

    
<ol start="1" type="1">
    <li value="1">Parse <code>data-htmlarea-file-uid</code> attribute</li>
    <li value="2">Load FAL file from UID</li>
    <li value="3">Apply magic image processing (resize, crop)</li>
    <li value="4">Generate processed image URL</li>
    <li value="5">Remove internal data attributes</li>
    <li value="6">Return updated HTML</li>
</ol>

    <p><strong>Data Attributes Processed:</strong></p>
<dl class="field-list simple ">
            <dt class="field-odd">data-htmlarea-file-uid</dt>

        <dd class="field-odd">
            
    <p>FAL file reference</p>
        </dd>
            <dt class="field-odd">data-htmlarea-file-table</dt>

        <dd class="field-odd">
            
    <p>Table name</p>
        </dd>
            <dt class="field-odd">data-htmlarea-zoom</dt>

        <dd class="field-odd">
            
    <p>Zoom functionality</p>
        </dd>
            <dt class="field-odd">data-title-override</dt>

        <dd class="field-odd">
            
    <p>Title override flag</p>
        </dd>
            <dt class="field-odd">data-alt-override</dt>

        <dd class="field-odd">
            
    <p>Alt override flag</p>
        </dd>
    </dl>
                    <dl class="field-list simple">
                <dt class="field-even">Returns</dt>
                <dd class="field-even">
                    
    <p>Processed HTML with updated image URL and attributes</p>

                </dd>
            </dl>
        </dd>
</dl>
    </section>
    </section>
    </section>
            <section class="section" id="imagelinkrenderingcontroller" data-rst-anchor="api-imagelinkrenderingcontroller">
            <h2>ImageLinkRenderingController<a class="headerlink" href="#imagelinkrenderingcontroller" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <a id="api-imagelinkrenderingcontroller"></a>
            <dl class="field-list simple ">
            <dt class="field-odd">Namespace</dt>

        <dd class="field-odd">
            
    <p><code>Netresearch\RteCKEditorImage\Controller</code></p>
        </dd>
            <dt class="field-odd">Purpose</dt>

        <dd class="field-odd">
            
    <p>Handles rendering of images within <code>&lt;a&gt;</code> tags (linked images)</p>
        </dd>
    </dl>
            
    <p><strong>TypoScript Integration:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE {
    tags.a = <span class="hljs-keyword">TEXT</span>
    tags.a {
        current = 1
        preUserFunc = Netresearch\RteCKEditorImage\Controller\ImageLinkRenderingController-&gt;renderImages
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <section class="section" id="methods">
            <h3>Methods<a class="headerlink" href="#methods" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="renderimages">
            <h4>renderImages()<a class="headerlink" href="#renderimages" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php method">
    <dt class="sig sig-object php" id="renderimages">
<span class="sig-name descname"><span class="pre">renderImages</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">string $content</span></em>, <em class="sig-param"><span class="pre">array $conf</span></em>, <em class="sig-param"><span class="pre">ContentObjectRenderer $cObj</span></em><span class="sig-paren">)</span>
<em class="sig-returns"><span class="pre">: string</span></em>
        <a class="headerlink" href="#renderimages" data-id="renderimages" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:renderImages`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Processes <code>&lt;img&gt;</code> tags within <code>&lt;a&gt;</code> tags, maintaining link functionality while applying image processing.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param string $content</dt>

        <dd class="field-odd">
            
    <p>HTML content (complete <code>&lt;a&gt;</code> tag with nested <code>&lt;img&gt;</code>)</p>
        </dd>
            <dt class="field-odd">param array $conf</dt>

        <dd class="field-odd">
            
    <p>TypoScript configuration</p>
        </dd>
            <dt class="field-odd">param ContentObjectRenderer $cObj</dt>

        <dd class="field-odd">
            
    <p>Content object renderer</p>
        </dd>
            <dt class="field-odd">returntype</dt>

        <dd class="field-odd">
            
    <p>string</p>
        </dd>
    </dl>
    <p><strong>Usage Scenario:</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-comment">&lt;!-- Input --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"page-link"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-htmlarea-file-uid</span>=<span class="hljs-string">"123"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"..."</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Output --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"page-link"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/fileadmin/_processed_/image_hash.jpg"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"800"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"600"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                    <dl class="field-list simple">
                <dt class="field-even">Returns</dt>
                <dd class="field-even">
                    
    <p>Processed HTML with both link and image correctly rendered</p>

                </dd>
            </dl>
        </dd>
</dl>
    </section>
    </section>
    </section>
            <section class="section" id="service-configuration">
            <h2>Service Configuration<a class="headerlink" href="#service-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>All controllers are configured in <code>Configuration/Services.yaml</code>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-string">Netresearch\RteCKEditorImage\Controller\SelectImageController:</span>
  <span class="hljs-attr">tags:</span> <span class="hljs-string">['backend.controller']</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Controllers use constructor injection for dependencies like <code>ResourceFactory</code>.</p>

    </section>
            <section class="section" id="usage-examples">
            <h2>Usage Examples<a class="headerlink" href="#usage-examples" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="calling-image-info-from-javascript">
            <h3>Calling Image Info from JavaScript<a class="headerlink" href="#calling-image-info-from-javascript" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getImageInfo</span>(<span class="hljs-params">editor, table, uid, params</span>) </span>{
    <span class="hljs-keyword">let</span> url = editor.config.get(<span class="hljs-string">'style'</span>).typo3image.routeUrl
        + <span class="hljs-string">'&amp;action=info&amp;fileId='</span> + <span class="hljs-built_in">encodeURIComponent</span>(uid)
        + <span class="hljs-string">'&amp;table='</span> + <span class="hljs-built_in">encodeURIComponent</span>(table);

    <span class="hljs-keyword">if</span> (params.width) {
        url += <span class="hljs-string">'&amp;P[width]='</span> + params.width;
    }
    <span class="hljs-keyword">if</span> (params.height) {
        url += <span class="hljs-string">'&amp;P[height]='</span> + params.height;
    }

    <span class="hljs-keyword">return</span> $.getJSON(url);
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="typoscript-configuration">
            <h3>TypoScript Configuration<a class="headerlink" href="#typoscript-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">lib.parseFunc_RTE {
    tags.img = <span class="hljs-keyword">TEXT</span>
    tags.img {
        current = 1
        preUserFunc = Netresearch\RteCKEditorImage\Controller\ImageRenderingController-&gt;renderImageAttributes
    }

    nonTypoTagStdWrap.HTMLparser.tags.img.fixAttrib {
        <span class="hljs-comment"># Remove internal attributes from frontend output</span>
        data-htmlarea-file-uid.unset = 1
        data-htmlarea-file-table.unset = 1
        data-htmlarea-zoom.unset = 1
        data-title-override.unset = 1
        data-alt-override.unset = 1
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#architecture-overview">Architecture Overview</a></li>
    <li class="dash"><a href="#architecture-design-patterns">Data Flow</a></li>
    <li class="dash"><a href="#typoscript-reference">TypoScript Configuration</a></li>
</ul>

    </section>
    </section>

        </article>
<article>
            <section class="section" id="data-handling-api" data-rst-anchor="api-datahandling">
            <a id="api-datahandling"></a>
            <h1>Data Handling API<a class="headerlink" href="#data-handling-api" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Complete API reference for data handling components including soft references and database hooks.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#rteimagesdbhook">RteImagesDbHook</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#class-properties">Class Properties</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#fetchexternalimages">fetchExternalImages</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#constructor">Constructor</a>


</li>
            <li class="toc-item">
    <a href="#main-hook-methods">Main Hook Methods</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#processdatamap-postprocessfieldarray">processDatamap_postProcessFieldArray()</a>


</li>
            <li class="toc-item">
    <a href="#transform-rte">transform_rte()</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#image-processing-methods">Image Processing Methods</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#modifyrtefield">modifyRteField()</a>


</li>
                    </ul>
</li>
            <li class="toc-item">
    <a href="#helper-methods">Helper Methods</a>

        <ul class="section-level-2">
            <li class="toc-item">
    <a href="#getimagewidthfromattributes">getImageWidthFromAttributes()</a>


</li>
            <li class="toc-item">
    <a href="#getimageheightfromattributes">getImageHeightFromAttributes()</a>


</li>
            <li class="toc-item">
    <a href="#extractfromattributevalueorstyle">extractFromAttributeValueOrStyle()</a>


</li>
            <li class="toc-item">
    <a href="#matchstyleattribute">matchStyleAttribute()</a>


</li>
            <li class="toc-item">
    <a href="#resolvefieldconfigurationandrespectcolumnsoverrides">resolveFieldConfigurationAndRespectColumnsOverrides()</a>


</li>
                    </ul>
</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#rteimagesoftreferenceparser">RteImageSoftReferenceParser</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#purpose-of-soft-references">Purpose of Soft References</a>


</li>
            <li class="toc-item">
    <a href="#parser-key">Parser Key</a>


</li>
            <li class="toc-item">
    <a href="#parsing-logic">Parsing Logic</a>


</li>
            <li class="toc-item">
    <a href="#reference-index-integration">Reference Index Integration</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#usage-examples">Usage Examples</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#custom-hook-extension">Custom Hook Extension</a>


</li>
            <li class="toc-item">
    <a href="#querying-soft-references">Querying Soft References</a>


</li>
            <li class="toc-item">
    <a href="#rebuilding-reference-index">Rebuilding Reference Index</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#magic-images-explained">Magic Images Explained</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#what-are-magic-images">What are Magic Images?</a>


</li>
            <li class="toc-item">
    <a href="#how-it-works">How It Works</a>


</li>
            <li class="toc-item">
    <a href="#configuration">Configuration</a>


</li>
            <li class="toc-item">
    <a href="#processing-context">Processing Context</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#debugging">Debugging</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#enable-detailed-logging">Enable Detailed Logging</a>


</li>
            <li class="toc-item">
    <a href="#check-processed-files">Check Processed Files</a>


</li>
            <li class="toc-item">
    <a href="#verify-soft-references">Verify Soft References</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="rteimagesdbhook" data-rst-anchor="api-rteimagesdbhook">
            <h2>RteImagesDbHook<a class="headerlink" href="#rteimagesdbhook" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <a id="api-rteimagesdbhook"></a>
            <dl class="field-list simple ">
            <dt class="field-odd">Namespace</dt>

        <dd class="field-odd">
            
    <p><code>Netresearch\RteCKEditorImage\Database</code></p>
        </dd>
            <dt class="field-odd">Purpose</dt>

        <dd class="field-odd">
            
    <p>TCEmain hook for processing RTE content with image references during database operations</p>
        </dd>
            <dt class="field-odd">Hook Registration</dt>

        <dd class="field-odd">
            
    <p><code>$GLOBALS[&#039;TYPO3_CONF_VARS&#039;][&#039;SC_OPTIONS&#039;][&#039;t3lib/class.t3lib_tcemain.php&#039;][&#039;processDatamapClass&#039;][]</code></p>
        </dd>
            <dt class="field-odd">Service Configuration</dt>

        <dd class="field-odd">
            
    <p>Public service (automatically registered via ext_localconf.php)</p>
        </dd>
    </dl>
            <section class="section" id="class-properties">
            <h3>Class Properties<a class="headerlink" href="#class-properties" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="fetchexternalimages">
            <h4>fetchExternalImages<a class="headerlink" href="#fetchexternalimages" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php property">
    <dt class="sig sig-object php" id="fetchexternalimages">
        <span class="sig-name descname"><span class="pre">fetch<wbr>External<wbr>Images</span></span>
        <a class="headerlink" href="#fetchexternalimages" data-id="fetchexternalimages" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:property:`somemanual:fetchExternalImages`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd><dl class="field-list simple ">
            <dt class="field-odd">Type</dt>

        <dd class="field-odd">
            
    <p>bool</p>
        </dd>
            <dt class="field-odd">Visibility</dt>

        <dd class="field-odd">
            
    <p>protected</p>
        </dd>
    </dl>
    <p>Controls whether external image URLs should be fetched and uploaded to TYPO3.</p>

    <p><strong>Configuration:</strong></p>

    <p>Set via Extension Manager or settings.php:</p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'EXTENSIONS'</span>][<span class="hljs-string">'rte_ckeditor_image'</span>][<span class="hljs-string">'fetchExternalImages'</span>] = <span class="hljs-keyword">true</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div></dd>
</dl>
    </section>
    </section>
            <section class="section" id="constructor">
            <h3>Constructor<a class="headerlink" href="#constructor" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <dl class="php method">
    <dt class="sig sig-object php" id="construct">
<span class="sig-name descname"><span class="pre">__construct</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">ExtensionConfiguration $extensionConfiguration</span></em>, <em class="sig-param"><span class="pre">LogManager $logManager</span></em><span class="sig-paren">)</span>
        <a class="headerlink" href="#construct" data-id="construct" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:__construct`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Initializes hook with extension configuration and logging.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param ExtensionConfiguration $extensionConfiguration</dt>

        <dd class="field-odd">
            
    <p>TYPO3 extension configuration service</p>
        </dd>
            <dt class="field-odd">param LogManager $logManager</dt>

        <dd class="field-odd">
            
    <p>Logger manager for error logging</p>
        </dd>
            <dt class="field-odd">throws ExtensionConfigurationExtensionNotConfiguredException</dt>

        <dd class="field-odd">
            
    <p>If extension not configured</p>
        </dd>
            <dt class="field-odd">throws ExtensionConfigurationPathDoesNotExistException</dt>

        <dd class="field-odd">
            
    <p>If configuration path missing</p>
        </dd>
    </dl>
        </dd>
</dl>
    </section>
            <section class="section" id="main-hook-methods">
            <h3>Main Hook Methods<a class="headerlink" href="#main-hook-methods" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="processdatamap-postprocessfieldarray">
            <h4>processDatamap_postProcessFieldArray()<a class="headerlink" href="#processdatamap-postprocessfieldarray" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php method">
    <dt class="sig sig-object php" id="processdatamap-postprocessfieldarray">
<span class="sig-name descname"><span class="pre">processDatamap_postProcessFieldArray</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">string $status</span></em>, <em class="sig-param"><span class="pre">string $table</span></em>, <em class="sig-param"><span class="pre">string $id</span></em>, <em class="sig-param"><span class="pre">array &amp;$fieldArray</span></em>, <em class="sig-param"><span class="pre">DataHandler &amp;$dataHandler</span></em><span class="sig-paren">)</span>
<em class="sig-returns"><span class="pre">: void</span></em>
        <a class="headerlink" href="#processdatamap-postprocessfieldarray" data-id="processdatamap-postprocessfieldarray" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:processDatamap_postProcessFieldArray`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Main TCEmain hook method called after field processing, before database save.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param string $status</dt>

        <dd class="field-odd">
            
    <p>Record status (&#039;new&#039; or &#039;update&#039;)</p>
        </dd>
            <dt class="field-odd">param string $table</dt>

        <dd class="field-odd">
            
    <p>Database table name</p>
        </dd>
            <dt class="field-odd">param string $id</dt>

        <dd class="field-odd">
            
    <p>Record ID (or &#039;NEW...&#039; for new records)</p>
        </dd>
            <dt class="field-odd">param array $fieldArray</dt>

        <dd class="field-odd">
            
    <p>Reference to field values array</p>
        </dd>
            <dt class="field-odd">param DataHandler $dataHandler</dt>

        <dd class="field-odd">
            
    <p>TYPO3 DataHandler instance</p>
        </dd>
    </dl>
    <p><strong>Processing Flow:</strong></p>

    
<ol start="1" type="1">
    <li value="1">Iterates through all fields in <code>$fieldArray</code></li>
    <li value="2">Identifies RTE text fields via TCA configuration</li>
    <li value="3">Checks for <code>enableRichtext</code> flag</li>
    <li value="4">Processes image tags in RTE content</li>
    <li value="5">Updates <code>$fieldArray</code> with processed content</li>
</ol>

    <p><strong>Example Usage</strong> (automatic via hook):</p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// When content is saved:</span>
$dataHandler-&gt;process_datamap();
<span class="hljs-comment">// Hook is automatically called for each RTE field</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
        </dd>
</dl>
    </section>
            <section class="section" id="transform-rte">
            <h4>transform_rte()<a class="headerlink" href="#transform-rte" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php method">
    <dt class="sig sig-object php" id="transform-rte">
<span class="sig-name descname"><span class="pre">transform_rte</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">string $value</span></em>, <em class="sig-param"><span class="pre">RteHtmlParser $rteHtmlParser</span></em><span class="sig-paren">)</span>
<em class="sig-returns"><span class="pre">: string</span></em>
        <a class="headerlink" href="#transform-rte" data-id="transform-rte" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:transform_rte`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Transforms RTE content for database storage (legacy method).</p>
<dl class="field-list simple ">
            <dt class="field-odd">param string $value</dt>

        <dd class="field-odd">
            
    <p>HTML content from RTE</p>
        </dd>
            <dt class="field-odd">param RteHtmlParser $rteHtmlParser</dt>

        <dd class="field-odd">
            
    <p>TYPO3 RTE HTML parser</p>
        </dd>
            <dt class="field-odd">returntype</dt>

        <dd class="field-odd">
            
    <p>string</p>
        </dd>
    </dl>
    <p><strong>Transformation Steps:</strong></p>

    
<ol start="1" type="1">
    <li value="1">Splits content by <code>&lt;img&gt;</code> tags</li>
    <li value="2">Converts relative URLs to absolute</li>
    <li value="3">Adds site URL prefix</li>
    <li value="4">Ensures <code>alt</code> attribute exists</li>
</ol>
    
<div class="admonition note" role="alert">
    <p class="admonition-title">Note</p>
            
    <p>This method follows TYPO3&#039;s legacy naming convention (camelCase with underscore).</p>

</div>
                    <dl class="field-list simple">
                <dt class="field-even">Returns</dt>
                <dd class="field-even">
                    
    <p>Transformed HTML string</p>

                </dd>
            </dl>
        </dd>
</dl>
    </section>
    </section>
            <section class="section" id="image-processing-methods">
            <h3>Image Processing Methods<a class="headerlink" href="#image-processing-methods" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="modifyrtefield">
            <h4>modifyRteField()<a class="headerlink" href="#modifyrtefield" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php method">
    <dt class="sig sig-object php" id="modifyrtefield">
<span class="sig-name descname"><span class="pre">modifyRteField</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">string $value</span></em><span class="sig-paren">)</span>
<em class="sig-returns"><span class="pre">: string</span></em>
        <a class="headerlink" href="#modifyrtefield" data-id="modifyrtefield" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:modifyRteField`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Main processing method for RTE field content with images.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param string $value</dt>

        <dd class="field-odd">
            
    <p>RTE HTML content</p>
        </dd>
            <dt class="field-odd">returntype</dt>

        <dd class="field-odd">
            
    <p>string</p>
        </dd>
            <dt class="field-odd">visibility</dt>

        <dd class="field-odd">
            
    <p>private</p>
        </dd>
    </dl>
    <p><strong>Processing Logic:</strong></p>

    <p><strong>1. Image Tag Splitting</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$imgSplit = $rteHtmlParser-&gt;splitTags(<span class="hljs-string">'img'</span>, $value);
<span class="hljs-comment">// Results in: ['text', '&lt;img...&gt;', 'text', '&lt;img...&gt;', ...]</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    <p><strong>2. URL Processing</strong></p>


<ul>
    <li class="dash">Converts absolute URLs to relative</li>
    <li class="dash">Handles site subpath scenarios</li>
    <li class="dash">Processes <code>data-htmlarea-file-uid</code> references</li>
</ul>

    <p><strong>3. FAL Integration</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>($attribArray[<span class="hljs-string">'data-htmlarea-file-uid'</span>])) {
    $originalImageFile = $resourceFactory-&gt;getFileObject($uid);
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    <p><strong>4. Magic Image Processing</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$imageConfiguration = [
    <span class="hljs-string">'width'</span> =&gt; $imageWidth,
    <span class="hljs-string">'height'</span> =&gt; $imageHeight,
];

$magicImage = $originalImageFile-&gt;process(
    ProcessedFile::CONTEXT_IMAGECROPSCALEMASK,
    $imageConfiguration
);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    <p><strong>5. External Image Fetching</strong></p>


<ul>
    <li class="dash">Only in backend context</li>
    <li class="dash">Only if <code>fetchExternalImages</code> is true</li>
    <li class="dash">Downloads and uploads to user&#039;s default folder</li>
</ul>

    <p><strong>6. Local File Detection</strong></p>


<ul>
    <li class="dash">Checks if image is in fileadmin/</li>
    <li class="dash">Attempts to find FAL reference</li>
    <li class="dash">Adds <code>data-htmlarea-file-uid</code> if found</li>
</ul>

    <p><strong>Scenarios Handled:</strong></p>
<div class="table-responsive">
    <table class="table table-bordered align-default">
                            <thead>
            <tr>
                            <th>Scenario</th>
                            <th>Action</th>
                    </tr>
        </thead>
        <tbody>
    <tr>
            <td>Image with <code>data-htmlarea-file-uid</code></td>            <td>Load from FAL, process if dimensions differ</td>    </tr>    <tr>
            <td>External URL (backend)</td>            <td>Fetch, upload, create FAL record</td>    </tr>    <tr>
            <td>External URL (frontend)</td>            <td>Leave as-is</td>    </tr>    <tr>
            <td>Local file without UID</td>            <td>Search FAL, add UID if found</td>    </tr>    <tr>
            <td>Relative URL</td>            <td>Convert to site-relative path</td>    </tr></tbody>    </table>
</div>
                    <dl class="field-list simple">
                <dt class="field-even">Returns</dt>
                <dd class="field-even">
                    
    <p>Processed HTML content</p>

                </dd>
            </dl>
        </dd>
</dl>
    </section>
    </section>
            <section class="section" id="helper-methods">
            <h3>Helper Methods<a class="headerlink" href="#helper-methods" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="getimagewidthfromattributes">
            <h4>getImageWidthFromAttributes()<a class="headerlink" href="#getimagewidthfromattributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php method">
    <dt class="sig sig-object php" id="getimagewidthfromattributes">
<span class="sig-name descname"><span class="pre">getImageWidthFromAttributes</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">array $attributes</span></em><span class="sig-paren">)</span>
<em class="sig-returns"><span class="pre">: int</span></em>
        <a class="headerlink" href="#getimagewidthfromattributes" data-id="getimagewidthfromattributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:getImageWidthFromAttributes`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Extracts width from image attributes, preferring style attribute.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param array $attributes</dt>

        <dd class="field-odd">
            
    <p>Image tag attributes</p>
        </dd>
            <dt class="field-odd">returntype</dt>

        <dd class="field-odd">
            
    <p>int</p>
        </dd>
            <dt class="field-odd">visibility</dt>

        <dd class="field-odd">
            
    <p>private</p>
        </dd>
    </dl>
    <p><strong>Priority:</strong></p>

    
<ol start="1" type="1">
    <li value="1">Style attribute: <code>style=&quot;width: 800px&quot;</code></li>
    <li value="2">Width attribute: <code>width=&quot;800&quot;</code></li>
</ol>

                    <dl class="field-list simple">
                <dt class="field-even">Returns</dt>
                <dd class="field-even">
                    
    <p>Integer width value</p>

                </dd>
            </dl>
        </dd>
</dl>
    </section>
            <section class="section" id="getimageheightfromattributes">
            <h4>getImageHeightFromAttributes()<a class="headerlink" href="#getimageheightfromattributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php method">
    <dt class="sig sig-object php" id="getimageheightfromattributes">
<span class="sig-name descname"><span class="pre">getImageHeightFromAttributes</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">array $attributes</span></em><span class="sig-paren">)</span>
<em class="sig-returns"><span class="pre">: int</span></em>
        <a class="headerlink" href="#getimageheightfromattributes" data-id="getimageheightfromattributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:getImageHeightFromAttributes`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Extracts height from image attributes, preferring style attribute.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param array $attributes</dt>

        <dd class="field-odd">
            
    <p>Image tag attributes</p>
        </dd>
            <dt class="field-odd">returntype</dt>

        <dd class="field-odd">
            
    <p>int</p>
        </dd>
            <dt class="field-odd">visibility</dt>

        <dd class="field-odd">
            
    <p>private</p>
        </dd>
    </dl>
    <p><strong>Priority:</strong></p>

    
<ol start="1" type="1">
    <li value="1">Style attribute: <code>style=&quot;height: 600px&quot;</code></li>
    <li value="2">Height attribute: <code>height=&quot;600&quot;</code></li>
</ol>

                    <dl class="field-list simple">
                <dt class="field-even">Returns</dt>
                <dd class="field-even">
                    
    <p>Integer height value</p>

                </dd>
            </dl>
        </dd>
</dl>
    </section>
            <section class="section" id="extractfromattributevalueorstyle">
            <h4>extractFromAttributeValueOrStyle()<a class="headerlink" href="#extractfromattributevalueorstyle" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php method">
    <dt class="sig sig-object php" id="extractfromattributevalueorstyle">
<span class="sig-name descname"><span class="pre">extractFromAttributeValueOrStyle</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">array $attributes</span></em>, <em class="sig-param"><span class="pre">string $imageAttribute</span></em><span class="sig-paren">)</span>
        <a class="headerlink" href="#extractfromattributevalueorstyle" data-id="extractfromattributevalueorstyle" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:extractFromAttributeValueOrStyle`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Generic extractor for image dimension from attributes or style.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param array $attributes</dt>

        <dd class="field-odd">
            
    <p>Image tag attributes array</p>
        </dd>
            <dt class="field-odd">param string $imageAttribute</dt>

        <dd class="field-odd">
            
    <p>Attribute name (&#039;width&#039; or &#039;height&#039;)</p>
        </dd>
            <dt class="field-odd">visibility</dt>

        <dd class="field-odd">
            
    <p>private</p>
        </dd>
    </dl>
                    <dl class="field-list simple">
                <dt class="field-even">Returns</dt>
                <dd class="field-even">
                    
    <p>Attribute value (mixed type) or null</p>

                </dd>
            </dl>
        </dd>
</dl>
    </section>
            <section class="section" id="matchstyleattribute">
            <h4>matchStyleAttribute()<a class="headerlink" href="#matchstyleattribute" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php method">
    <dt class="sig sig-object php" id="matchstyleattribute">
<span class="sig-name descname"><span class="pre">matchStyleAttribute</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">string styleAttribute</span></em>, <em class="sig-param"><span class="pre">string imageAttribute</span></em><span class="sig-paren">)</span>
        <a class="headerlink" href="#matchstyleattribute" data-id="matchstyleattribute" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:matchStyleAttribute`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Extracts dimension value from CSS style attribute.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param string styleAttribute</dt>

        <dd class="field-odd">
            
    <p>CSS style string</p>
        </dd>
            <dt class="field-odd">param string imageAttribute</dt>

        <dd class="field-odd">
            
    <p>Attribute name to extract</p>
        </dd>
            <dt class="field-odd">returntype</dt>

        <dd class="field-odd">
            
    <p>string|null</p>
        </dd>
            <dt class="field-odd">visibility</dt>

        <dd class="field-odd">
            
    <p>private</p>
        </dd>
    </dl>
    <p><strong>Pattern:</strong> <code>/width[[:space:]]*:[[:space:]]*([0-9]*)[[:space:]]*px/i</code></p>

    <p><strong>Example:</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$style = <span class="hljs-string">"width: 800px; height: 600px;"</span>;
$width = <span class="hljs-keyword">$this</span>-&gt;matchStyleAttribute($style, <span class="hljs-string">'width'</span>);
<span class="hljs-comment">// Returns: "800"</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                    <dl class="field-list simple">
                <dt class="field-even">Returns</dt>
                <dd class="field-even">
                    
    <p>Extracted value or null</p>

                </dd>
            </dl>
        </dd>
</dl>
    </section>
            <section class="section" id="resolvefieldconfigurationandrespectcolumnsoverrides">
            <h4>resolveFieldConfigurationAndRespectColumnsOverrides()<a class="headerlink" href="#resolvefieldconfigurationandrespectcolumnsoverrides" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <dl class="php method">
    <dt class="sig sig-object php" id="resolvefieldconfigurationandrespectcolumnsoverrides">
<span class="sig-name descname"><span class="pre">resolveFieldConfigurationAndRespectColumnsOverrides</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">DataHandler $dataHandler</span></em>, <em class="sig-param"><span class="pre">string $table</span></em>, <em class="sig-param"><span class="pre">string $field</span></em><span class="sig-paren">)</span>
<em class="sig-returns"><span class="pre">: array</span></em>
        <a class="headerlink" href="#resolvefieldconfigurationandrespectcolumnsoverrides" data-id="resolvefieldconfigurationandrespectcolumnsoverrides" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:resolveFieldConfigurationAndRespectColumnsOverrides`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Gets TCA field configuration with type-specific overrides applied.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param DataHandler $dataHandler</dt>

        <dd class="field-odd">
            
    <p>Data handler instance</p>
        </dd>
            <dt class="field-odd">param string $table</dt>

        <dd class="field-odd">
            
    <p>Table name</p>
        </dd>
            <dt class="field-odd">param string $field</dt>

        <dd class="field-odd">
            
    <p>Field name</p>
        </dd>
            <dt class="field-odd">returntype</dt>

        <dd class="field-odd">
            
    <p>array</p>
        </dd>
            <dt class="field-odd">visibility</dt>

        <dd class="field-odd">
            
    <p>private</p>
        </dd>
    </dl>
    <p><strong>Use Case:</strong> Handles cases where field config varies by content type (e.g., different RTE configs for header vs. bodytext).</p>

                    <dl class="field-list simple">
                <dt class="field-even">Returns</dt>
                <dd class="field-even">
                    
    <p>Merged TCA configuration array</p>

                </dd>
            </dl>
        </dd>
</dl>
    </section>
    </section>
    </section>
            <section class="section" id="rteimagesoftreferenceparser" data-rst-anchor="api-rteimagesoftreferenceparser">
            <h2>RteImageSoftReferenceParser<a class="headerlink" href="#rteimagesoftreferenceparser" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <a id="api-rteimagesoftreferenceparser"></a>
            <dl class="field-list simple ">
            <dt class="field-odd">Namespace</dt>

        <dd class="field-odd">
            
    <p><code>Netresearch\RteCKEditorImage\DataHandling\SoftReference</code></p>
        </dd>
            <dt class="field-odd">Purpose</dt>

        <dd class="field-odd">
            
    <p>Parses soft references to FAL images in RTE content for reference tracking</p>
        </dd>
    </dl>
            
    <p><strong>Service Configuration:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-string">Netresearch\RteCKEditorImage\DataHandling\SoftReference\RteImageSoftReferenceParser:</span>
  <span class="hljs-attr">public:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">tags:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">softreference.parser</span>
      <span class="hljs-attr">parserKey:</span> <span class="hljs-string">rtehtmlarea_images</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <section class="section" id="purpose-of-soft-references">
            <h3>Purpose of Soft References<a class="headerlink" href="#purpose-of-soft-references" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Soft references allow TYPO3 to:</p>

            

<ul>
    <li class="dash">Track where files are used</li>
    <li class="dash">Prevent deletion of referenced files</li>
    <li class="dash">Update references when files are moved</li>
    <li class="dash">Maintain referential integrity</li>
</ul>

    </section>
            <section class="section" id="parser-key">
            <h3>Parser Key<a class="headerlink" href="#parser-key" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <dl class="field-list simple ">
            <dt class="field-odd">Key</dt>

        <dd class="field-odd">
            
    <p><code>rtehtmlarea_images</code></p>
        </dd>
    </dl>
            
    <p><strong>TCA Registration</strong> (automatic):</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// RTE fields automatically use soft reference parsing</span>
<span class="hljs-string">'bodytext'</span> =&gt; [
    <span class="hljs-string">'config'</span> =&gt; [
        <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'text'</span>,
        <span class="hljs-string">'enableRichtext'</span> =&gt; <span class="hljs-keyword">true</span>,
        <span class="hljs-comment">// Soft references automatically parsed</span>
    ]
]</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="parsing-logic">
            <h3>Parsing Logic<a class="headerlink" href="#parsing-logic" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>The parser scans RTE content for:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-htmlarea-file-uid</span>=<span class="hljs-string">"123"</span> <span class="hljs-attr">...</span> /&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>And creates soft reference entries:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">[
    <span class="hljs-string">'matchString'</span> =&gt; <span class="hljs-string">'&lt;img data-htmlarea-file-uid="123" ... /&gt;'</span>,
    <span class="hljs-string">'subst'</span> =&gt; [
        <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'file'</span>,
        <span class="hljs-string">'tokenID'</span> =&gt; <span class="hljs-string">'...'</span>,
        <span class="hljs-string">'tokenValue'</span> =&gt; <span class="hljs-string">'file:123'</span>,
        <span class="hljs-string">'recordRef'</span> =&gt; <span class="hljs-string">'sys_file:123'</span>
    ]
]</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="reference-index-integration">
            <h3>Reference Index Integration<a class="headerlink" href="#reference-index-integration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Soft references populate <code>sys_refindex</code> table:</p>

            <div class="table-responsive">
    <table class="table table-bordered align-default">
                            <thead>
            <tr>
                            <th>Field</th>
                            <th>Value</th>
                    </tr>
        </thead>
        <tbody>
    <tr>
            <td>tablename</td>            <td>tt_content</td>    </tr>    <tr>
            <td>recuid</td>            <td>123 (content element ID)</td>    </tr>    <tr>
            <td>field</td>            <td>bodytext</td>    </tr>    <tr>
            <td>ref_table</td>            <td>sys_file</td>    </tr>    <tr>
            <td>ref_uid</td>            <td>456 (file UID)</td>    </tr>    <tr>
            <td>softref_key</td>            <td>rtehtmlarea_images</td>    </tr></tbody>    </table>
</div>
    </section>
    </section>
            <section class="section" id="usage-examples">
            <h2>Usage Examples<a class="headerlink" href="#usage-examples" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="custom-hook-extension">
            <h3>Custom Hook Extension<a class="headerlink" href="#custom-hook-extension" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>If you need to extend image processing:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// EXT:my_ext/Classes/Hooks/CustomImageHook.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">MyVendor</span>\<span class="hljs-title">MyExt</span>\<span class="hljs-title">Hooks</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomImageHook</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processDatamap_postProcessFieldArray</span><span class="hljs-params">(
        string $status,
        string $table,
        string $id,
        array &amp;$fieldArray,
        \TYPO3\CMS\Core\DataHandling\DataHandler &amp;$dataHandler
    )</span>: <span class="hljs-title">void</span> </span>{
        <span class="hljs-comment">// Your custom processing</span>
        <span class="hljs-keyword">foreach</span> ($fieldArray <span class="hljs-keyword">as</span> $field =&gt; &amp;$value) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;isRteField($table, $field)) {
                $value = <span class="hljs-keyword">$this</span>-&gt;customImageProcessing($value);
            }
        }
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Register in ext_localconf.php:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'SC_OPTIONS'</span>][<span class="hljs-string">'t3lib/class.t3lib_tcemain.php'</span>][<span class="hljs-string">'processDatamapClass'</span>][]
    = \MyVendor\MyExt\Hooks\CustomImageHook::class;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="querying-soft-references">
            <h3>Querying Soft References<a class="headerlink" href="#querying-soft-references" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Find all content using a specific file:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">ConnectionPool</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Utility</span>\<span class="hljs-title">GeneralUtility</span>;

$queryBuilder = GeneralUtility::makeInstance(ConnectionPool::class)
    -&gt;getQueryBuilderForTable(<span class="hljs-string">'sys_refindex'</span>);

$references = $queryBuilder
    -&gt;select(<span class="hljs-string">'*'</span>)
    -&gt;from(<span class="hljs-string">'sys_refindex'</span>)
    -&gt;where(
        $queryBuilder-&gt;expr()-&gt;eq(
            <span class="hljs-string">'ref_table'</span>,
            $queryBuilder-&gt;createNamedParameter(<span class="hljs-string">'sys_file'</span>)
        ),
        $queryBuilder-&gt;expr()-&gt;eq(
            <span class="hljs-string">'ref_uid'</span>,
            $queryBuilder-&gt;createNamedParameter(<span class="hljs-number">123</span>, \PDO::PARAM_INT)
        ),
        $queryBuilder-&gt;expr()-&gt;eq(
            <span class="hljs-string">'softref_key'</span>,
            $queryBuilder-&gt;createNamedParameter(<span class="hljs-string">'rtehtmlarea_images'</span>)
        )
    )
    -&gt;executeQuery()
    -&gt;fetchAllAssociative();</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="rebuilding-reference-index">
            <h3>Rebuilding Reference Index<a class="headerlink" href="#rebuilding-reference-index" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>If references become out of sync:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># CLI command</span>
./vendor/bin/typo3 referenceindex:update

<span class="hljs-comment"># Or programmatically</span>
use TYPO3\CMS\Core\Database\ReferenceIndex;

<span class="hljs-variable">$referenceIndex</span> = GeneralUtility::makeInstance(ReferenceIndex::class);
<span class="hljs-variable">$referenceIndex</span>-&gt;updateRefIndexTable(<span class="hljs-string">'tt_content'</span>, 123);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="magic-images-explained">
            <h2>Magic Images Explained<a class="headerlink" href="#magic-images-explained" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="what-are-magic-images">
            <h3>What are Magic Images?<a class="headerlink" href="#what-are-magic-images" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Magic images are TYPO3&#039;s automatic image processing system that creates optimized variants of images based on constraints.</p>

    </section>
            <section class="section" id="how-it-works">
            <h3>How It Works<a class="headerlink" href="#how-it-works" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    
<ol start="1" type="1">
    <li value="1"><strong>Original Image:</strong> Stored in FAL (e.g., 4000x3000px)</li>
    <li value="2"><strong>Constraints:</strong> Specified in RTE (e.g., 800x600px)</li>
    <li value="3"><strong>Processing:</strong> TYPO3 creates processed variant</li>
    <li value="4"><strong>Storage:</strong> <code>fileadmin/_processed_/a/b/csm_image_hash.jpg</code></li>
    <li value="5"><strong>URL:</strong> Points to processed variant, not original</li>
</ol>

    </section>
            <section class="section" id="configuration">
            <h3>Configuration<a class="headerlink" href="#configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs typoscript">RTE.default.buttons.image.options.magic {
    maxWidth = 1920
    maxHeight = 9999
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="processing-context">
            <h3>Processing Context<a class="headerlink" href="#processing-context" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">ProcessedFile::CONTEXT_IMAGECROPSCALEMASK</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Supported operations:</p>

            

<ul>
    <li class="dash"><strong>Crop:</strong> <code>crop</code> parameter</li>
    <li class="dash"><strong>Scale:</strong> <code>width</code>, <code>height</code> parameters</li>
    <li class="dash"><strong>Mask:</strong> Alpha channel operations</li>
</ul>

    </section>
    </section>
            <section class="section" id="debugging">
            <h2>Debugging<a class="headerlink" href="#debugging" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="enable-detailed-logging">
            <h3>Enable Detailed Logging<a class="headerlink" href="#enable-detailed-logging" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// LocalConfiguration.php</span>
$GLOBALS[<span class="hljs-string">'TYPO3_CONF_VARS'</span>][<span class="hljs-string">'LOG'</span>][<span class="hljs-string">'Netresearch'</span>][<span class="hljs-string">'RteCKEditorImage'</span>][<span class="hljs-string">'writerConfiguration'</span>] = [
    \Psr\Log\LogLevel::DEBUG =&gt; [
        \TYPO3\CMS\Core\Log\Writer\FileWriter::class =&gt; [
            <span class="hljs-string">'logFile'</span> =&gt; <span class="hljs-string">'typo3temp/var/log/rte_ckeditor_image.log'</span>
        ]
    ]
];</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="check-processed-files">
            <h3>Check Processed Files<a class="headerlink" href="#check-processed-files" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs bash"><span class="hljs-comment"># List processed images</span>
ls -la fileadmin/_processed_/

<span class="hljs-comment"># Check file processing status</span>
./vendor/bin/typo3 cleanup:processedfiles</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="verify-soft-references">
            <h3>Verify Soft References<a class="headerlink" href="#verify-soft-references" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs sql"><span class="hljs-comment">-- Check soft references for content element</span>
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> sys_refindex
<span class="hljs-keyword">WHERE</span> tablename = <span class="hljs-string">'tt_content'</span>
<span class="hljs-keyword">AND</span> recuid = <span class="hljs-number">123</span>
<span class="hljs-keyword">AND</span> softref_key = <span class="hljs-string">'rtehtmlarea_images'</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#api-controllers">Controllers API</a></li>
    <li class="dash"><a href="#api-eventlisteners">Event Listeners</a></li>
    <li class="dash"><a href="#architecture-overview">Architecture Overview</a></li>
    <li class="dash"><a href="#troubleshooting-index">Troubleshooting</a></li>
</ul>

    </section>
    </section>

        </article>
<article>
            <section class="section" id="event-listeners-api" data-rst-anchor="api-eventlisteners">
            <a id="api-eventlisteners"></a>
            <h1>Event Listeners API<a class="headerlink" href="#event-listeners-api" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Complete API reference for PSR-14 event listeners in the rte_ckeditor_image extension.</p>

            <div class="contents-wrapper">
        <p class="topic-title">Table of Contents</p>
        <ul class="menu-level">
    <li class="toc-item">
    <a href="#rteconfigurationlistener">RteConfigurationListener</a>


</li>
    <li class="toc-item">
    <a href="#psr-14-event-system">PSR-14 Event System</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#what-is-psr-14">What is PSR-14?</a>


</li>
            <li class="toc-item">
    <a href="#why-use-events-over-hooks">Why Use Events Over Hooks?</a>


</li>
            <li class="toc-item">
    <a href="#event-flow">Event Flow</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#rteconfigurationlistener-api">RteConfigurationListener API</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#invoke">__invoke()</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#afterprepareconfigurationforeditorevent">AfterPrepareConfigurationForEditorEvent</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#event-properties">Event Properties</a>


</li>
            <li class="toc-item">
    <a href="#event-lifecycle">Event Lifecycle</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#configuration-injection-pattern">Configuration Injection Pattern</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#what-gets-injected">What Gets Injected?</a>


</li>
            <li class="toc-item">
    <a href="#how-ckeditor-plugin-accesses-it">How CKEditor Plugin Accesses It</a>


</li>
            <li class="toc-item">
    <a href="#why-this-pattern">Why This Pattern?</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#usage-examples">Usage Examples</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#accessing-route-url-in-javascript">Accessing Route URL in JavaScript</a>


</li>
            <li class="toc-item">
    <a href="#extending-configuration-with-custom-listener">Extending Configuration with Custom Listener</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#modifying-existing-configuration">Modifying Existing Configuration</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#override-typo3image-route">Override typo3image Route</a>


</li>
            <li class="toc-item">
    <a href="#add-additional-routes">Add Additional Routes</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#listener-execution-order">Listener Execution Order</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#multiple-listeners-for-same-event">Multiple Listeners for Same Event</a>


</li>
            <li class="toc-item">
    <a href="#example-two-listeners">Example: Two Listeners</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#testing-event-listeners">Testing Event Listeners</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#unit-test-example">Unit Test Example</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#debugging-event-listeners">Debugging Event Listeners</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#check-if-listener-is-registered">Check if Listener is Registered</a>


</li>
            <li class="toc-item">
    <a href="#log-configuration-changes">Log Configuration Changes</a>


</li>
            <li class="toc-item">
    <a href="#verify-configuration-in-browser">Verify Configuration in Browser</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#common-issues">Common Issues</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#issue-routeurl-not-available-in-plugin">Issue: routeUrl Not Available in Plugin</a>


</li>
            <li class="toc-item">
    <a href="#issue-multiple-listeners-conflict">Issue: Multiple Listeners Conflict</a>


</li>
            <li class="toc-item">
    <a href="#issue-csrf-token-errors">Issue: CSRF Token Errors</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#advanced-patterns">Advanced Patterns</a>

        <ul class="section-level-1">
            <li class="toc-item">
    <a href="#conditional-configuration">Conditional Configuration</a>


</li>
            <li class="toc-item">
    <a href="#user-specific-configuration">User-Specific Configuration</a>


</li>
            <li class="toc-item">
    <a href="#environment-specific-configuration">Environment-Specific Configuration</a>


</li>
                    </ul>
</li>
    <li class="toc-item">
    <a href="#related-documentation">Related Documentation</a>


</li>
    </ul>

    <button class="toggle-all-sections btn btn-sm btn-light">Collapse all Sections</button>
</div>
            <section class="section" id="rteconfigurationlistener" data-rst-anchor="api-rteconfigurationlistener">
            <h2>RteConfigurationListener<a class="headerlink" href="#rteconfigurationlistener" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <a id="api-rteconfigurationlistener"></a>
            <dl class="field-list simple ">
            <dt class="field-odd">Namespace</dt>

        <dd class="field-odd">
            
    <p><code>Netresearch\RteCKEditorImage\EventListener</code></p>
        </dd>
            <dt class="field-odd">Purpose</dt>

        <dd class="field-odd">
            
    <p>Injects backend route configuration into CKEditor RTE configuration for image plugin integration</p>
        </dd>
            <dt class="field-odd">Event</dt>

        <dd class="field-odd">
            
    <p><code>TYPO3\CMS\RteCKEditor\Form\Element\Event\AfterPrepareConfigurationForEditorEvent</code></p>
        </dd>
    </dl>
            
    <p><strong>Service Configuration:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-string">Netresearch\RteCKEditorImage\EventListener\RteConfigurationListener:</span>
  <span class="hljs-attr">tags:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">event.listener</span>
      <span class="hljs-attr">identifier:</span> <span class="hljs-string">'rte_configuration_listener'</span>
      <span class="hljs-attr">event:</span> <span class="hljs-string">TYPO3\CMS\RteCKEditor\Form\Element\Event\AfterPrepareConfigurationForEditorEvent</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="psr-14-event-system">
            <h2>PSR-14 Event System<a class="headerlink" href="#psr-14-event-system" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="what-is-psr-14">
            <h3>What is PSR-14?<a class="headerlink" href="#what-is-psr-14" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>PSR-14 is a standardized event dispatcher interface that allows decoupled components to communicate through events:</p>

            

<ul>
    <li class="dash"><strong>Events:</strong> Objects containing data about what happened</li>
    <li class="dash"><strong>Listeners:</strong> Callables that respond to specific events</li>
    <li class="dash"><strong>Dispatcher:</strong> Routes events to registered listeners</li>
</ul>

    </section>
            <section class="section" id="why-use-events-over-hooks">
            <h3>Why Use Events Over Hooks?<a class="headerlink" href="#why-use-events-over-hooks" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="table-responsive">
    <table class="table table-bordered align-default">
                            <thead>
            <tr>
                            <th>Feature</th>
                            <th>PSR-14 Events</th>
                            <th>Traditional Hooks</th>
                    </tr>
        </thead>
        <tbody>
    <tr>
            <td>Standard</td>            <td>Yes (PSR standard)</td>            <td>No (TYPO3-specific)</td>    </tr>    <tr>
            <td>Type Safety</td>            <td>Strong (typed events)</td>            <td>Weak (array parameters)</td>    </tr>    <tr>
            <td>Discoverability</td>            <td>IDE autocomplete</td>            <td>Manual documentation</td>    </tr>    <tr>
            <td>Testing</td>            <td>Easy (mock events)</td>            <td>Difficult (DataHandler)</td>    </tr>    <tr>
            <td>Modern</td>            <td>PHP 7.4+ features</td>            <td>Legacy patterns</td>    </tr></tbody>    </table>
</div>
    </section>
            <section class="section" id="event-flow">
            <h3>Event Flow<a class="headerlink" href="#event-flow" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs plaintext">Backend Form Rendering
    ‚Üì
RteCKEditor prepares configuration
    ‚Üì
AfterPrepareConfigurationForEditorEvent dispatched
    ‚Üì
RteConfigurationListener invoked
    ‚Üì
Configuration injected with route URL
    ‚Üì
CKEditor loads with typo3image plugin config</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="rteconfigurationlistener-api">
            <h2>RteConfigurationListener API<a class="headerlink" href="#rteconfigurationlistener-api" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="invoke">
            <h3>__invoke()<a class="headerlink" href="#invoke" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <dl class="php method">
    <dt class="sig sig-object php" id="invoke">
<span class="sig-name descname"><span class="pre">__invoke</span></span>
<span class="sig-paren">(</span>
<em class="sig-param"><span class="pre">AfterPrepareConfigurationForEditorEvent $event</span></em><span class="sig-paren">)</span>
<em class="sig-returns"><span class="pre">: void</span></em>
        <a class="headerlink" href="#invoke" data-id="invoke" data-bs-toggle="modal" data-bs-target="#linkReferenceModal" data-rstCode=":php:method:`somemanual:__invoke`"  title="Reference this definition"><i class="fa-solid fa-paragraph"></i></a>
    </dt>
    <dd>
        
    <p>Main listener method that modifies RTE configuration before it&#039;s sent to the CKEditor instance.</p>
<dl class="field-list simple ">
            <dt class="field-odd">param AfterPrepareConfigurationForEditorEvent $event</dt>

        <dd class="field-odd">
            
    <p>Event object containing mutable RTE configuration</p>
        </dd>
    </dl>
    <p><strong>Processing Steps:</strong></p>

    <p><strong>1. URI Builder Instantiation:</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$uriBuilder = GeneralUtility::makeInstance(UriBuilder::class);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    <p>Creates TYPO3 URI builder for backend route generation.</p>

    <p><strong>2. Configuration Retrieval:</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$configuration = $event-&gt;getConfiguration();</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    <p>Gets current RTE configuration array from event.</p>

    <p><strong>3. Route URL Injection:</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$configuration[<span class="hljs-string">'style'</span>][<span class="hljs-string">'typo3image'</span>] = [
    <span class="hljs-string">'routeUrl'</span> =&gt; (string) $uriBuilder-&gt;buildUriFromRoute(<span class="hljs-string">'rteckeditorimage_wizard_select_image'</span>),
];</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    <p>Adds backend route URL to configuration under <code>style.typo3image.routeUrl</code>.</p>

    <p><strong>4. Configuration Update:</strong></p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">$event-&gt;setConfiguration($configuration);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    <p>Updates event with modified configuration.</p>

    <p><strong>Result:</strong></p>

    <p>CKEditor receives configuration like:</p>
<div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">{
  <span class="hljs-attr">style</span>: {
    <span class="hljs-attr">typo3image</span>: {
      <span class="hljs-attr">routeUrl</span>: <span class="hljs-string">'/typo3/rte/wizard/selectimage?...'</span>
    }
  }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
        </dd>
</dl>
    </section>
    </section>
            <section class="section" id="afterprepareconfigurationforeditorevent">
            <h2>AfterPrepareConfigurationForEditorEvent<a class="headerlink" href="#afterprepareconfigurationforeditorevent" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="event-properties">
            <h3>Event Properties<a class="headerlink" href="#event-properties" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AfterPrepareConfigurationForEditorEvent</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">array</span> $configuration;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getConfiguration</span><span class="hljs-params">()</span>: <span class="hljs-title">array</span></span>;
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setConfiguration</span><span class="hljs-params">(array $configuration)</span>: <span class="hljs-title">void</span></span>;
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="event-lifecycle">
            <h3>Event Lifecycle<a class="headerlink" href="#event-lifecycle" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <dl class="field-list simple ">
            <dt class="field-odd">Dispatch Point</dt>

        <dd class="field-odd">
            
    <p>After RTE configuration is prepared but before rendering</p>
        </dd>
            <dt class="field-odd">Mutability</dt>

        <dd class="field-odd">
            
    <p>Configuration array can be modified by listeners</p>
        </dd>
            <dt class="field-odd">Priority</dt>

        <dd class="field-odd">
            
    <p>Not configurable (TYPO3 dispatches in registration order)</p>
        </dd>
            <dt class="field-odd">Multiple Listeners</dt>

        <dd class="field-odd">
            
    <p>Supported - each listener receives modified config from previous</p>
        </dd>
    </dl>
    </section>
    </section>
            <section class="section" id="configuration-injection-pattern">
            <h2>Configuration Injection Pattern<a class="headerlink" href="#configuration-injection-pattern" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="what-gets-injected">
            <h3>What Gets Injected?<a class="headerlink" href="#what-gets-injected" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php">[
    <span class="hljs-string">'style'</span> =&gt; [
        <span class="hljs-string">'typo3image'</span> =&gt; [
            <span class="hljs-string">'routeUrl'</span> =&gt; <span class="hljs-string">'/typo3/rte/wizard/selectimage?token=abc123'</span>
        ]
    ]
]</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="how-ckeditor-plugin-accesses-it">
            <h3>How CKEditor Plugin Accesses It<a class="headerlink" href="#how-ckeditor-plugin-accesses-it" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// In Resources/Public/JavaScript/Plugins/typo3image.js</span>
<span class="hljs-keyword">const</span> routeUrl = editor.config.get(<span class="hljs-string">'style'</span>).typo3image.routeUrl;

<span class="hljs-comment">// Used for image selection modal</span>
Modal.advanced({
    <span class="hljs-attr">type</span>: Modal.types.iframe,
    <span class="hljs-attr">content</span>: routeUrl + <span class="hljs-string">'&amp;contentsLanguage=en&amp;bparams=...'</span>
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="why-this-pattern">
            <h3>Why This Pattern?<a class="headerlink" href="#why-this-pattern" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><strong>Dynamic Routes:</strong> Backend routes include CSRF tokens that change per session</li>
    <li class="dash"><strong>Environment Independence:</strong> Works across different TYPO3 installations</li>
    <li class="dash"><strong>Security:</strong> CSRF tokens validated by TYPO3 backend</li>
    <li class="dash"><strong>Flexibility:</strong> Easily extended for additional configuration</li>
</ul>

    </section>
    </section>
            <section class="section" id="usage-examples">
            <h2>Usage Examples<a class="headerlink" href="#usage-examples" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="accessing-route-url-in-javascript">
            <h3>Accessing Route URL in JavaScript<a class="headerlink" href="#accessing-route-url-in-javascript" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// CKEditor plugin initialization</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Typo3Image</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Core</span>.<span class="hljs-title">Plugin</span> </span>{
    init() {
        <span class="hljs-keyword">const</span> editor = <span class="hljs-keyword">this</span>.editor;
        <span class="hljs-keyword">const</span> routeUrl = editor.config.get(<span class="hljs-string">'style'</span>).typo3image.routeUrl;

        <span class="hljs-comment">// Use for image info API calls</span>
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getImageInfo</span>(<span class="hljs-params">fileUid</span>) </span>{
            <span class="hljs-keyword">const</span> url = routeUrl + <span class="hljs-string">'&amp;action=info&amp;fileId='</span> + fileUid;
            <span class="hljs-keyword">return</span> fetch(url).then(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.json());
        }
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="extending-configuration-with-custom-listener">
            <h3>Extending Configuration with Custom Listener<a class="headerlink" href="#extending-configuration-with-custom-listener" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Create your own listener to add custom configuration:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// EXT:my_ext/Classes/EventListener/CustomRteConfigListener.php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">MyVendor</span>\<span class="hljs-title">MyExt</span>\<span class="hljs-title">EventListener</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">RteCKEditor</span>\<span class="hljs-title">Form</span>\<span class="hljs-title">Element</span>\<span class="hljs-title">Event</span>\<span class="hljs-title">AfterPrepareConfigurationForEditorEvent</span>;

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomRteConfigListener</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__invoke</span><span class="hljs-params">(AfterPrepareConfigurationForEditorEvent $event)</span>: <span class="hljs-title">void</span>
    </span>{
        $configuration = $event-&gt;getConfiguration();

        <span class="hljs-comment">// Add custom configuration</span>
        $configuration[<span class="hljs-string">'myext'</span>] = [
            <span class="hljs-string">'apiEndpoint'</span> =&gt; <span class="hljs-string">'/api/my-endpoint'</span>,
            <span class="hljs-string">'options'</span> =&gt; [<span class="hljs-string">'foo'</span> =&gt; <span class="hljs-string">'bar'</span>],
        ];

        $event-&gt;setConfiguration($configuration);
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Register in <code>Configuration/Services.yaml</code>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-string">MyVendor\MyExt\EventListener\CustomRteConfigListener:</span>
  <span class="hljs-attr">tags:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">event.listener</span>
      <span class="hljs-attr">identifier:</span> <span class="hljs-string">'custom_rte_config_listener'</span>
      <span class="hljs-attr">event:</span> <span class="hljs-string">TYPO3\CMS\RteCKEditor\Form\Element\Event\AfterPrepareConfigurationForEditorEvent</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Access in CKEditor plugin:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">const</span> myConfig = editor.config.get(<span class="hljs-string">'myext'</span>);
<span class="hljs-built_in">console</span>.log(myConfig.apiEndpoint);  <span class="hljs-comment">// '/api/my-endpoint'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="modifying-existing-configuration">
            <h2>Modifying Existing Configuration<a class="headerlink" href="#modifying-existing-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="override-typo3image-route">
            <h3>Override typo3image Route<a class="headerlink" href="#override-typo3image-route" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__invoke</span><span class="hljs-params">(AfterPrepareConfigurationForEditorEvent $event)</span>: <span class="hljs-title">void</span>
</span>{
    $configuration = $event-&gt;getConfiguration();

    <span class="hljs-comment">// Use custom route instead</span>
    $configuration[<span class="hljs-string">'style'</span>][<span class="hljs-string">'typo3image'</span>][<span class="hljs-string">'routeUrl'</span>] = <span class="hljs-string">'/custom/image/route'</span>;

    $event-&gt;setConfiguration($configuration);
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="add-additional-routes">
            <h3>Add Additional Routes<a class="headerlink" href="#add-additional-routes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__invoke</span><span class="hljs-params">(AfterPrepareConfigurationForEditorEvent $event)</span>: <span class="hljs-title">void</span>
</span>{
    $uriBuilder = GeneralUtility::makeInstance(UriBuilder::class);
    $configuration = $event-&gt;getConfiguration();

    <span class="hljs-comment">// Keep existing typo3image config</span>
    <span class="hljs-comment">// Add new routes for custom functionality</span>
    $configuration[<span class="hljs-string">'style'</span>][<span class="hljs-string">'typo3image'</span>][<span class="hljs-string">'uploadRoute'</span>] =
        (string) $uriBuilder-&gt;buildUriFromRoute(<span class="hljs-string">'my_custom_upload'</span>);
    $configuration[<span class="hljs-string">'style'</span>][<span class="hljs-string">'typo3image'</span>][<span class="hljs-string">'processRoute'</span>] =
        (string) $uriBuilder-&gt;buildUriFromRoute(<span class="hljs-string">'my_custom_process'</span>);

    $event-&gt;setConfiguration($configuration);
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="listener-execution-order">
            <h2>Listener Execution Order<a class="headerlink" href="#listener-execution-order" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="multiple-listeners-for-same-event">
            <h3>Multiple Listeners for Same Event<a class="headerlink" href="#multiple-listeners-for-same-event" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>When multiple listeners register for <code>AfterPrepareConfigurationForEditorEvent</code>:</p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Registration Order:</strong> Listeners execute in the order they&#039;re registered</li>
    <li value="2"><strong>Configuration Chain:</strong> Each listener receives config modified by previous listeners</li>
    <li value="3"><strong>No Priority:</strong> TYPO3 doesn&#039;t support listener priority for this event</li>
</ol>

    </section>
            <section class="section" id="example-two-listeners">
            <h3>Example: Two Listeners<a class="headerlink" href="#example-two-listeners" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-comment"># services.yaml</span>
<span class="hljs-string">MyVendor\FirstExt\EventListener\FirstListener:</span>
  <span class="hljs-attr">tags:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">event.listener</span>
      <span class="hljs-attr">event:</span> <span class="hljs-string">AfterPrepareConfigurationForEditorEvent</span>

<span class="hljs-string">MyVendor\SecondExt\EventListener\SecondListener:</span>
  <span class="hljs-attr">tags:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">event.listener</span>
      <span class="hljs-attr">event:</span> <span class="hljs-string">AfterPrepareConfigurationForEditorEvent</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Execution:</strong></p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs plaintext">1. FirstListener receives base config
2. FirstListener modifies config (adds 'first' key)
3. SecondListener receives config with 'first' key
4. SecondListener modifies config (adds 'second' key)
5. Final config has both 'first' and 'second' keys</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="testing-event-listeners">
            <h2>Testing Event Listeners<a class="headerlink" href="#testing-event-listeners" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="unit-test-example">
            <h3>Unit Test Example<a class="headerlink" href="#unit-test-example" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">TestingFramework</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Unit</span>\<span class="hljs-title">UnitTestCase</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Uri</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Backend</span>\<span class="hljs-title">Routing</span>\<span class="hljs-title">UriBuilder</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RteConfigurationListenerTest</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">UnitTestCase</span>
</span>{
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@test</span>
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">invokeAddsRouteUrlToConfiguration</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// Arrange</span>
        $event = <span class="hljs-keyword">new</span> AfterPrepareConfigurationForEditorEvent([<span class="hljs-string">'existing'</span> =&gt; <span class="hljs-string">'config'</span>]);
        $listener = <span class="hljs-keyword">new</span> RteConfigurationListener();

        <span class="hljs-comment">// Act</span>
        $listener-&gt;__invoke($event);

        <span class="hljs-comment">// Assert</span>
        $config = $event-&gt;getConfiguration();
        <span class="hljs-keyword">self</span>::assertArrayHasKey(<span class="hljs-string">'style'</span>, $config);
        <span class="hljs-keyword">self</span>::assertArrayHasKey(<span class="hljs-string">'typo3image'</span>, $config[<span class="hljs-string">'style'</span>]);
        <span class="hljs-keyword">self</span>::assertArrayHasKey(<span class="hljs-string">'routeUrl'</span>, $config[<span class="hljs-string">'style'</span>][<span class="hljs-string">'typo3image'</span>]);
        <span class="hljs-keyword">self</span>::assertStringContainsString(<span class="hljs-string">'rteckeditorimage_wizard_select_image'</span>, $config[<span class="hljs-string">'style'</span>][<span class="hljs-string">'typo3image'</span>][<span class="hljs-string">'routeUrl'</span>]);
    }

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@test</span>
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">invokePreservesExistingConfiguration</span><span class="hljs-params">()</span>: <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// Arrange</span>
        $existingConfig = [
            <span class="hljs-string">'toolbar'</span> =&gt; [<span class="hljs-string">'items'</span> =&gt; [<span class="hljs-string">'bold'</span>, <span class="hljs-string">'italic'</span>]],
            <span class="hljs-string">'style'</span> =&gt; [<span class="hljs-string">'definitions'</span> =&gt; []]
        ];
        $event = <span class="hljs-keyword">new</span> AfterPrepareConfigurationForEditorEvent($existingConfig);
        $listener = <span class="hljs-keyword">new</span> RteConfigurationListener();

        <span class="hljs-comment">// Act</span>
        $listener-&gt;__invoke($event);

        <span class="hljs-comment">// Assert</span>
        $config = $event-&gt;getConfiguration();
        <span class="hljs-keyword">self</span>::assertArrayHasKey(<span class="hljs-string">'toolbar'</span>, $config);
        <span class="hljs-keyword">self</span>::assertArrayHasKey(<span class="hljs-string">'style'</span>, $config);
        <span class="hljs-keyword">self</span>::assertArrayHasKey(<span class="hljs-string">'definitions'</span>, $config[<span class="hljs-string">'style'</span>]);
        <span class="hljs-keyword">self</span>::assertArrayHasKey(<span class="hljs-string">'typo3image'</span>, $config[<span class="hljs-string">'style'</span>]);
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="debugging-event-listeners">
            <h2>Debugging Event Listeners<a class="headerlink" href="#debugging-event-listeners" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="check-if-listener-is-registered">
            <h3>Check if Listener is Registered<a class="headerlink" href="#check-if-listener-is-registered" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// Debug in TYPO3 backend</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">EventDispatcher</span>\<span class="hljs-title">ListenerProvider</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Utility</span>\<span class="hljs-title">GeneralUtility</span>;

$listenerProvider = GeneralUtility::makeInstance(ListenerProvider::class);
$listeners = $listenerProvider-&gt;getListenersForEvent(
    <span class="hljs-keyword">new</span> AfterPrepareConfigurationForEditorEvent([])
);

<span class="hljs-comment">// Dump listeners</span>
var_dump($listeners);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="log-configuration-changes">
            <h3>Log Configuration Changes<a class="headerlink" href="#log-configuration-changes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__invoke</span><span class="hljs-params">(AfterPrepareConfigurationForEditorEvent $event)</span>: <span class="hljs-title">void</span>
</span>{
    $configuration = $event-&gt;getConfiguration();

    <span class="hljs-comment">// Log before modification</span>
    GeneralUtility::makeInstance(LogManager::class)
        -&gt;getLogger(<span class="hljs-keyword">__CLASS__</span>)
        -&gt;debug(<span class="hljs-string">'RTE config before'</span>, [<span class="hljs-string">'config'</span> =&gt; $configuration]);

    <span class="hljs-comment">// Modify configuration</span>
    $configuration[<span class="hljs-string">'style'</span>][<span class="hljs-string">'typo3image'</span>] = [
        <span class="hljs-string">'routeUrl'</span> =&gt; <span class="hljs-keyword">$this</span>-&gt;getRouteUrl(),
    ];

    <span class="hljs-comment">// Log after modification</span>
    GeneralUtility::makeInstance(LogManager::class)
        -&gt;getLogger(<span class="hljs-keyword">__CLASS__</span>)
        -&gt;debug(<span class="hljs-string">'RTE config after'</span>, [<span class="hljs-string">'config'</span> =&gt; $configuration]);

    $event-&gt;setConfiguration($configuration);
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="verify-configuration-in-browser">
            <h3>Verify Configuration in Browser<a class="headerlink" href="#verify-configuration-in-browser" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// In browser console after RTE loads</span>
<span class="hljs-built_in">Object</span>.values(CKEDITOR.instances)[<span class="hljs-number">0</span>].config.get(<span class="hljs-string">'style'</span>).typo3image;
<span class="hljs-comment">// Should output: {routeUrl: '/typo3/rte/wizard/selectimage?...'}</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="common-issues">
            <h2>Common Issues<a class="headerlink" href="#common-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-routeurl-not-available-in-plugin">
            <h3>Issue: routeUrl Not Available in Plugin<a class="headerlink" href="#issue-routeurl-not-available-in-plugin" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li class="dash">JavaScript error: &quot;Cannot read property &#039;typo3image&#039; of undefined&quot;</li>
    <li class="dash">Image selection modal doesn&#039;t open</li>
</ul>

            
    <p><strong>Cause:</strong> Event listener not registered or not executing</p>

            
    <p><strong>Solution:</strong></p>

            
    
<ol start="1" type="1">
    <li value="1">Verify service configuration in <code>Configuration/Services.yaml</code></li>
    <li value="2">Clear system cache: <code>./vendor/bin/typo3 cache:flush --group=system</code></li>
    <li value="3">Check event listener is loaded: <code>grep -r &quot;event.listener&quot; var/cache/code/di/</code></li>
</ol>

    </section>
            <section class="section" id="issue-multiple-listeners-conflict">
            <h3>Issue: Multiple Listeners Conflict<a class="headerlink" href="#issue-multiple-listeners-conflict" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li class="dash">Configuration keys overwritten</li>
    <li class="dash">Expected configuration missing</li>
</ul>

            
    <p><strong>Cause:</strong> Later listener overwrites earlier listener&#039;s changes</p>

            
    <p><strong>Solution:</strong> Merge instead of replace:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// ‚ùå Wrong - Overwrites entire 'style' key</span>
$configuration[<span class="hljs-string">'style'</span>] = [<span class="hljs-string">'typo3image'</span> =&gt; [...]];

<span class="hljs-comment">// ‚úÖ Right - Merges with existing</span>
$configuration[<span class="hljs-string">'style'</span>] = array_merge(
    $configuration[<span class="hljs-string">'style'</span>] ?? [],
    [<span class="hljs-string">'typo3image'</span> =&gt; [...]]
);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="issue-csrf-token-errors">
            <h3>Issue: CSRF Token Errors<a class="headerlink" href="#issue-csrf-token-errors" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms:</strong></p>

            

<ul>
    <li class="dash">Backend route returns 403 errors</li>
    <li class="dash">&quot;Invalid CSRF token&quot; in logs</li>
</ul>

            
    <p><strong>Cause:</strong> Route URL built incorrectly or cached</p>

            
    <p><strong>Solution:</strong></p>

            

<ul>
    <li class="dash">Always use <code>UriBuilder-&gt;buildUriFromRoute()</code> (includes token)</li>
    <li class="dash">Never cache route URLs (they expire)</li>
    <li class="dash">Route URL must be generated per request</li>
</ul>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// ‚ùå Wrong - Static URL without token</span>
$configuration[<span class="hljs-string">'style'</span>][<span class="hljs-string">'typo3image'</span>][<span class="hljs-string">'routeUrl'</span>] = <span class="hljs-string">'/typo3/rte/wizard/selectimage'</span>;

<span class="hljs-comment">// ‚úÖ Right - Dynamic URL with token</span>
$configuration[<span class="hljs-string">'style'</span>][<span class="hljs-string">'typo3image'</span>][<span class="hljs-string">'routeUrl'</span>] =
    (string) $uriBuilder-&gt;buildUriFromRoute(<span class="hljs-string">'rteckeditorimage_wizard_select_image'</span>);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="advanced-patterns">
            <h2>Advanced Patterns<a class="headerlink" href="#advanced-patterns" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="conditional-configuration">
            <h3>Conditional Configuration<a class="headerlink" href="#conditional-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__invoke</span><span class="hljs-params">(AfterPrepareConfigurationForEditorEvent $event)</span>: <span class="hljs-title">void</span>
</span>{
    $configuration = $event-&gt;getConfiguration();

    <span class="hljs-comment">// Only add config for specific RTE presets</span>
    <span class="hljs-keyword">if</span> (($configuration[<span class="hljs-string">'preset'</span>] ?? <span class="hljs-string">''</span>) === <span class="hljs-string">'full'</span>) {
        $configuration[<span class="hljs-string">'style'</span>][<span class="hljs-string">'typo3image'</span>] = [
            <span class="hljs-string">'routeUrl'</span> =&gt; <span class="hljs-keyword">$this</span>-&gt;getRouteUrl(),
            <span class="hljs-string">'enableAdvancedFeatures'</span> =&gt; <span class="hljs-keyword">true</span>,
        ];
    }

    $event-&gt;setConfiguration($configuration);
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="user-specific-configuration">
            <h3>User-Specific Configuration<a class="headerlink" href="#user-specific-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Context</span>\<span class="hljs-title">Context</span>;

<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__invoke</span><span class="hljs-params">(AfterPrepareConfigurationForEditorEvent $event)</span>: <span class="hljs-title">void</span>
</span>{
    $context = GeneralUtility::makeInstance(Context::class);
    $configuration = $event-&gt;getConfiguration();

    <span class="hljs-comment">// Add config based on backend user permissions</span>
    <span class="hljs-keyword">if</span> ($context-&gt;getPropertyFromAspect(<span class="hljs-string">'backend.user'</span>, <span class="hljs-string">'isAdmin'</span>)) {
        $configuration[<span class="hljs-string">'style'</span>][<span class="hljs-string">'typo3image'</span>][<span class="hljs-string">'allowExternalImages'</span>] = <span class="hljs-keyword">true</span>;
    }

    $event-&gt;setConfiguration($configuration);
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="environment-specific-configuration">
            <h3>Environment-Specific Configuration<a class="headerlink" href="#environment-specific-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">TYPO3</span>\<span class="hljs-title">CMS</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Environment</span>;

<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__invoke</span><span class="hljs-params">(AfterPrepareConfigurationForEditorEvent $event)</span>: <span class="hljs-title">void</span>
</span>{
    $configuration = $event-&gt;getConfiguration();

    <span class="hljs-comment">// Development-only features</span>
    <span class="hljs-keyword">if</span> (Environment::getContext()-&gt;isDevelopment()) {
        $configuration[<span class="hljs-string">'style'</span>][<span class="hljs-string">'typo3image'</span>][<span class="hljs-string">'debugMode'</span>] = <span class="hljs-keyword">true</span>;
        $configuration[<span class="hljs-string">'style'</span>][<span class="hljs-string">'typo3image'</span>][<span class="hljs-string">'verboseLogging'</span>] = <span class="hljs-keyword">true</span>;
    }

    $event-&gt;setConfiguration($configuration);
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#api-controllers">Controllers API</a></li>
    <li class="dash"><a href="#api-datahandling">Data Handling API</a></li>
    <li class="dash"><a href="#ckeditor-plugin-development">CKEditor Plugin Development</a></li>
    <li class="dash"><a href="#integration">Configuration Guide</a></li>
    <li class="dash"><a href="#architecture-overview">Architecture Overview</a></li>
</ul>

    </section>
    </section>

        </article>
<article>
            <section class="section" id="ckeditor-plugin-development-1" data-rst-anchor="ckeditor-plugin-development">
            <a id="ckeditor-plugin-development"></a>
            <h1>CKEditor Plugin Development<a class="headerlink" href="#ckeditor-plugin-development-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Complete documentation for the CKEditor 5 plugin implementation.</p>

            
    <p>The typo3image plugin is a custom CKEditor 5 plugin that integrates TYPO3&#039;s File Abstraction Layer (FAL) with the rich text editor, enabling seamless image management within the CKEditor interface.</p>

            <section class="section" id="plugin-components">
            <h2>Plugin Components<a class="headerlink" href="#plugin-components" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <div class="row card-group pb-4 row-cols-1 row-cols-md-2 g-4">
    <div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üîå Plugin Development<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Plugin architecture, UI components, commands, and event handling</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#ckeditor-plugin-development-guide" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üìê Model Element<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>The typo3image custom element schema, attributes, and model integration</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#ckeditor-model-element" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>üé® Style Integration<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>Style system integration with StyleUtils and GeneralHtmlSupport (critical for v13.0.0+)</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#ckeditor-style-integration" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div><div class="col">
            <div class="card h-100">
            <div class="card-body">
        <h3>‚ÜîÔ∏è Conversions<a class="headerlink" href="#card" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
        <div class="card-text">
            
    <p>HTML ‚Üî Model conversion patterns for upcast and downcast transformations</p>

        </div>
    </div>
                                <div class="card-footer ">
                            <a href="#ckeditor-conversions" class="btn btn-primary stretched-link">Read more</a>
                                </div>
    </div>
        </div></div>
    </section>
            <section class="section" id="quick-links">
            <h2>Quick Links<a class="headerlink" href="#quick-links" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="getting-started">
            <h3>Getting Started<a class="headerlink" href="#getting-started" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    
<ol start="1" type="1">
    <li value="1">Read <a href="#ckeditor-plugin-development-guide">CKEditor Plugin Development</a> for overall structure</li>
    <li value="2">Understand <a href="#ckeditor-model-element">CKEditor Model Element Reference</a> for data handling</li>
    <li value="3">Study <a href="#ckeditor-conversions">CKEditor Conversion System</a> for HTML transformation</li>
</ol>

    </section>
            <section class="section" id="common-tasks">
            <h3>Common Tasks<a class="headerlink" href="#common-tasks" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><strong>Add custom attributes</strong> ‚Üí See <a href="#ckeditor-model-element">CKEditor Model Element Reference</a></li>
    <li class="dash"><strong>Implement custom styles</strong> ‚Üí See <a href="#ckeditor-style-integration">CKEditor Style Integration</a></li>
    <li class="dash"><strong>Debug conversion issues</strong> ‚Üí See <a href="#ckeditor-conversions">CKEditor Conversion System</a></li>
    <li class="dash"><strong>Extend plugin features</strong> ‚Üí See <a href="#ckeditor-plugin-development-guide">CKEditor Plugin Development</a></li>
</ul>

    </section>
    </section>
            <section class="section" id="critical-information">
            <h2>Critical Information<a class="headerlink" href="#critical-information" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="version-13-0-0-requirements">
            <h3>Version 13.0.0+ Requirements<a class="headerlink" href="#version-13-0-0-requirements" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>The plugin <strong>requires</strong> these CKEditor dependencies:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> requires() {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'StyleUtils'</span>, <span class="hljs-string">'GeneralHtmlSupport'</span>];
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition warning" role="alert">
    <p class="admonition-title">Warning</p>
            
    <p>Missing either dependency will disable style functionality. See <a href="#ckeditor-style-integration">CKEditor Style Integration</a> for details.</p>

</div>
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#api-documentation">API Documentation</a> - PHP backend integration</li>
    <li class="dash"><a href="#integration">Integration &amp; Configuration</a> - Plugin configuration</li>
    <li class="dash"><a href="#examples-common-use-cases">Examples &amp; Use Cases</a> - Practical implementation examples</li>
</ul>

            
    </section>
    </section>

        </article>
<article>
            <section class="section" id="ckeditor-plugin-development" data-rst-anchor="ckeditor-plugin-development-guide">
            <a id="ckeditor-plugin-development-guide"></a>
            <h1>CKEditor Plugin Development<a class="headerlink" href="#ckeditor-plugin-development" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Complete guide to the Typo3Image CKEditor 5 plugin architecture and development patterns.</p>

            <section class="section" id="plugin-overview">
            <h2>Plugin Overview<a class="headerlink" href="#plugin-overview" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p><strong>File</strong>: <code>Resources/Public/JavaScript/Plugins/typo3image.js</code></p>

            
    <p><strong>Plugin Class</strong>: <code>Typo3Image extends Core.Plugin</code></p>

            
    <p><strong>Required Dependencies</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> requires() {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'StyleUtils'</span>, <span class="hljs-string">'GeneralHtmlSupport'</span>];
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition warning" role="alert">
    <p class="admonition-title">Warning</p>
            
    <p>Both <code>StyleUtils</code> and <code>GeneralHtmlSupport</code> are <strong>mandatory</strong>. Missing them causes style functionality to fail.</p>

</div>
    </section>
            <section class="section" id="plugin-structure">
            <h2>Plugin Structure<a class="headerlink" href="#plugin-structure" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Typo3Image</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Core</span>.<span class="hljs-title">Plugin</span> </span>{
    <span class="hljs-keyword">static</span> pluginName = <span class="hljs-string">'Typo3Image'</span>;

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> requires() {
        <span class="hljs-keyword">return</span> [<span class="hljs-string">'StyleUtils'</span>, <span class="hljs-string">'GeneralHtmlSupport'</span>];
    }

    init() {
        <span class="hljs-comment">// Plugin initialization</span>
        <span class="hljs-comment">// - Define schema</span>
        <span class="hljs-comment">// - Register conversions</span>
        <span class="hljs-comment">// - Add UI components</span>
        <span class="hljs-comment">// - Register event listeners</span>
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="custom-model-element-typo3image">
            <h2>Custom Model Element: typo3image<a class="headerlink" href="#custom-model-element-typo3image" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="schema-definition">
            <h3>Schema Definition<a class="headerlink" href="#schema-definition" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.model.schema.register(<span class="hljs-string">'typo3image'</span>, {
    <span class="hljs-attr">inheritAllFrom</span>: <span class="hljs-string">'$blockObject'</span>,
    <span class="hljs-attr">allowIn</span>: [<span class="hljs-string">'$text'</span>, <span class="hljs-string">'$block'</span>],
    <span class="hljs-attr">allowAttributes</span>: [
        <span class="hljs-string">'src'</span>, <span class="hljs-string">'fileUid'</span>, <span class="hljs-string">'fileTable'</span>,
        <span class="hljs-string">'alt'</span>, <span class="hljs-string">'altOverride'</span>, <span class="hljs-string">'title'</span>, <span class="hljs-string">'titleOverride'</span>,
        <span class="hljs-string">'class'</span>, <span class="hljs-string">'enableZoom'</span>, <span class="hljs-string">'width'</span>, <span class="hljs-string">'height'</span>,
        <span class="hljs-string">'htmlA'</span>, <span class="hljs-string">'linkHref'</span>, <span class="hljs-string">'linkTarget'</span>, <span class="hljs-string">'linkTitle'</span>
    ],
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="attribute-descriptions">
            <h3>Attribute Descriptions<a class="headerlink" href="#attribute-descriptions" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="table-responsive">
    <table class="table table-bordered align-default">
                            <thead>
            <tr>
                            <th>Attribute</th>
                            <th>Type</th>
                            <th>Description</th>
                    </tr>
        </thead>
        <tbody>
    <tr>
            <td>src</td>            <td>string</td>            <td>Image source URL</td>    </tr>    <tr>
            <td>fileUid</td>            <td>number</td>            <td>TYPO3 FAL file UID</td>    </tr>    <tr>
            <td>fileTable</td>            <td>string</td>            <td>Database table (default: &#039;sys_file&#039;)</td>    </tr>    <tr>
            <td>alt</td>            <td>string</td>            <td>Alternative text</td>    </tr>    <tr>
            <td>altOverride</td>            <td>boolean</td>            <td>Alt text override flag</td>    </tr>    <tr>
            <td>title</td>            <td>string</td>            <td>Advisory title</td>    </tr>    <tr>
            <td>titleOverride</td>            <td>boolean</td>            <td>Title override flag</td>    </tr>    <tr>
            <td>class</td>            <td>string</td>            <td>CSS classes (space-separated)</td>    </tr>    <tr>
            <td>enableZoom</td>            <td>boolean</td>            <td>Zoom/clickenlarge functionality</td>    </tr>    <tr>
            <td>width</td>            <td>string</td>            <td>Image width</td>    </tr>    <tr>
            <td>height</td>            <td>string</td>            <td>Image height</td>    </tr>    <tr>
            <td>htmlA</td>            <td>string</td>            <td>Link wrapper HTML</td>    </tr>    <tr>
            <td>linkHref</td>            <td>string</td>            <td>Link URL</td>    </tr>    <tr>
            <td>linkTarget</td>            <td>string</td>            <td>Link target</td>    </tr>    <tr>
            <td>linkTitle</td>            <td>string</td>            <td>Link title</td>    </tr></tbody>    </table>
</div>
    </section>
    </section>
            <section class="section" id="conversion-system">
            <h2>Conversion System<a class="headerlink" href="#conversion-system" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="upcast-html-model">
            <h3>Upcast: HTML ‚Üí Model<a class="headerlink" href="#upcast-html-model" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Converts <code>&lt;img&gt;</code> elements with FAL attributes to <code>typo3image</code> model elements:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.conversion.for(<span class="hljs-string">'upcast'</span>).elementToElement({
    <span class="hljs-attr">view</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'img'</span>,
        <span class="hljs-attr">attributes</span>: [<span class="hljs-string">'data-htmlarea-file-uid'</span>, <span class="hljs-string">'src'</span>]
    },
    <span class="hljs-attr">model</span>: <span class="hljs-function">(<span class="hljs-params">viewElement, { writer }</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> writer.createElement(<span class="hljs-string">'typo3image'</span>, {
            <span class="hljs-attr">fileUid</span>: viewElement.getAttribute(<span class="hljs-string">'data-htmlarea-file-uid'</span>),
            <span class="hljs-attr">fileTable</span>: viewElement.getAttribute(<span class="hljs-string">'data-htmlarea-file-table'</span>) || <span class="hljs-string">'sys_file'</span>,
            <span class="hljs-attr">src</span>: viewElement.getAttribute(<span class="hljs-string">'src'</span>),
            <span class="hljs-attr">width</span>: viewElement.getAttribute(<span class="hljs-string">'width'</span>) || <span class="hljs-string">''</span>,
            <span class="hljs-attr">height</span>: viewElement.getAttribute(<span class="hljs-string">'height'</span>) || <span class="hljs-string">''</span>,
            <span class="hljs-attr">class</span>: viewElement.getAttribute(<span class="hljs-string">'class'</span>) || <span class="hljs-string">''</span>,
            <span class="hljs-attr">alt</span>: viewElement.getAttribute(<span class="hljs-string">'alt'</span>) || <span class="hljs-string">''</span>,
            <span class="hljs-attr">altOverride</span>: viewElement.getAttribute(<span class="hljs-string">'data-alt-override'</span>) || <span class="hljs-literal">false</span>,
            <span class="hljs-attr">title</span>: viewElement.getAttribute(<span class="hljs-string">'title'</span>) || <span class="hljs-string">''</span>,
            <span class="hljs-attr">titleOverride</span>: viewElement.getAttribute(<span class="hljs-string">'data-title-override'</span>) || <span class="hljs-literal">false</span>,
            <span class="hljs-attr">enableZoom</span>: viewElement.getAttribute(<span class="hljs-string">'data-htmlarea-zoom'</span>) || <span class="hljs-literal">false</span>,
        });
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="downcast-model-html">
            <h3>Downcast: Model ‚Üí HTML<a class="headerlink" href="#downcast-model-html" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Converts <code>typo3image</code> model elements to <code>&lt;img&gt;</code> HTML:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.conversion.for(<span class="hljs-string">'downcast'</span>).elementToElement({
    <span class="hljs-attr">model</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'typo3image'</span>,
        <span class="hljs-attr">attributes</span>: [<span class="hljs-string">'fileUid'</span>, <span class="hljs-string">'fileTable'</span>, <span class="hljs-string">'src'</span>]
    },
    <span class="hljs-attr">view</span>: <span class="hljs-function">(<span class="hljs-params">modelElement, { writer }</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> attributes = {
            <span class="hljs-string">'src'</span>: modelElement.getAttribute(<span class="hljs-string">'src'</span>),
            <span class="hljs-string">'data-htmlarea-file-uid'</span>: modelElement.getAttribute(<span class="hljs-string">'fileUid'</span>),
            <span class="hljs-string">'data-htmlarea-file-table'</span>: modelElement.getAttribute(<span class="hljs-string">'fileTable'</span>),
            <span class="hljs-string">'width'</span>: modelElement.getAttribute(<span class="hljs-string">'width'</span>),
            <span class="hljs-string">'height'</span>: modelElement.getAttribute(<span class="hljs-string">'height'</span>),
            <span class="hljs-string">'class'</span>: modelElement.getAttribute(<span class="hljs-string">'class'</span>) || <span class="hljs-string">''</span>,
            <span class="hljs-string">'title'</span>: modelElement.getAttribute(<span class="hljs-string">'title'</span>) || <span class="hljs-string">''</span>,
            <span class="hljs-string">'alt'</span>: modelElement.getAttribute(<span class="hljs-string">'alt'</span>) || <span class="hljs-string">''</span>,
        };

        <span class="hljs-keyword">if</span> (modelElement.getAttribute(<span class="hljs-string">'titleOverride'</span>)) {
            attributes[<span class="hljs-string">'data-title-override'</span>] = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (modelElement.getAttribute(<span class="hljs-string">'altOverride'</span>)) {
            attributes[<span class="hljs-string">'data-alt-override'</span>] = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (modelElement.getAttribute(<span class="hljs-string">'enableZoom'</span>)) {
            attributes[<span class="hljs-string">'data-htmlarea-zoom'</span>] = <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">return</span> writer.createEmptyElement(<span class="hljs-string">'img'</span>, attributes);
    },
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="class-attribute-converter">
            <h3>Class Attribute Converter<a class="headerlink" href="#class-attribute-converter" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Makes class changes immediately visible in the editor:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.conversion.for(<span class="hljs-string">'downcast'</span>).attributeToAttribute({
    <span class="hljs-attr">model</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'typo3image'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'class'</span> },
    <span class="hljs-attr">view</span>: <span class="hljs-string">'class'</span>
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="ui-components">
            <h2>UI Components<a class="headerlink" href="#ui-components" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="insert-image-button">
            <h3>Insert Image Button<a class="headerlink" href="#insert-image-button" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Registered in <code>editor.ui.componentFactory</code>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.ui.componentFactory.add(<span class="hljs-string">'insertimage'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> button = <span class="hljs-keyword">new</span> UI.ButtonView();

    button.set({
        <span class="hljs-attr">label</span>: <span class="hljs-string">'Insert image'</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-string">'&lt;svg&gt;...&lt;/svg&gt;'</span>,
        <span class="hljs-attr">tooltip</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">withText</span>: <span class="hljs-literal">false</span>,
    });

    button.on(<span class="hljs-string">'execute'</span>, () =&gt; {
        <span class="hljs-keyword">const</span> selectedElement = editor.model.document.selection.getSelectedElement();

        <span class="hljs-keyword">if</span> (selectedElement &amp;&amp; selectedElement.name === <span class="hljs-string">'typo3image'</span>) {
            <span class="hljs-comment">// Edit existing image</span>
            edit(selectedElement, editor, attributes);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// Insert new image</span>
            selectImage(editor).then(<span class="hljs-function"><span class="hljs-params">selectedImage</span> =&gt;</span> {
                edit(selectedImage, editor, {});
            });
        }
    });

    <span class="hljs-keyword">return</span> button;
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="image-selection-flow">
            <h2>Image Selection Flow<a class="headerlink" href="#image-selection-flow" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="selectimage-function">
            <h3>selectImage() Function<a class="headerlink" href="#selectimage-function" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Opens TYPO3 Modal with file browser:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">selectImage</span>(<span class="hljs-params">editor</span>) </span>{
    <span class="hljs-keyword">const</span> deferred = $.Deferred();
    <span class="hljs-keyword">const</span> bparams = [<span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>];
    <span class="hljs-keyword">const</span> contentUrl = editor.config.get(<span class="hljs-string">'style'</span>).typo3image.routeUrl
        + <span class="hljs-string">'&amp;contentsLanguage=en&amp;editorId=123&amp;bparams='</span> + bparams.join(<span class="hljs-string">'|'</span>);

    <span class="hljs-keyword">const</span> modal = Modal.advanced({
        <span class="hljs-attr">type</span>: Modal.types.iframe,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'Select Image'</span>,
        <span class="hljs-attr">content</span>: contentUrl,
        <span class="hljs-attr">size</span>: Modal.sizes.large,
        <span class="hljs-attr">callback</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">currentModal</span>) </span>{
            $(currentModal).find(<span class="hljs-string">'iframe'</span>).on(<span class="hljs-string">'load'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
                $(<span class="hljs-keyword">this</span>).contents().on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'[data-filelist-element]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
                    <span class="hljs-keyword">if</span> ($(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">'filelist-type'</span>) !== <span class="hljs-string">'file'</span>) {
                        <span class="hljs-keyword">return</span>;
                    }

                    <span class="hljs-keyword">const</span> selectedItem = {
                        <span class="hljs-attr">uid</span>: $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">'filelist-uid'</span>),
                        <span class="hljs-attr">table</span>: <span class="hljs-string">'sys_file'</span>,
                    };
                    currentModal.hideModal();
                    deferred.resolve(selectedItem);
                });
            });
        }
    });

    <span class="hljs-keyword">return</span> deferred;
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="image-properties-dialog">
            <h2>Image Properties Dialog<a class="headerlink" href="#image-properties-dialog" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="getimagedialog-function">
            <h3>getImageDialog() Function<a class="headerlink" href="#getimagedialog-function" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Creates image properties form:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getImageDialog</span>(<span class="hljs-params">editor, img, attributes</span>) </span>{
    <span class="hljs-keyword">const</span> d = {};
    <span class="hljs-keyword">const</span> fields = [
        {
            <span class="hljs-attr">width</span>: { <span class="hljs-attr">label</span>: <span class="hljs-string">'Width'</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">'number'</span> },
            <span class="hljs-attr">height</span>: { <span class="hljs-attr">label</span>: <span class="hljs-string">'Height'</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">'number'</span> }
        },
        {
            <span class="hljs-attr">title</span>: { <span class="hljs-attr">label</span>: <span class="hljs-string">'Advisory Title'</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span> },
            <span class="hljs-attr">alt</span>: { <span class="hljs-attr">label</span>: <span class="hljs-string">'Alternative Text'</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span> }
        }
    ];

    <span class="hljs-comment">// Create form elements</span>
    d.$el = $(<span class="hljs-string">'&lt;div class="rteckeditorimage"&gt;'</span>);

    <span class="hljs-comment">// ... form generation code ...</span>

    <span class="hljs-comment">// Aspect ratio preservation for width/height</span>
    $el.on(<span class="hljs-string">'input'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">const</span> ratio = img.width / img.height;
        <span class="hljs-keyword">const</span> newHeight = <span class="hljs-built_in">Math</span>.ceil(newWidth / ratio);
        $opposite.val(newHeight);
    });

    <span class="hljs-comment">// Override checkboxes for title/alt</span>
    cbox.on(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        $el.prop(<span class="hljs-string">'disabled'</span>, !cbox.prop(<span class="hljs-string">'checked'</span>));
        <span class="hljs-keyword">if</span> (!cbox.prop(<span class="hljs-string">'checked'</span>)) {
            $el.val(<span class="hljs-string">''</span>);  <span class="hljs-comment">// Clear custom value</span>
        }
    });

    d.get = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-comment">// Returns filtered attributes for allowed list</span>
        <span class="hljs-keyword">return</span> filteredAttributes;
    };

    <span class="hljs-keyword">return</span> d;
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="dialog-features">
            <h3>Dialog Features<a class="headerlink" href="#dialog-features" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><strong>Width/Height</strong>: Number inputs with aspect ratio preservation</li>
    <li class="dash"><strong>Title/Alt</strong>: Text inputs with override checkboxes</li>
    <li class="dash"><strong>Zoom</strong>: Checkbox for clickenlarge functionality</li>
    <li class="dash"><strong>CSS Class</strong>: Text input for custom classes</li>
</ul>

    </section>
    </section>
            <section class="section" id="style-system-integration">
            <h2>Style System Integration<a class="headerlink" href="#style-system-integration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>Critical for CKEditor style drop-down functionality.</p>

            <section class="section" id="event-listener-isstyleenabledforblock">
            <h3>Event Listener: isStyleEnabledForBlock<a class="headerlink" href="#event-listener-isstyleenabledforblock" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Enables img styles when typo3image is selected:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">this</span>.listenTo(styleUtils, <span class="hljs-string">'isStyleEnabledForBlock'</span>, (event, [style, element]) =&gt; {
    <span class="hljs-keyword">if</span> (style.element === <span class="hljs-string">'img'</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> editor.model.document.selection.getFirstRange().getItems()) {
            <span class="hljs-keyword">if</span> (item.name === <span class="hljs-string">'typo3image'</span>) {
                event.return = <span class="hljs-literal">true</span>;
            }
        }
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="event-listener-isstyleactiveforblock">
            <h3>Event Listener: isStyleActiveForBlock<a class="headerlink" href="#event-listener-isstyleactiveforblock" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Checks if style is currently applied:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">this</span>.listenTo(styleUtils, <span class="hljs-string">'isStyleActiveForBlock'</span>, (event, [style, element]) =&gt; {
    <span class="hljs-keyword">if</span> (style.element === <span class="hljs-string">'img'</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> editor.model.document.selection.getFirstRange().getItems()) {
            <span class="hljs-keyword">if</span> (item.name === <span class="hljs-string">'typo3image'</span>) {
                <span class="hljs-keyword">const</span> classAttribute = item.getAttribute(<span class="hljs-string">'class'</span>);
                <span class="hljs-keyword">if</span> (classAttribute &amp;&amp; <span class="hljs-keyword">typeof</span> classAttribute === <span class="hljs-string">'string'</span>) {
                    <span class="hljs-keyword">const</span> classlist = classAttribute.split(<span class="hljs-string">' '</span>);
                    <span class="hljs-keyword">if</span> (style.classes.filter(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> !classlist.includes(value)).length === <span class="hljs-number">0</span>) {
                        event.return = <span class="hljs-literal">true</span>;
                    }
                }
            }
        }
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="event-listener-getaffectedblocks">
            <h3>Event Listener: getAffectedBlocks<a class="headerlink" href="#event-listener-getaffectedblocks" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Returns correct model element for style operations:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">this</span>.listenTo(styleUtils, <span class="hljs-string">'getAffectedBlocks'</span>, (event, [style, element]) =&gt; {
    <span class="hljs-keyword">if</span> (style.element === <span class="hljs-string">'img'</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> editor.model.document.selection.getFirstRange().getItems()) {
            <span class="hljs-keyword">if</span> (item.name === <span class="hljs-string">'typo3image'</span>) {
                event.return = [item];
                <span class="hljs-keyword">break</span>;
            }
        }
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="generalhtmlsupport-integration">
            <h2>GeneralHtmlSupport Integration<a class="headerlink" href="#generalhtmlsupport-integration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>Manages class attribute updates from style system.</p>

            <section class="section" id="addmodelhtmlclass-listener">
            <h3>addModelHtmlClass Listener<a class="headerlink" href="#addmodelhtmlclass-listener" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">const</span> ghs = editor.plugins.get(<span class="hljs-string">'GeneralHtmlSupport'</span>);
ghs.decorate(<span class="hljs-string">'addModelHtmlClass'</span>);

<span class="hljs-keyword">this</span>.listenTo(ghs, <span class="hljs-string">'addModelHtmlClass'</span>, (event, [viewElement, className, selectable]) =&gt; {
    <span class="hljs-keyword">if</span> (selectable &amp;&amp; selectable.name === <span class="hljs-string">'typo3image'</span>) {
        editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
            writer.setAttribute(<span class="hljs-string">'class'</span>, className.join(<span class="hljs-string">' '</span>), selectable);
        });
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="removemodelhtmlclass-listener">
            <h3>removeModelHtmlClass Listener<a class="headerlink" href="#removemodelhtmlclass-listener" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">ghs.decorate(<span class="hljs-string">'removeModelHtmlClass'</span>);

<span class="hljs-keyword">this</span>.listenTo(ghs, <span class="hljs-string">'removeModelHtmlClass'</span>, (event, [viewElement, className, selectable]) =&gt; {
    <span class="hljs-keyword">if</span> (selectable &amp;&amp; selectable.name === <span class="hljs-string">'typo3image'</span>) {
        editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
            writer.removeAttribute(<span class="hljs-string">'class'</span>, selectable);
        });
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="event-observers">
            <h2>Event Observers<a class="headerlink" href="#event-observers" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="doubleclickobserver">
            <h3>DoubleClickObserver<a class="headerlink" href="#doubleclickobserver" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Custom observer for double-click detection:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DoubleClickObserver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Engine</span>.<span class="hljs-title">DomEventObserver</span> </span>{
    <span class="hljs-keyword">constructor</span>(view) {
        <span class="hljs-keyword">super</span>(view);
        <span class="hljs-keyword">this</span>.domEventType = <span class="hljs-string">'dblclick'</span>;
    }

    onDomEvent(domEvent) {
        <span class="hljs-keyword">this</span>.fire(domEvent.type, domEvent);
    }
}

<span class="hljs-comment">// Register observer</span>
editor.editing.view.addObserver(DoubleClickObserver);

<span class="hljs-comment">// Listen for double-click</span>
editor.listenTo(editor.editing.view.document, <span class="hljs-string">'dblclick'</span>, (event, data) =&gt; {
    <span class="hljs-keyword">const</span> modelElement = editor.editing.mapper.toModelElement(data.target);
    <span class="hljs-keyword">if</span> (modelElement &amp;&amp; modelElement.name === <span class="hljs-string">'typo3image'</span>) {
        <span class="hljs-comment">// Open edit dialog</span>
        edit({...}, editor, {...});
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="click-handler">
            <h3>Click Handler<a class="headerlink" href="#click-handler" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Single-click selects image:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.listenTo(editor.editing.view.document, <span class="hljs-string">'click'</span>, (event, data) =&gt; {
    <span class="hljs-keyword">const</span> modelElement = editor.editing.mapper.toModelElement(data.target);
    <span class="hljs-keyword">if</span> (modelElement &amp;&amp; modelElement.name === <span class="hljs-string">'typo3image'</span>) {
        editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
            writer.setSelection(modelElement, <span class="hljs-string">'on'</span>);
        });
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="backend-api-integration">
            <h2>Backend API Integration<a class="headerlink" href="#backend-api-integration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="getimageinfo-function">
            <h3>getImageInfo() Function<a class="headerlink" href="#getimageinfo-function" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>Fetches image data from backend:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getImageInfo</span>(<span class="hljs-params">editor, table, uid, params</span>) </span>{
    <span class="hljs-keyword">let</span> url = editor.config.get(<span class="hljs-string">'style'</span>).typo3image.routeUrl
        + <span class="hljs-string">'&amp;action=info&amp;fileId='</span> + <span class="hljs-built_in">encodeURIComponent</span>(uid)
        + <span class="hljs-string">'&amp;table='</span> + <span class="hljs-built_in">encodeURIComponent</span>(table)
        + <span class="hljs-string">'&amp;contentsLanguage=en&amp;editorId=123'</span>;

    <span class="hljs-keyword">if</span> (params.width) {
        url += <span class="hljs-string">'&amp;P[width]='</span> + params.width;
    }
    <span class="hljs-keyword">if</span> (params.height) {
        url += <span class="hljs-string">'&amp;P[height]='</span> + params.height;
    }

    <span class="hljs-keyword">return</span> $.getJSON(url);
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="plugin-configuration">
            <h2>Plugin Configuration<a class="headerlink" href="#plugin-configuration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="registration-configuration-rte-plugin-yaml">
            <h3>Registration (Configuration/RTE/Plugin.yaml)<a class="headerlink" href="#registration-configuration-rte-plugin-yaml" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">importModules:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'@netresearch/rte-ckeditor-image/Plugins/typo3image.js'</span>

  <span class="hljs-attr">externalPlugins:</span>
    <span class="hljs-attr">typo3image:</span> <span class="hljs-string">{</span> <span class="hljs-attr">route:</span> <span class="hljs-string">"rteckeditorimage_wizard_select_image"</span> <span class="hljs-string">}</span>

<span class="hljs-attr">processing:</span>
  <span class="hljs-attr">allowTagsOutside:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">img</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="javascript-module-registration">
            <h3>JavaScript Module Registration<a class="headerlink" href="#javascript-module-registration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs php"><span class="hljs-comment">// Configuration/JavaScriptModules.php</span>
<span class="hljs-keyword">return</span> [
    <span class="hljs-string">'dependencies'</span> =&gt; [<span class="hljs-string">'rte_ckeditor'</span>],
    <span class="hljs-string">'tags'</span> =&gt; [<span class="hljs-string">'backend.form'</span>],
    <span class="hljs-string">'imports'</span> =&gt; [
        <span class="hljs-string">'@netresearch/rte-ckeditor-image/'</span> =&gt; <span class="hljs-string">'EXT:rte_ckeditor_image/Resources/Public/JavaScript/'</span>,
    ],
];</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="development-tips">
            <h2>Development Tips<a class="headerlink" href="#development-tips" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    
<ol start="1" type="1">
    <li value="1"><strong>Always test style integration</strong> - Verify StyleUtils and GeneralHtmlSupport work correctly</li>
    <li value="2"><strong>Use browser console</strong> - Monitor CKEditor model changes with <code>editor.model.document.on(&#039;change&#039;)</code></li>
    <li value="3"><strong>Check conversions</strong> - Verify upcast/downcast produce expected results</li>
    <li value="4"><strong>Test attribute updates</strong> - Ensure class and other attributes update correctly</li>
    <li value="5"><strong>Debug with breakpoints</strong> - Use browser DevTools to step through plugin code</li>
</ol>

    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#ckeditor-model-element">CKEditor Model Element Reference</a></li>
    <li class="dash"><a href="#ckeditor-style-integration">CKEditor Style Integration</a></li>
    <li class="dash"><a href="#ckeditor-conversions">CKEditor Conversion System</a></li>
    <li class="dash"><a href="#architecture-overview">System Architecture</a></li>
</ul>

    </section>
    </section>

        </article>
<article>
            <section class="section" id="ckeditor-model-element-reference" data-rst-anchor="ckeditor-model-element">
            <a id="ckeditor-model-element"></a>
            <h1>CKEditor Model Element Reference<a class="headerlink" href="#ckeditor-model-element-reference" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Complete reference for the <code>typo3image</code> custom model element in CKEditor 5.</p>

            <section class="section" id="overview">
            <h2>Overview<a class="headerlink" href="#overview" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            
    <p>The <code>typo3image</code> is a custom model element that represents TYPO3 FAL-integrated images in the CKEditor document model. It extends CKEditor&#039;s base <code>$blockObject</code> and includes TYPO3-specific attributes for FAL integration, image processing, and metadata management.</p>

            
    <p><strong>File</strong>: <code>Resources/Public/JavaScript/Plugins/typo3image.js</code></p>

    </section>
            <section class="section" id="model-vs-view-architecture">
            <h2>Model vs View Architecture<a class="headerlink" href="#model-vs-view-architecture" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="understanding-ckeditor-5-architecture">
            <h3>Understanding CKEditor 5 Architecture<a class="headerlink" href="#understanding-ckeditor-5-architecture" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>CKEditor 5 uses a Model-View-Controller (MVC) architecture:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Model Layer (Data)                              ‚îÇ
‚îÇ - Abstract representation of document           ‚îÇ
‚îÇ - Business logic and validation                 ‚îÇ
‚îÇ - typo3image element with attributes            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
                   ‚îÇ Conversions
                   ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ View Layer (DOM)                                ‚îÇ
‚îÇ - Visual representation in editor               ‚îÇ
‚îÇ - &lt;img&gt; elements with HTML attributes           ‚îÇ
‚îÇ - User sees and interacts with                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
                   ‚îÇ Rendering
                   ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ DOM (Browser)                                   ‚îÇ
‚îÇ - Actual HTML in contenteditable               ‚îÇ
‚îÇ - &lt;img src=&quot;...&quot; data-htmlarea-file-uid=&quot;123&quot;/&gt; ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="why-separate-model-and-view">
            <h3>Why Separate Model and View?<a class="headerlink" href="#why-separate-model-and-view" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            

<ul>
    <li class="dash"><strong>Data Integrity</strong>: Model maintains clean data structure regardless of DOM quirks</li>
    <li class="dash"><strong>Cross-Platform</strong>: Same model can render differently on different platforms</li>
    <li class="dash"><strong>Collaboration</strong>: Multiple users can edit same model with conflict resolution</li>
    <li class="dash"><strong>Undo/Redo</strong>: Model changes tracked for history management</li>
    <li class="dash"><strong>Validation</strong>: Business rules enforced in model layer</li>
</ul>

    </section>
    </section>
            <section class="section" id="schema-definition">
            <h2>Schema Definition<a class="headerlink" href="#schema-definition" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.model.schema.register(<span class="hljs-string">'typo3image'</span>, {
    <span class="hljs-attr">inheritAllFrom</span>: <span class="hljs-string">'$blockObject'</span>,
    <span class="hljs-attr">allowIn</span>: [<span class="hljs-string">'$text'</span>, <span class="hljs-string">'$block'</span>],
    <span class="hljs-attr">allowAttributes</span>: [
        <span class="hljs-string">'src'</span>, <span class="hljs-string">'fileUid'</span>, <span class="hljs-string">'fileTable'</span>,
        <span class="hljs-string">'alt'</span>, <span class="hljs-string">'altOverride'</span>, <span class="hljs-string">'title'</span>, <span class="hljs-string">'titleOverride'</span>,
        <span class="hljs-string">'class'</span>, <span class="hljs-string">'enableZoom'</span>, <span class="hljs-string">'width'</span>, <span class="hljs-string">'height'</span>,
        <span class="hljs-string">'htmlA'</span>, <span class="hljs-string">'linkHref'</span>, <span class="hljs-string">'linkTarget'</span>, <span class="hljs-string">'linkTitle'</span>
    ],
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            <section class="section" id="schema-properties-explained">
            <h3>Schema Properties Explained<a class="headerlink" href="#schema-properties-explained" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="inheritallfrom-blockobject">
            <h4>inheritAllFrom: &#039;$blockObject&#039;<a class="headerlink" href="#inheritallfrom-blockobject" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            
    <p>Inherits all properties from CKEditor&#039;s base <code>$blockObject</code>:</p>

            

<ul>
    <li class="dash"><strong>Selectable</strong>: Can be selected like any block element</li>
    <li class="dash"><strong>Object</strong>: Treated as atomic unit (not text content)</li>
    <li class="dash"><strong>Focusable</strong>: Can receive focus for editing</li>
    <li class="dash"><strong>Non-Breaking</strong>: Cannot be split by Enter key</li>
</ul>

    </section>
            <section class="section" id="allowin-text-block">
            <h4>allowIn: [&#039;$text&#039;, &#039;$block&#039;]<a class="headerlink" href="#allowin-text-block" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            
    <p>Defines where <code>typo3image</code> can exist:</p>

            

<ul>
    <li class="dash"><strong>$text</strong>: Inside text content (inline-like behavior)</li>
    <li class="dash"><strong>$block</strong>: Inside block elements (paragraphs, divs, etc.)</li>
</ul>

            
    <p><strong>Result</strong>: Images can be placed in any text flow or block context.</p>

    </section>
            <section class="section" id="allowattributes">
            <h4>allowAttributes: [...]<a class="headerlink" href="#allowattributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            
    <p>Lists all valid attributes for the model element. Attributes not listed are stripped.</p>

    </section>
    </section>
    </section>
            <section class="section" id="attribute-reference">
            <h2>Attribute Reference<a class="headerlink" href="#attribute-reference" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="core-attributes">
            <h3>Core Attributes<a class="headerlink" href="#core-attributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="src">
            <h4>src<a class="headerlink" href="#src" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">String</span>
<span class="hljs-attr">required</span>: <span class="hljs-literal">true</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Image source URL (absolute or relative)</p>

            
    <p><strong>Examples</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">src: <span class="hljs-string">'/fileadmin/user_upload/image.jpg'</span>
<span class="hljs-attr">src</span>: <span class="hljs-string">'/fileadmin/_processed_/a/b/csm_image_123.jpg'</span>
<span class="hljs-attr">src</span>: <span class="hljs-string">'https://example.com/external.jpg'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Usage</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">const</span> src = modelElement.getAttribute(<span class="hljs-string">'src'</span>);
writer.setAttribute(<span class="hljs-string">'src'</span>, <span class="hljs-string">'/new/path.jpg'</span>, modelElement);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="fileuid">
            <h4>fileUid<a class="headerlink" href="#fileuid" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">Number</span>
<span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> (<span class="hljs-keyword">for</span> TYPO3 FAL integration)</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: TYPO3 File Abstraction Layer file UID</p>

            
    <p><strong>Range</strong>: Positive integer matching <code>sys_file.uid</code></p>

            
    <p><strong>Example</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">fileUid: <span class="hljs-number">123</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Usage</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">const</span> fileUid = modelElement.getAttribute(<span class="hljs-string">'fileUid'</span>);
writer.setAttribute(<span class="hljs-string">'fileUid'</span>, <span class="hljs-number">456</span>, modelElement);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Backend Integration</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Fetch file info from backend</span>
<span class="hljs-keyword">const</span> fileUid = modelElement.getAttribute(<span class="hljs-string">'fileUid'</span>);
<span class="hljs-keyword">const</span> fileInfo = <span class="hljs-keyword">await</span> fetch(
    routeUrl + <span class="hljs-string">'&amp;action=info&amp;fileId='</span> + fileUid
).then(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.json());</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="filetable">
            <h4>fileTable<a class="headerlink" href="#filetable" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">String</span>
<span class="hljs-attr">default</span>: <span class="hljs-string">'sys_file'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Database table name for file reference</p>

            
    <p><strong>Valid Values</strong>: <code>&#039;sys_file&#039;</code> (default), <code>&#039;sys_file_reference&#039;</code> (rarely used)</p>

            
    <p><strong>Example</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">fileTable: <span class="hljs-string">'sys_file'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Usage</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">const</span> table = modelElement.getAttribute(<span class="hljs-string">'fileTable'</span>) || <span class="hljs-string">'sys_file'</span>;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="metadata-attributes">
            <h3>Metadata Attributes<a class="headerlink" href="#metadata-attributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="alt">
            <h4>alt<a class="headerlink" href="#alt" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">String</span>
<span class="hljs-attr">default</span>: <span class="hljs-string">''</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Alternative text for accessibility (WCAG compliance)</p>

            
    <p><strong>Recommendations</strong>:</p>

            

<ul>
    <li class="dash">Describe image content concisely</li>
    <li class="dash">Required for accessibility</li>
    <li class="dash">Max &nbsp;125 characters for optimal screen reader experience</li>
</ul>

            
    <p><strong>Example</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">alt: <span class="hljs-string">'Product photo showing red widget from front angle'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Usage</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">writer.setAttribute(<span class="hljs-string">'alt'</span>, <span class="hljs-string">'New alt text'</span>, modelElement);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="altoverride">
            <h4>altOverride<a class="headerlink" href="#altoverride" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">Boolean</span>
<span class="hljs-attr">default</span>: <span class="hljs-literal">false</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Flag indicating alt text was manually overridden by user</p>

            
    <p><strong>Behavior</strong>:</p>

            

<ul>
    <li class="dash"><code>false</code>: Use alt from FAL file metadata</li>
    <li class="dash"><code>true</code>: Use custom alt text from <code>alt</code> attribute</li>
</ul>

            
    <p><strong>Example</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">altOverride: <span class="hljs-literal">true</span>  <span class="hljs-comment">// Custom alt text takes precedence</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Usage Pattern</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// In image dialog</span>
<span class="hljs-keyword">if</span> (customAltCheckbox.checked) {
    writer.setAttribute(<span class="hljs-string">'alt'</span>, customAltValue, modelElement);
    writer.setAttribute(<span class="hljs-string">'altOverride'</span>, <span class="hljs-literal">true</span>, modelElement);
} <span class="hljs-keyword">else</span> {
    writer.removeAttribute(<span class="hljs-string">'alt'</span>, modelElement);
    writer.removeAttribute(<span class="hljs-string">'altOverride'</span>, modelElement);
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="title">
            <h4>title<a class="headerlink" href="#title" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">String</span>
<span class="hljs-attr">default</span>: <span class="hljs-string">''</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Advisory title (tooltip text shown on hover)</p>

            
    <p><strong>Recommendations</strong>:</p>

            

<ul>
    <li class="dash">Optional supplementary information</li>
    <li class="dash">Not a replacement for alt text</li>
    <li class="dash">Brief contextual information</li>
</ul>

            
    <p><strong>Example</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">title: <span class="hljs-string">'Click to view full size'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Usage</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">writer.setAttribute(<span class="hljs-string">'title'</span>, <span class="hljs-string">'Tooltip text'</span>, modelElement);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="titleoverride">
            <h4>titleOverride<a class="headerlink" href="#titleoverride" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">Boolean</span>
<span class="hljs-attr">default</span>: <span class="hljs-literal">false</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Flag indicating title was manually overridden by user</p>

            
    <p><strong>Behavior</strong>:</p>

            

<ul>
    <li class="dash"><code>false</code>: Use title from FAL file metadata</li>
    <li class="dash"><code>true</code>: Use custom title from <code>title</code> attribute</li>
</ul>

            
    <p><strong>Example</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">titleOverride: <span class="hljs-literal">true</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="visual-attributes">
            <h3>Visual Attributes<a class="headerlink" href="#visual-attributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="class">
            <h4>class<a class="headerlink" href="#class" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">String</span>
<span class="hljs-attr">default</span>: <span class="hljs-string">''</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Space-separated CSS class names for styling</p>

            
    <p><strong>Style Integration</strong>: Modified by CKEditor style system via <code>GeneralHtmlSupport</code></p>

            
    <p><strong>Examples</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span>: '<span class="hljs-title">float</span>-<span class="hljs-title">left</span> <span class="hljs-title">img</span>-<span class="hljs-title">responsive</span>'
<span class="hljs-title">class</span>: '<span class="hljs-title">img</span>-<span class="hljs-title">thumbnail</span> <span class="hljs-title">d</span>-<span class="hljs-title">block</span> <span class="hljs-title">mx</span>-<span class="hljs-title">auto</span>'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Usage</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Manual class setting</span>
writer.setAttribute(<span class="hljs-string">'class'</span>, <span class="hljs-string">'my-class another-class'</span>, modelElement);

<span class="hljs-comment">// Style system automatically updates this attribute</span>
<span class="hljs-comment">// when user selects a style from dropdown</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Style System Integration</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// CKEditor style definition</span>
{
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Image Left'</span>,
    <span class="hljs-attr">element</span>: <span class="hljs-string">'img'</span>,
    <span class="hljs-attr">classes</span>: [<span class="hljs-string">'float-left'</span>, <span class="hljs-string">'mr-3'</span>]
}

<span class="hljs-comment">// Results in:</span>
<span class="hljs-attr">class</span>: <span class="hljs-string">'float-left mr-3'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="width">
            <h4>width<a class="headerlink" href="#width" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">String</span> (pixels without unit)
<span class="hljs-attr">default</span>: <span class="hljs-string">''</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Image display width in pixels</p>

            
    <p><strong>Format</strong>: Numeric string without &#039;px&#039; unit</p>

            
    <p><strong>Examples</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">width: <span class="hljs-string">'800'</span>
<span class="hljs-attr">width</span>: <span class="hljs-string">'1200'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Usage</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">writer.setAttribute(<span class="hljs-string">'width'</span>, <span class="hljs-string">'800'</span>, modelElement);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Aspect Ratio Preservation</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// When width changes, height should be recalculated</span>
<span class="hljs-keyword">const</span> newWidth = <span class="hljs-number">800</span>;
<span class="hljs-keyword">const</span> originalWidth = img.width;
<span class="hljs-keyword">const</span> originalHeight = img.height;
<span class="hljs-keyword">const</span> ratio = originalWidth / originalHeight;
<span class="hljs-keyword">const</span> newHeight = <span class="hljs-built_in">Math</span>.ceil(newWidth / ratio);

writer.setAttribute(<span class="hljs-string">'width'</span>, <span class="hljs-built_in">String</span>(newWidth), modelElement);
writer.setAttribute(<span class="hljs-string">'height'</span>, <span class="hljs-built_in">String</span>(newHeight), modelElement);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="height">
            <h4>height<a class="headerlink" href="#height" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">String</span> (pixels without unit)
<span class="hljs-attr">default</span>: <span class="hljs-string">''</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Image display height in pixels</p>

            
    <p><strong>Format</strong>: Numeric string without &#039;px&#039; unit</p>

            
    <p><strong>Examples</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">height: <span class="hljs-string">'600'</span>
<span class="hljs-attr">height</span>: <span class="hljs-string">'900'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Usage</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">writer.setAttribute(<span class="hljs-string">'height'</span>, <span class="hljs-string">'600'</span>, modelElement);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="enablezoom">
            <h4>enableZoom<a class="headerlink" href="#enablezoom" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">Boolean</span>
<span class="hljs-attr">default</span>: <span class="hljs-literal">false</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Enable zoom/click-to-enlarge functionality (TYPO3-specific feature)</p>

            
    <p><strong>Behavior</strong>:</p>

            

<ul>
    <li class="dash"><code>true</code>: Image becomes clickable, opens larger version</li>
    <li class="dash"><code>false</code>: Image is static, no click interaction</li>
</ul>

            
    <p><strong>Example</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">enableZoom: <span class="hljs-literal">true</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Frontend Rendering</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-comment">&lt;!-- When enableZoom is true --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"large-image.jpg"</span> <span class="hljs-attr">data-lightbox</span>=<span class="hljs-string">"gallery"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"thumb.jpg"</span> <span class="hljs-attr">data-htmlarea-zoom</span>=<span class="hljs-string">"true"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Usage</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">writer.setAttribute(<span class="hljs-string">'enableZoom'</span>, <span class="hljs-literal">true</span>, modelElement);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="link-attributes">
            <h3>Link Attributes<a class="headerlink" href="#link-attributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="htmla">
            <h4>htmlA<a class="headerlink" href="#htmla" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">String</span>
<span class="hljs-attr">default</span>: <span class="hljs-literal">undefined</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Complete HTML anchor tag wrapping the image (legacy attribute)</p>

            
    <p><strong>Format</strong>: Full HTML string</p>

            
    <p><strong>Example</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">htmlA: <span class="hljs-string">'&lt;a href="/page/123" target="_blank" title="Link title"&gt;...&lt;/a&gt;'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition note" role="alert">
    <p class="admonition-title">Note</p>
            
    <p>This is a legacy attribute. Modern approach uses separate link attributes.</p>

</div>
    </section>
            <section class="section" id="linkhref">
            <h4>linkHref<a class="headerlink" href="#linkhref" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">String</span>
<span class="hljs-attr">default</span>: <span class="hljs-literal">undefined</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Link URL when image is wrapped in anchor tag</p>

            
    <p><strong>Examples</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">linkHref: <span class="hljs-string">'/page/detail'</span>
<span class="hljs-attr">linkHref</span>: <span class="hljs-string">'https://example.com'</span>
<span class="hljs-attr">linkHref</span>: <span class="hljs-string">'mailto:info@example.com'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Usage</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">writer.setAttribute(<span class="hljs-string">'linkHref'</span>, <span class="hljs-string">'/page/123'</span>, modelElement);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="linktarget">
            <h4>linkTarget<a class="headerlink" href="#linktarget" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">String</span>
<span class="hljs-attr">default</span>: <span class="hljs-literal">undefined</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Link target attribute (_blank, _self, _parent, _top)</p>

            
    <p><strong>Valid Values</strong>: <code>&#039;_blank&#039;</code>, <code>&#039;_self&#039;</code>, <code>&#039;_parent&#039;</code>, <code>&#039;_top&#039;</code>, or named frame</p>

            
    <p><strong>Example</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">linkTarget: <span class="hljs-string">'_blank'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Usage</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">writer.setAttribute(<span class="hljs-string">'linkTarget'</span>, <span class="hljs-string">'_blank'</span>, modelElement);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="linktitle">
            <h4>linkTitle<a class="headerlink" href="#linktitle" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">type: <span class="hljs-built_in">String</span>
<span class="hljs-attr">default</span>: <span class="hljs-literal">undefined</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Title attribute for the wrapping anchor tag</p>

            
    <p><strong>Example</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">linkTitle: <span class="hljs-string">'Click to view product details'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Usage</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">writer.setAttribute(<span class="hljs-string">'linkTitle'</span>, <span class="hljs-string">'Link description'</span>, modelElement);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
    </section>
            <section class="section" id="working-with-model-elements">
            <h2>Working with Model Elements<a class="headerlink" href="#working-with-model-elements" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="creating-model-elements">
            <h3>Creating Model Elements<a class="headerlink" href="#creating-model-elements" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> typo3image = writer.createElement(<span class="hljs-string">'typo3image'</span>, {
        <span class="hljs-attr">src</span>: <span class="hljs-string">'/fileadmin/image.jpg'</span>,
        <span class="hljs-attr">fileUid</span>: <span class="hljs-number">123</span>,
        <span class="hljs-attr">fileTable</span>: <span class="hljs-string">'sys_file'</span>,
        <span class="hljs-attr">width</span>: <span class="hljs-string">'800'</span>,
        <span class="hljs-attr">height</span>: <span class="hljs-string">'600'</span>,
        <span class="hljs-attr">alt</span>: <span class="hljs-string">'Description'</span>,
        <span class="hljs-attr">class</span>: <span class="hljs-string">'img-fluid'</span>
    });

    <span class="hljs-comment">// Insert at current selection</span>
    <span class="hljs-keyword">const</span> insertPosition = editor.model.document.selection.getFirstPosition();
    editor.model.insertContent(typo3image, insertPosition);
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="updating-attributes">
            <h3>Updating Attributes<a class="headerlink" href="#updating-attributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> selectedElement = editor.model.document.selection.getSelectedElement();

    <span class="hljs-keyword">if</span> (selectedElement &amp;&amp; selectedElement.name === <span class="hljs-string">'typo3image'</span>) {
        <span class="hljs-comment">// Update single attribute</span>
        writer.setAttribute(<span class="hljs-string">'width'</span>, <span class="hljs-string">'1200'</span>, selectedElement);

        <span class="hljs-comment">// Update multiple attributes</span>
        writer.setAttributes({
            <span class="hljs-attr">width</span>: <span class="hljs-string">'1200'</span>,
            <span class="hljs-attr">height</span>: <span class="hljs-string">'800'</span>,
            <span class="hljs-attr">class</span>: <span class="hljs-string">'img-large'</span>
        }, selectedElement);
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="reading-attributes">
            <h3>Reading Attributes<a class="headerlink" href="#reading-attributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">const</span> selectedElement = editor.model.document.selection.getSelectedElement();

<span class="hljs-keyword">if</span> (selectedElement &amp;&amp; selectedElement.name === <span class="hljs-string">'typo3image'</span>) {
    <span class="hljs-comment">// Read single attribute</span>
    <span class="hljs-keyword">const</span> src = selectedElement.getAttribute(<span class="hljs-string">'src'</span>);
    <span class="hljs-keyword">const</span> fileUid = selectedElement.getAttribute(<span class="hljs-string">'fileUid'</span>);

    <span class="hljs-comment">// Read with default fallback</span>
    <span class="hljs-keyword">const</span> alt = selectedElement.getAttribute(<span class="hljs-string">'alt'</span>) || <span class="hljs-string">''</span>;
    <span class="hljs-keyword">const</span> width = selectedElement.getAttribute(<span class="hljs-string">'width'</span>) || <span class="hljs-string">'0'</span>;

    <span class="hljs-comment">// Check if attribute exists</span>
    <span class="hljs-keyword">const</span> hasClass = selectedElement.hasAttribute(<span class="hljs-string">'class'</span>);

    <span class="hljs-comment">// Get all attributes</span>
    <span class="hljs-keyword">const</span> allAttrs = <span class="hljs-built_in">Array</span>.from(selectedElement.getAttributes());
    <span class="hljs-built_in">console</span>.log(allAttrs);  <span class="hljs-comment">// [['src', '...'], ['fileUid', 123], ...]</span>
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="removing-attributes">
            <h3>Removing Attributes<a class="headerlink" href="#removing-attributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> selectedElement = editor.model.document.selection.getSelectedElement();

    <span class="hljs-keyword">if</span> (selectedElement &amp;&amp; selectedElement.name === <span class="hljs-string">'typo3image'</span>) {
        <span class="hljs-comment">// Remove single attribute</span>
        writer.removeAttribute(<span class="hljs-string">'class'</span>, selectedElement);

        <span class="hljs-comment">// Remove multiple attributes</span>
        writer.removeAttribute(<span class="hljs-string">'title'</span>, selectedElement);
        writer.removeAttribute(<span class="hljs-string">'titleOverride'</span>, selectedElement);
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="model-selection">
            <h2>Model Selection<a class="headerlink" href="#model-selection" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="selecting-elements">
            <h3>Selecting Elements<a class="headerlink" href="#selecting-elements" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Select element programmatically</span>
editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> element = <span class="hljs-comment">/* get element reference */</span>;
    writer.setSelection(element, <span class="hljs-string">'on'</span>);  <span class="hljs-comment">// 'on' = select element itself</span>
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="getting-selected-element">
            <h3>Getting Selected Element<a class="headerlink" href="#getting-selected-element" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">const</span> selection = editor.model.document.selection;
<span class="hljs-keyword">const</span> selectedElement = selection.getSelectedElement();

<span class="hljs-keyword">if</span> (selectedElement &amp;&amp; selectedElement.name === <span class="hljs-string">'typo3image'</span>) {
    <span class="hljs-comment">// Image is selected</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Selected typo3image element'</span>);
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="iterating-selection-range">
            <h3>Iterating Selection Range<a class="headerlink" href="#iterating-selection-range" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">const</span> selection = editor.model.document.selection;
<span class="hljs-keyword">const</span> range = selection.getFirstRange();

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> range.getItems()) {
    <span class="hljs-keyword">if</span> (item.is(<span class="hljs-string">'element'</span>, <span class="hljs-string">'typo3image'</span>)) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Found typo3image:'</span>, item.getAttribute(<span class="hljs-string">'src'</span>));
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="model-traversal">
            <h2>Model Traversal<a class="headerlink" href="#model-traversal" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="finding-parent-elements">
            <h3>Finding Parent Elements<a class="headerlink" href="#finding-parent-elements" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">const</span> element = <span class="hljs-comment">/* typo3image element */</span>;
<span class="hljs-keyword">const</span> parent = element.parent;

<span class="hljs-built_in">console</span>.log(parent.name);  <span class="hljs-comment">// e.g., 'paragraph', '$root'</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="finding-previous-next-siblings">
            <h3>Finding Previous/Next Siblings<a class="headerlink" href="#finding-previous-next-siblings" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">const</span> element = <span class="hljs-comment">/* typo3image element */</span>;
<span class="hljs-keyword">const</span> previousSibling = element.previousSibling;
<span class="hljs-keyword">const</span> nextSibling = element.nextSibling;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="walking-the-model-tree">
            <h3>Walking the Model Tree<a class="headerlink" href="#walking-the-model-tree" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findAllImages</span>(<span class="hljs-params">root</span>) </span>{
    <span class="hljs-keyword">const</span> images = [];
    <span class="hljs-keyword">const</span> walker = editor.model.createRangeIn(root).getWalker();

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> {item} <span class="hljs-keyword">of</span> walker) {
        <span class="hljs-keyword">if</span> (item.is(<span class="hljs-string">'element'</span>, <span class="hljs-string">'typo3image'</span>)) {
            images.push(item);
        }
    }

    <span class="hljs-keyword">return</span> images;
}

<span class="hljs-comment">// Find all images in document</span>
<span class="hljs-keyword">const</span> allImages = findAllImages(editor.model.document.getRoot());</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="attribute-validation">
            <h2>Attribute Validation<a class="headerlink" href="#attribute-validation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="allowed-attributes-enforcement">
            <h3>Allowed Attributes Enforcement<a class="headerlink" href="#allowed-attributes-enforcement" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>CKEditor automatically strips attributes not in <code>allowAttributes</code> list:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// This attribute will be stripped</span>
writer.setAttribute(<span class="hljs-string">'invalidAttr'</span>, <span class="hljs-string">'value'</span>, modelElement);

<span class="hljs-comment">// Only these attributes are preserved</span>
allowAttributes: [
    <span class="hljs-string">'src'</span>, <span class="hljs-string">'fileUid'</span>, <span class="hljs-string">'fileTable'</span>,
    <span class="hljs-string">'alt'</span>, <span class="hljs-string">'altOverride'</span>, <span class="hljs-string">'title'</span>, <span class="hljs-string">'titleOverride'</span>,
    <span class="hljs-string">'class'</span>, <span class="hljs-string">'enableZoom'</span>, <span class="hljs-string">'width'</span>, <span class="hljs-string">'height'</span>,
    <span class="hljs-string">'htmlA'</span>, <span class="hljs-string">'linkHref'</span>, <span class="hljs-string">'linkTarget'</span>, <span class="hljs-string">'linkTitle'</span>
]</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="custom-validation">
            <h3>Custom Validation<a class="headerlink" href="#custom-validation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.model.schema.addAttributeCheck(<span class="hljs-function">(<span class="hljs-params">context, attributeName</span>) =&gt;</span> {
    <span class="hljs-comment">// Only allow width/height with valid numeric values</span>
    <span class="hljs-keyword">if</span> (attributeName === <span class="hljs-string">'width'</span> || attributeName === <span class="hljs-string">'height'</span>) {
        <span class="hljs-keyword">if</span> (context.endsWith(<span class="hljs-string">'typo3image'</span>)) {
            <span class="hljs-keyword">const</span> value = context.getAttribute(attributeName);
            <span class="hljs-keyword">return</span> <span class="hljs-regexp">/^\d+$/</span>.test(value);  <span class="hljs-comment">// Must be numeric</span>
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="model-change-listeners">
            <h2>Model Change Listeners<a class="headerlink" href="#model-change-listeners" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="listening-to-attribute-changes">
            <h3>Listening to Attribute Changes<a class="headerlink" href="#listening-to-attribute-changes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.model.document.on(<span class="hljs-string">'change:data'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> changes = editor.model.document.differ.getChanges();

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> change <span class="hljs-keyword">of</span> changes) {
        <span class="hljs-keyword">if</span> (change.type === <span class="hljs-string">'attribute'</span> &amp;&amp; change.attributeKey === <span class="hljs-string">'class'</span>) {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Class changed:'</span>, {
                <span class="hljs-attr">element</span>: change.range.start.parent.name,
                <span class="hljs-attr">oldValue</span>: change.attributeOldValue,
                <span class="hljs-attr">newValue</span>: change.attributeNewValue
            });
        }
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="listening-to-element-insertion">
            <h3>Listening to Element Insertion<a class="headerlink" href="#listening-to-element-insertion" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.model.document.on(<span class="hljs-string">'change:data'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> changes = editor.model.document.differ.getChanges();

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> change <span class="hljs-keyword">of</span> changes) {
        <span class="hljs-keyword">if</span> (change.type === <span class="hljs-string">'insert'</span> &amp;&amp; change.name === <span class="hljs-string">'typo3image'</span>) {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'typo3image inserted:'</span>, change.position.path);
        }
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="advanced-patterns">
            <h2>Advanced Patterns<a class="headerlink" href="#advanced-patterns" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="cloning-elements">
            <h3>Cloning Elements<a class="headerlink" href="#cloning-elements" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> original = <span class="hljs-comment">/* get typo3image element */</span>;

    <span class="hljs-comment">// Clone with all attributes</span>
    <span class="hljs-keyword">const</span> clone = writer.cloneElement(original);

    <span class="hljs-comment">// Insert clone</span>
    <span class="hljs-keyword">const</span> insertPosition = <span class="hljs-comment">/* target position */</span>;
    writer.insert(clone, insertPosition);
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="batch-attribute-updates">
            <h3>Batch Attribute Updates<a class="headerlink" href="#batch-attribute-updates" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> images = <span class="hljs-comment">/* array of typo3image elements */</span>;

    <span class="hljs-comment">// Apply same class to all images</span>
    images.forEach(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> currentClass = img.getAttribute(<span class="hljs-string">'class'</span>) || <span class="hljs-string">''</span>;
        <span class="hljs-keyword">const</span> newClass = currentClass + <span class="hljs-string">' batch-processed'</span>;
        writer.setAttribute(<span class="hljs-string">'class'</span>, newClass.trim(), img);
    });
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="conditional-attribute-setting">
            <h3>Conditional Attribute Setting<a class="headerlink" href="#conditional-attribute-setting" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> element = <span class="hljs-comment">/* typo3image element */</span>;

    <span class="hljs-comment">// Only set width if not already set</span>
    <span class="hljs-keyword">if</span> (!element.hasAttribute(<span class="hljs-string">'width'</span>)) {
        writer.setAttribute(<span class="hljs-string">'width'</span>, <span class="hljs-string">'800'</span>, element);
    }

    <span class="hljs-comment">// Update alt only if override is enabled</span>
    <span class="hljs-keyword">if</span> (element.getAttribute(<span class="hljs-string">'altOverride'</span>)) {
        writer.setAttribute(<span class="hljs-string">'alt'</span>, customAltText, element);
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="debugging-model-elements">
            <h2>Debugging Model Elements<a class="headerlink" href="#debugging-model-elements" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="inspect-element-in-console">
            <h3>Inspect Element in Console<a class="headerlink" href="#inspect-element-in-console" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Get selected element</span>
<span class="hljs-keyword">const</span> element = editor.model.document.selection.getSelectedElement();

<span class="hljs-comment">// Log all attributes</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Element:'</span>, element.name);
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Attributes:'</span>, <span class="hljs-built_in">Array</span>.from(element.getAttributes()));

<span class="hljs-comment">// Log specific attributes</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'src:'</span>, element.getAttribute(<span class="hljs-string">'src'</span>));
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'fileUid:'</span>, element.getAttribute(<span class="hljs-string">'fileUid'</span>));
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'class:'</span>, element.getAttribute(<span class="hljs-string">'class'</span>));</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="monitor-model-changes">
            <h3>Monitor Model Changes<a class="headerlink" href="#monitor-model-changes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.model.document.on(<span class="hljs-string">'change'</span>, (evt, batch) =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Model changed, batch type:'</span>, batch.type);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Is undoable:'</span>, batch.isUndoable);

    <span class="hljs-keyword">const</span> changes = editor.model.document.differ.getChanges();
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Changes:'</span>, changes);
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="visualize-model-structure">
            <h3>Visualize Model Structure<a class="headerlink" href="#visualize-model-structure" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logModelTree</span>(<span class="hljs-params">element, indent = <span class="hljs-number">0</span></span>) </span>{
    <span class="hljs-keyword">const</span> prefix = <span class="hljs-string">' '</span>.repeat(indent);
    <span class="hljs-keyword">if</span> (element.is(<span class="hljs-string">'$text'</span>)) {
        <span class="hljs-built_in">console</span>.log(prefix + <span class="hljs-string">'TEXT:'</span>, element.data);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">console</span>.log(prefix + element.name);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> child <span class="hljs-keyword">of</span> element.getChildren()) {
            logModelTree(child, indent + <span class="hljs-number">2</span>);
        }
    }
}

<span class="hljs-comment">// Log entire document structure</span>
logModelTree(editor.model.document.getRoot());</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#ckeditor-plugin-development-guide">CKEditor Plugin Development</a></li>
    <li class="dash"><a href="#ckeditor-style-integration">CKEditor Style Integration</a></li>
    <li class="dash"><a href="#ckeditor-conversions">CKEditor Conversion System</a></li>
    <li class="dash"><a href="#architecture-overview">System Architecture</a></li>
</ul>

    </section>
    </section>

        </article>
<article>
            <section class="section" id="ckeditor-style-integration-1" data-rst-anchor="ckeditor-style-integration">
            <a id="ckeditor-style-integration"></a>
            <h1>CKEditor Style Integration<a class="headerlink" href="#ckeditor-style-integration-1" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Complete guide to integrating the typo3image plugin with CKEditor&#039;s style system (StyleUtils and GeneralHtmlSupport).</p>

            <section class="section" id="overview">
            <h2>Overview<a class="headerlink" href="#overview" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <div class="versionchange versionadded">
    <p class="versionmodified">
        <span class="versionicon"><i class="fa-solid fa-rocket"></i></span>
        New in version 13.0.0</p>
    <article>
        
    <p>Integration with <code>GeneralHtmlSupport</code> is now required for style functionality.
Previous versions only required <code>StyleUtils</code>, which caused the style dropdown
to be disabled for images.</p>

    </article>
</div>
            
    <p><strong>Critical Dependencies</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> requires() {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'StyleUtils'</span>, <span class="hljs-string">'GeneralHtmlSupport'</span>];
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
                
<div class="admonition warning" role="alert">
    <p class="admonition-title">Warning</p>
            
    <p>Both <code>StyleUtils</code> and <code>GeneralHtmlSupport</code> are <strong>mandatory</strong> for style functionality. Missing either plugin causes style drop-down to be disabled for images.</p>

</div>
    </section>
            <section class="section" id="the-style-system-problem">
            <h2>The Style System Problem<a class="headerlink" href="#the-style-system-problem" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="before-v13-0-0-broken">
            <h3>Before v13.0.0 (Broken)<a class="headerlink" href="#before-v13-0-0-broken" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Missing GeneralHtmlSupport dependency</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> requires() {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'StyleUtils'</span>];  <span class="hljs-comment">// Incomplete!</span>
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Issue</strong>: Style drop-down disabled when image selected</p>

            
    <p><strong>Symptoms</strong>:</p>

            

<ul>
    <li class="dash">Styles grayed out when typo3image selected</li>
    <li class="dash">Class changes not applied to images</li>
    <li class="dash">No visual feedback when applying styles</li>
</ul>

    </section>
            <section class="section" id="after-v13-0-0-fixed">
            <h3>After v13.0.0 (Fixed)<a class="headerlink" href="#after-v13-0-0-fixed" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Both dependencies required</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> requires() {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'StyleUtils'</span>, <span class="hljs-string">'GeneralHtmlSupport'</span>];
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Result</strong>: Full style system integration working correctly</p>

    </section>
    </section>
            <section class="section" id="style-system-architecture">
            <h2>Style System Architecture<a class="headerlink" href="#style-system-architecture" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="three-layer-integration">
            <h3>Three-Layer Integration<a class="headerlink" href="#three-layer-integration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ StyleUtils Plugin                       ‚îÇ
‚îÇ - Manages style definitions             ‚îÇ
‚îÇ - Provides event system                 ‚îÇ
‚îÇ - Determines style applicability        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚îÇ Events
            ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Typo3Image Plugin                       ‚îÇ
‚îÇ - Listens to StyleUtils events         ‚îÇ
‚îÇ - Reports typo3image availability       ‚îÇ
‚îÇ - Returns correct model elements        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚îÇ Operations
            ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ GeneralHtmlSupport Plugin               ‚îÇ
‚îÇ - Applies class changes to model        ‚îÇ
‚îÇ - Manages HTML attribute manipulation   ‚îÇ
‚îÇ - Ensures class sync with view          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="styleutils-event-system">
            <h2>StyleUtils Event System<a class="headerlink" href="#styleutils-event-system" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="event-isstyleenabledforblock">
            <h3>Event: isStyleEnabledForBlock<a class="headerlink" href="#event-isstyleenabledforblock" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Purpose</strong>: Determines if a style can be applied to the selected element</p>

            
    <p><strong>When Fired</strong>: User selects element, style drop-down needs update</p>

            
    <p><strong>Default Behavior</strong>: Only enable styles for elements matching style definition</p>

            
    <p><strong>typo3image Override</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">this</span>.listenTo(styleUtils, <span class="hljs-string">'isStyleEnabledForBlock'</span>, (event, [style, element]) =&gt; {
    <span class="hljs-keyword">if</span> (style.element === <span class="hljs-string">'img'</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> editor.model.document.selection.getFirstRange().getItems()) {
            <span class="hljs-keyword">if</span> (item.name === <span class="hljs-string">'typo3image'</span>) {
                event.return = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// Enable img styles for typo3image</span>
            }
        }
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Logic Breakdown</strong>:</p>

            
    
<ol start="1">
    <li value="1">
    <p><strong>Check Style Element</strong>: <code>if (style.element === &#039;img&#039;)</code></p>


<ul>
    <li class="dash">Only process styles defined for <code>&lt;img&gt;</code> elements</li>
    <li class="dash">Ignore styles for other elements (p, h1, etc.)</li>
</ul>
</li>
    <li value="2">
    <p><strong>Iterate Selection</strong>: <code>for (const item of ...getFirstRange().getItems())</code></p>


<ul>
    <li class="dash">Get all items in current selection range</li>
    <li class="dash">Check if any item is a typo3image</li>
</ul>
</li>
    <li value="3">
    <p><strong>Enable Style</strong>: <code>event.return = true</code></p>


<ul>
    <li class="dash">Tell StyleUtils that img styles ARE applicable to typo3image</li>
    <li class="dash">Without this, style drop-down would be disabled</li>
</ul>
</li>
</ol>

                
<div class="admonition note" role="alert">
    <p class="admonition-title">Note</p>
            
    <p>CKEditor doesn&#039;t natively know that <code>typo3image</code> (model element) corresponds to <code>&lt;img&gt;</code> (view element). This listener bridges that gap.</p>

</div>
    </section>
            <section class="section" id="event-isstyleactiveforblock">
            <h3>Event: isStyleActiveForBlock<a class="headerlink" href="#event-isstyleactiveforblock" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Purpose</strong>: Checks if a style is currently active (applied) on selected element</p>

            
    <p><strong>When Fired</strong>: User selects element, style drop-down shows active styles</p>

            
    <p><strong>Default Behavior</strong>: Check if element has required classes</p>

            
    <p><strong>typo3image Implementation</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">this</span>.listenTo(styleUtils, <span class="hljs-string">'isStyleActiveForBlock'</span>, (event, [style, element]) =&gt; {
    <span class="hljs-keyword">if</span> (style.element === <span class="hljs-string">'img'</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> editor.model.document.selection.getFirstRange().getItems()) {
            <span class="hljs-keyword">if</span> (item.name === <span class="hljs-string">'typo3image'</span>) {
                <span class="hljs-keyword">const</span> classAttribute = item.getAttribute(<span class="hljs-string">'class'</span>);
                <span class="hljs-keyword">if</span> (classAttribute &amp;&amp; <span class="hljs-keyword">typeof</span> classAttribute === <span class="hljs-string">'string'</span>) {
                    <span class="hljs-keyword">const</span> classlist = classAttribute.split(<span class="hljs-string">' '</span>);
                    <span class="hljs-comment">// Check if ALL style classes are present</span>
                    <span class="hljs-keyword">if</span> (style.classes.filter(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> !classlist.includes(value)).length === <span class="hljs-number">0</span>) {
                        event.return = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// Style is active</span>
                    }
                }
            }
        }
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Logic Breakdown</strong>:</p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Check Style Element</strong>: Only process img styles</li>
    <li value="2"><strong>Find typo3image</strong>: Iterate selection to find typo3image element</li>
    <li value="3">
    <p><strong>Get Classes</strong>: <code>const classAttribute = item.getAttribute(&#039;class&#039;)</code></p>


<ul>
    <li class="dash">Read current class attribute from model element</li>
    <li class="dash">Returns space-separated string (e.g., &quot;float-left img-responsive&quot;)</li>
</ul>
</li>
    <li value="4">
    <p><strong>Parse Classes</strong>: <code>const classlist = classAttribute.split(&#039; &#039;)</code></p>


<ul>
    <li class="dash">Convert string to array: <code>[&quot;float-left&quot;, &quot;img-responsive&quot;]</code></li>
</ul>
</li>
    <li value="5">
    <p><strong>Check Match</strong>: <code>style.classes.filter(value =&gt; !classlist.includes(value)).length === 0</code></p>


<ul>
    <li class="dash">Check if ALL style classes are present in element</li>
    <li class="dash">Example: Style has <code>[&#039;float-left&#039;, &#039;mr-3&#039;]</code>, check both exist</li>
    <li class="dash">If any missing, style is NOT active</li>
</ul>
</li>
</ol>

            
    <p><strong>Example</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Style definition</span>
{
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Image Left'</span>,
    <span class="hljs-attr">element</span>: <span class="hljs-string">'img'</span>,
    <span class="hljs-attr">classes</span>: [<span class="hljs-string">'float-left'</span>, <span class="hljs-string">'mr-3'</span>]
}

<span class="hljs-comment">// Element class attribute</span>
<span class="hljs-attr">class</span>: <span class="hljs-string">'float-left mr-3 img-responsive'</span>

<span class="hljs-comment">// Check: Are 'float-left' AND 'mr-3' both present?</span>
[<span class="hljs-string">'float-left'</span>, <span class="hljs-string">'mr-3'</span>].filter(<span class="hljs-function"><span class="hljs-params">cls</span> =&gt;</span>
    ![<span class="hljs-string">'float-left'</span>, <span class="hljs-string">'mr-3'</span>, <span class="hljs-string">'img-responsive'</span>].includes(cls)
).length === <span class="hljs-number">0</span>  <span class="hljs-comment">// true ‚Üí style is active</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="event-getaffectedblocks">
            <h3>Event: getAffectedBlocks<a class="headerlink" href="#event-getaffectedblocks" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Purpose</strong>: Returns which model elements should be affected by style operation</p>

            
    <p><strong>When Fired</strong>: User applies/removes a style</p>

            
    <p><strong>Default Behavior</strong>: Return block elements from selection</p>

            
    <p><strong>typo3image Implementation</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">this</span>.listenTo(styleUtils, <span class="hljs-string">'getAffectedBlocks'</span>, (event, [style, element]) =&gt; {
    <span class="hljs-keyword">if</span> (style.element === <span class="hljs-string">'img'</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> editor.model.document.selection.getFirstRange().getItems()) {
            <span class="hljs-keyword">if</span> (item.name === <span class="hljs-string">'typo3image'</span>) {
                event.return = [item];  <span class="hljs-comment">// Return typo3image element</span>
                <span class="hljs-keyword">break</span>;
            }
        }
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Logic Breakdown</strong>:</p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Check Style Element</strong>: Only process img styles</li>
    <li value="2"><strong>Find typo3image</strong>: Iterate to find typo3image in selection</li>
    <li value="3">
    <p><strong>Return Element</strong>: <code>event.return = [item]</code></p>


<ul>
    <li class="dash">Return array with single typo3image element</li>
    <li class="dash">StyleUtils will apply style changes to this element</li>
</ul>
</li>
    <li value="4"><strong>Break Loop</strong>: Once found, stop searching</li>
</ol>

                
<div class="admonition note" role="alert">
    <p class="admonition-title">Note</p>
            
    <p>StyleUtils can affect multiple blocks (e.g., multiple paragraphs selected). For images, typically only one image is selected.</p>

</div>
    </section>
    </section>
            <section class="section" id="generalhtmlsupport-integration">
            <h2>GeneralHtmlSupport Integration<a class="headerlink" href="#generalhtmlsupport-integration" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="what-is-generalhtmlsupport">
            <h3>What is GeneralHtmlSupport?<a class="headerlink" href="#what-is-generalhtmlsupport" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Purpose</strong>: Manages HTML attributes that aren&#039;t core CKEditor features</p>

            
    <p><strong>Capabilities</strong>:</p>

            

<ul>
    <li class="dash">Add/remove classes via style system</li>
    <li class="dash">Manage data-* attributes</li>
    <li class="dash">Handle custom HTML attributes</li>
    <li class="dash">Sync model attributes with view</li>
</ul>

    </section>
            <section class="section" id="decoration-pattern">
            <h3>Decoration Pattern<a class="headerlink" href="#decoration-pattern" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">const</span> ghs = editor.plugins.get(<span class="hljs-string">'GeneralHtmlSupport'</span>);
ghs.decorate(<span class="hljs-string">'addModelHtmlClass'</span>);
ghs.decorate(<span class="hljs-string">'removeModelHtmlClass'</span>);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>What</strong> <code>decorate()</code> <strong>Does</strong>:</p>

            

<ul>
    <li class="dash">Makes method observable via event system</li>
    <li class="dash">Allows plugins to intercept and customize behavior</li>
    <li class="dash">Enables event listeners to modify operations</li>
</ul>

    </section>
            <section class="section" id="event-addmodelhtmlclass">
            <h3>Event: addModelHtmlClass<a class="headerlink" href="#event-addmodelhtmlclass" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Purpose</strong>: Add CSS class to model element</p>

            
    <p><strong>When Fired</strong>: Style system applies a style (adds classes)</p>

            
    <p><strong>typo3image Implementation</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">this</span>.listenTo(ghs, <span class="hljs-string">'addModelHtmlClass'</span>, (event, [viewElement, className, selectable]) =&gt; {
    <span class="hljs-keyword">if</span> (selectable &amp;&amp; selectable.name === <span class="hljs-string">'typo3image'</span>) {
        editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
            writer.setAttribute(<span class="hljs-string">'class'</span>, className.join(<span class="hljs-string">' '</span>), selectable);
        });
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Parameters</strong>:</p>

            

<ul>
    <li class="dash"><code>viewElement</code>: View layer element (not used for typo3image)</li>
    <li class="dash"><code>className</code>: Array of class names to add</li>
    <li class="dash"><code>selectable</code>: Model element to modify</li>
</ul>

            
    <p><strong>Logic</strong>:</p>

            
    
<ol start="1">
    <li value="1">
    <p><strong>Check Element</strong>: <code>if (selectable &amp;&amp; selectable.name === &#039;typo3image&#039;)</code></p>


<ul>
    <li class="dash">Only process typo3image elements</li>
</ul>
</li>
    <li value="2">
    <p><strong>Join Classes</strong>: <code>className.join(&#039; &#039;)</code></p>


<ul>
    <li class="dash">Convert array to space-separated string</li>
    <li class="dash">Example: <code>[&#039;float-left&#039;, &#039;mr-3&#039;]</code> ‚Üí <code>&#039;float-left mr-3&#039;</code></li>
</ul>
</li>
    <li value="3">
    <p><strong>Update Model</strong>: <code>writer.setAttribute(&#039;class&#039;, ..., selectable)</code></p>


<ul>
    <li class="dash">Apply classes to model element</li>
    <li class="dash">Triggers view update automatically</li>
</ul>
</li>
</ol>

            
    <p><strong>Example Flow</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code>User clicks &quot;Image Left&quot; style
    &darr;
StyleUtils determines style applies to typo3image
    &darr;
GeneralHtmlSupport.addModelHtmlClass fired
    &darr;
Event handler: className = [&#039;float-left&#039;, &#039;mr-3&#039;]
    &darr;
Model updated: class = &#039;float-left mr-3&#039;
    &darr;
View automatically updates: &lt;img class=&quot;float-left mr-3&quot; ... /&gt;
</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="event-removemodelhtmlclass">
            <h3>Event: removeModelHtmlClass<a class="headerlink" href="#event-removemodelhtmlclass" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Purpose</strong>: Remove CSS class from model element</p>

            
    <p><strong>When Fired</strong>: Style system removes a style (removes classes)</p>

            
    <p><strong>typo3image Implementation</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">this</span>.listenTo(ghs, <span class="hljs-string">'removeModelHtmlClass'</span>, (event, [viewElement, className, selectable]) =&gt; {
    <span class="hljs-keyword">if</span> (selectable &amp;&amp; selectable.name === <span class="hljs-string">'typo3image'</span>) {
        editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
            writer.removeAttribute(<span class="hljs-string">'class'</span>, selectable);
        });
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Logic</strong>:</p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Check Element</strong>: Only process typo3image</li>
    <li value="2">
    <p><strong>Remove Attribute</strong>: <code>writer.removeAttribute(&#039;class&#039;, selectable)</code></p>


<ul>
    <li class="dash">Completely removes class attribute</li>
    <li class="dash">Note: Doesn&#039;t selectively remove classes, removes all</li>
</ul>
</li>
</ol>

                
<div class="admonition note" role="alert">
    <p class="admonition-title">Note</p>
            
    <p><strong>Limitation</strong>: Current implementation removes ALL classes when any style is removed. Could be enhanced to only remove specific classes.</p>

</div>
            
    <p><strong>Enhancement Pattern</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Better implementation: remove only specific classes</span>
<span class="hljs-keyword">this</span>.listenTo(ghs, <span class="hljs-string">'removeModelHtmlClass'</span>, (event, [viewElement, className, selectable]) =&gt; {
    <span class="hljs-keyword">if</span> (selectable &amp;&amp; selectable.name === <span class="hljs-string">'typo3image'</span>) {
        editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
            <span class="hljs-keyword">const</span> currentClass = selectable.getAttribute(<span class="hljs-string">'class'</span>) || <span class="hljs-string">''</span>;
            <span class="hljs-keyword">const</span> currentClasses = currentClass.split(<span class="hljs-string">' '</span>).filter(<span class="hljs-built_in">Boolean</span>);
            <span class="hljs-keyword">const</span> classesToRemove = className;

            <span class="hljs-comment">// Keep classes not being removed</span>
            <span class="hljs-keyword">const</span> newClasses = currentClasses.filter(
                <span class="hljs-function"><span class="hljs-params">cls</span> =&gt;</span> !classesToRemove.includes(cls)
            );

            <span class="hljs-keyword">if</span> (newClasses.length &gt; <span class="hljs-number">0</span>) {
                writer.setAttribute(<span class="hljs-string">'class'</span>, newClasses.join(<span class="hljs-string">' '</span>), selectable);
            } <span class="hljs-keyword">else</span> {
                writer.removeAttribute(<span class="hljs-string">'class'</span>, selectable);
            }
        });
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="complete-integration-example">
            <h2>Complete Integration Example<a class="headerlink" href="#complete-integration-example" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="style-configuration-yaml">
            <h3>Style Configuration (YAML)<a class="headerlink" href="#style-configuration-yaml" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-comment"># Configuration/RTE/Default.yaml</span>
<span class="hljs-attr">editor:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">style:</span>
      <span class="hljs-attr">definitions:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Image Left'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['float-left',</span> <span class="hljs-string">'mr-3'</span><span class="hljs-string">]</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Image Right'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['float-right',</span> <span class="hljs-string">'ml-3'</span><span class="hljs-string">]</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Image Center'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['d-block',</span> <span class="hljs-string">'mx-auto'</span><span class="hljs-string">]</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Full Width'</span>
          <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
          <span class="hljs-attr">classes:</span> <span class="hljs-string">['w-100']</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="plugin-integration-javascript">
            <h3>Plugin Integration (JavaScript)<a class="headerlink" href="#plugin-integration-javascript" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Typo3Image</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Core</span>.<span class="hljs-title">Plugin</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> requires() {
        <span class="hljs-keyword">return</span> [<span class="hljs-string">'StyleUtils'</span>, <span class="hljs-string">'GeneralHtmlSupport'</span>];
    }

    init() {
        <span class="hljs-keyword">const</span> editor = <span class="hljs-keyword">this</span>.editor;
        <span class="hljs-keyword">const</span> styleUtils = editor.plugins.get(<span class="hljs-string">'StyleUtils'</span>);
        <span class="hljs-keyword">const</span> ghs = editor.plugins.get(<span class="hljs-string">'GeneralHtmlSupport'</span>);

        <span class="hljs-comment">// Enable img styles for typo3image</span>
        <span class="hljs-keyword">this</span>.listenTo(styleUtils, <span class="hljs-string">'isStyleEnabledForBlock'</span>, (event, [style, element]) =&gt; {
            <span class="hljs-keyword">if</span> (style.element === <span class="hljs-string">'img'</span>) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> editor.model.document.selection.getFirstRange().getItems()) {
                    <span class="hljs-keyword">if</span> (item.name === <span class="hljs-string">'typo3image'</span>) {
                        event.return = <span class="hljs-literal">true</span>;
                    }
                }
            }
        });

        <span class="hljs-comment">// Check if style is active</span>
        <span class="hljs-keyword">this</span>.listenTo(styleUtils, <span class="hljs-string">'isStyleActiveForBlock'</span>, (event, [style, element]) =&gt; {
            <span class="hljs-keyword">if</span> (style.element === <span class="hljs-string">'img'</span>) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> editor.model.document.selection.getFirstRange().getItems()) {
                    <span class="hljs-keyword">if</span> (item.name === <span class="hljs-string">'typo3image'</span>) {
                        <span class="hljs-keyword">const</span> classAttribute = item.getAttribute(<span class="hljs-string">'class'</span>);
                        <span class="hljs-keyword">if</span> (classAttribute &amp;&amp; <span class="hljs-keyword">typeof</span> classAttribute === <span class="hljs-string">'string'</span>) {
                            <span class="hljs-keyword">const</span> classlist = classAttribute.split(<span class="hljs-string">' '</span>);
                            <span class="hljs-keyword">if</span> (style.classes.filter(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> !classlist.includes(value)).length === <span class="hljs-number">0</span>) {
                                event.return = <span class="hljs-literal">true</span>;
                            }
                        }
                    }
                }
            }
        });

        <span class="hljs-comment">// Return affected elements</span>
        <span class="hljs-keyword">this</span>.listenTo(styleUtils, <span class="hljs-string">'getAffectedBlocks'</span>, (event, [style, element]) =&gt; {
            <span class="hljs-keyword">if</span> (style.element === <span class="hljs-string">'img'</span>) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> editor.model.document.selection.getFirstRange().getItems()) {
                    <span class="hljs-keyword">if</span> (item.name === <span class="hljs-string">'typo3image'</span>) {
                        event.return = [item];
                        <span class="hljs-keyword">break</span>;
                    }
                }
            }
        });

        <span class="hljs-comment">// Apply classes</span>
        ghs.decorate(<span class="hljs-string">'addModelHtmlClass'</span>);
        <span class="hljs-keyword">this</span>.listenTo(ghs, <span class="hljs-string">'addModelHtmlClass'</span>, (event, [viewElement, className, selectable]) =&gt; {
            <span class="hljs-keyword">if</span> (selectable &amp;&amp; selectable.name === <span class="hljs-string">'typo3image'</span>) {
                editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
                    writer.setAttribute(<span class="hljs-string">'class'</span>, className.join(<span class="hljs-string">' '</span>), selectable);
                });
            }
        });

        <span class="hljs-comment">// Remove classes</span>
        ghs.decorate(<span class="hljs-string">'removeModelHtmlClass'</span>);
        <span class="hljs-keyword">this</span>.listenTo(ghs, <span class="hljs-string">'removeModelHtmlClass'</span>, (event, [viewElement, className, selectable]) =&gt; {
            <span class="hljs-keyword">if</span> (selectable &amp;&amp; selectable.name === <span class="hljs-string">'typo3image'</span>) {
                editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
                    writer.removeAttribute(<span class="hljs-string">'class'</span>, selectable);
                });
            }
        });
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="troubleshooting-style-issues">
            <h2>Troubleshooting Style Issues<a class="headerlink" href="#troubleshooting-style-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-style-drop-down-disabled-for-images">
            <h3>Issue: Style Drop-down Disabled for Images<a class="headerlink" href="#issue-style-drop-down-disabled-for-images" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms</strong>:</p>

            

<ul>
    <li class="dash">Select image ‚Üí style drop-down grayed out</li>
    <li class="dash">No styles available when image selected</li>
</ul>

            
    <p><strong>Causes</strong>:</p>

            
    
<ol start="1" type="1">
    <li value="1">Missing <code>GeneralHtmlSupport</code> dependency</li>
    <li value="2">Missing <code>StyleUtils</code> dependency</li>
    <li value="3">Event listeners not registered</li>
    <li value="4">Style definitions don&#039;t target &#039;img&#039; element</li>
</ol>

            
    <p><strong>Solutions</strong>:</p>

            <section class="section" id="verify-dependencies">
            <h4>Verify Dependencies<a class="headerlink" href="#verify-dependencies" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> requires() {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'StyleUtils'</span>, <span class="hljs-string">'GeneralHtmlSupport'</span>];  <span class="hljs-comment">// Both required!</span>
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="verify-style-definitions">
            <h4>Verify Style Definitions<a class="headerlink" href="#verify-style-definitions" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-attr">style:</span>
  <span class="hljs-attr">definitions:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'My Style'</span>
      <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>  <span class="hljs-comment"># Must be 'img', not 'image'</span>
      <span class="hljs-attr">classes:</span> <span class="hljs-string">['my-class']</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="check-event-listeners">
            <h4>Check Event Listeners<a class="headerlink" href="#check-event-listeners" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Debug in browser console</span>
<span class="hljs-keyword">const</span> styleUtils = editor.plugins.get(<span class="hljs-string">'StyleUtils'</span>);
<span class="hljs-built_in">console</span>.log(styleUtils.listenerCount(<span class="hljs-string">'isStyleEnabledForBlock'</span>));
<span class="hljs-comment">// Should be &gt; 0</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="issue-style-changes-not-applied">
            <h3>Issue: Style Changes Not Applied<a class="headerlink" href="#issue-style-changes-not-applied" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms</strong>:</p>

            

<ul>
    <li class="dash">Style selected from drop-down</li>
    <li class="dash">No visual change to image</li>
    <li class="dash">Class attribute not updated</li>
</ul>

            
    <p><strong>Causes</strong>:</p>

            
    
<ol start="1" type="1">
    <li value="1">GeneralHtmlSupport event listeners not registered</li>
    <li value="2">Model-to-view conversion missing class attribute</li>
    <li value="3">CSS classes not defined in stylesheet</li>
</ol>

            
    <p><strong>Solutions</strong>:</p>

            <section class="section" id="verify-ghs-listeners">
            <h4>Verify GHS Listeners<a class="headerlink" href="#verify-ghs-listeners" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">const</span> ghs = editor.plugins.get(<span class="hljs-string">'GeneralHtmlSupport'</span>);
<span class="hljs-built_in">console</span>.log(ghs.listenerCount(<span class="hljs-string">'addModelHtmlClass'</span>));
<span class="hljs-comment">// Should be &gt; 0</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="check-class-attribute-conversion">
            <h4>Check Class Attribute Conversion<a class="headerlink" href="#check-class-attribute-conversion" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.conversion.for(<span class="hljs-string">'downcast'</span>).attributeToAttribute({
    <span class="hljs-attr">model</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'typo3image'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'class'</span> },
    <span class="hljs-attr">view</span>: <span class="hljs-string">'class'</span>
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="verify-css-loaded">
            <h4>Verify CSS Loaded<a class="headerlink" href="#verify-css-loaded" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs css"><span class="hljs-comment">/* In your stylesheet */</span>
<span class="hljs-selector-class">.float-left</span> { <span class="hljs-attribute">float</span>: left; <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">1rem</span>; }
<span class="hljs-selector-class">.float-right</span> { <span class="hljs-attribute">float</span>: right; <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">1rem</span>; }</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="issue-styles-not-shown-as-active">
            <h3>Issue: Styles Not Shown as Active<a class="headerlink" href="#issue-styles-not-shown-as-active" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms</strong>:</p>

            

<ul>
    <li class="dash">Image has correct classes</li>
    <li class="dash">Style not checked/highlighted in drop-down</li>
    <li class="dash">Cannot tell which style is applied</li>
</ul>

            
    <p><strong>Cause</strong>: <code>isStyleActiveForBlock</code> listener not working correctly</p>

            
    <p><strong>Solution</strong>:</p>

            <section class="section" id="debug-class-matching">
            <h4>Debug Class Matching<a class="headerlink" href="#debug-class-matching" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// In isStyleActiveForBlock listener</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Element classes:'</span>, item.getAttribute(<span class="hljs-string">'class'</span>));
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Style classes:'</span>, style.classes);

<span class="hljs-keyword">const</span> classlist = item.getAttribute(<span class="hljs-string">'class'</span>).split(<span class="hljs-string">' '</span>);
<span class="hljs-keyword">const</span> missing = style.classes.filter(<span class="hljs-function"><span class="hljs-params">cls</span> =&gt;</span> !classlist.includes(cls));
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Missing classes:'</span>, missing);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
    </section>
            <section class="section" id="advanced-style-patterns">
            <h2>Advanced Style Patterns<a class="headerlink" href="#advanced-style-patterns" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="multiple-class-styles">
            <h3>Multiple Class Styles<a class="headerlink" href="#multiple-class-styles" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-comment"># Complex styles with multiple classes</span>
<span class="hljs-attr">style:</span>
  <span class="hljs-attr">definitions:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Responsive Image Card'</span>
      <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
      <span class="hljs-attr">classes:</span> <span class="hljs-string">['img-fluid',</span> <span class="hljs-string">'rounded'</span><span class="hljs-string">,</span> <span class="hljs-string">'shadow-sm'</span><span class="hljs-string">,</span> <span class="hljs-string">'d-block'</span><span class="hljs-string">]</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Application</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Results in model:</span>
<span class="hljs-attr">class</span>: <span class="hljs-string">'img-fluid rounded shadow-sm d-block'</span>

<span class="hljs-comment">// View output:</span>
&lt;img <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">"img-fluid rounded shadow-sm d-block"</span> src=<span class="hljs-string">"..."</span> /&gt;</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="conditional-style-availability">
            <h3>Conditional Style Availability<a class="headerlink" href="#conditional-style-availability" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Only enable certain styles for specific users</span>
<span class="hljs-keyword">this</span>.listenTo(styleUtils, <span class="hljs-string">'isStyleEnabledForBlock'</span>, (event, [style, element]) =&gt; {
    <span class="hljs-keyword">if</span> (style.element === <span class="hljs-string">'img'</span> &amp;&amp; style.name === <span class="hljs-string">'Admin Only Style'</span>) {
        <span class="hljs-comment">// Check user permission</span>
        <span class="hljs-keyword">if</span> (!userHasAdminPermission()) {
            event.return = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// Disable this style</span>
            event.stop();  <span class="hljs-comment">// Prevent further processing</span>
            <span class="hljs-keyword">return</span>;
        }
    }

    <span class="hljs-comment">// Default behavior for other styles</span>
    <span class="hljs-keyword">if</span> (style.element === <span class="hljs-string">'img'</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> editor.model.document.selection.getFirstRange().getItems()) {
            <span class="hljs-keyword">if</span> (item.name === <span class="hljs-string">'typo3image'</span>) {
                event.return = <span class="hljs-literal">true</span>;
            }
        }
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="style-groups">
            <h3>Style Groups<a class="headerlink" href="#style-groups" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs yaml"><span class="hljs-comment"># Organize styles into groups</span>
<span class="hljs-attr">style:</span>
  <span class="hljs-attr">definitions:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Left Align'</span>
      <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
      <span class="hljs-attr">classes:</span> <span class="hljs-string">['float-left']</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Right Align'</span>
      <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
      <span class="hljs-attr">classes:</span> <span class="hljs-string">['float-right']</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Center Align'</span>
      <span class="hljs-attr">element:</span> <span class="hljs-string">'img'</span>
      <span class="hljs-attr">classes:</span> <span class="hljs-string">['mx-auto',</span> <span class="hljs-string">'d-block'</span><span class="hljs-string">]</span>

  <span class="hljs-attr">groupDefinitions:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'Image Alignment'</span>
      <span class="hljs-attr">styles:</span> <span class="hljs-string">['Left</span> <span class="hljs-string">Align',</span> <span class="hljs-string">'Right Align'</span><span class="hljs-string">,</span> <span class="hljs-string">'Center Align'</span><span class="hljs-string">]</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="performance-considerations">
            <h2>Performance Considerations<a class="headerlink" href="#performance-considerations" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="event-listener-efficiency">
            <h3>Event Listener Efficiency<a class="headerlink" href="#event-listener-efficiency" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Inefficient: Iterates entire range multiple times</span>
<span class="hljs-keyword">this</span>.listenTo(styleUtils, <span class="hljs-string">'isStyleEnabledForBlock'</span>, (event, [style]) =&gt; {
    <span class="hljs-keyword">if</span> (style.element === <span class="hljs-string">'img'</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> editor.model.document.selection.getFirstRange().getItems()) {
            <span class="hljs-keyword">if</span> (item.name === <span class="hljs-string">'typo3image'</span>) {
                event.return = <span class="hljs-literal">true</span>;
            }
        }
    }
});

<span class="hljs-comment">// Efficient: Cache selection check</span>
<span class="hljs-keyword">const</span> isTypo3ImageSelected = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> selection = editor.model.document.selection;
    <span class="hljs-keyword">const</span> element = selection.getSelectedElement();
    <span class="hljs-keyword">return</span> element &amp;&amp; element.name === <span class="hljs-string">'typo3image'</span>;
};

<span class="hljs-keyword">this</span>.listenTo(styleUtils, <span class="hljs-string">'isStyleEnabledForBlock'</span>, (event, [style]) =&gt; {
    <span class="hljs-keyword">if</span> (style.element === <span class="hljs-string">'img'</span> &amp;&amp; isTypo3ImageSelected()) {
        event.return = <span class="hljs-literal">true</span>;
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#ckeditor-plugin-development-guide">CKEditor Plugin Development</a></li>
    <li class="dash"><a href="#ckeditor-model-element">CKEditor Model Element Reference</a></li>
    <li class="dash"><a href="#ckeditor-conversions">CKEditor Conversion System</a></li>
    <li class="dash"><a href="#configuration">Configuration</a></li>
    <li class="dash"><a href="#troubleshooting-index">Troubleshooting &amp; Support</a></li>
</ul>

    </section>
    </section>

        </article>
<article>
            <section class="section" id="ckeditor-conversion-system" data-rst-anchor="ckeditor-conversions">
            <a id="ckeditor-conversions"></a>
            <h1>CKEditor Conversion System<a class="headerlink" href="#ckeditor-conversion-system" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h1>
            
    <p>Complete guide to the upcast/downcast conversion system for transforming between HTML and model representations.</p>

            <section class="section" id="conversion-architecture">
            <h2>Conversion Architecture<a class="headerlink" href="#conversion-architecture" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="three-layer-system">
            <h3>Three-Layer System<a class="headerlink" href="#three-layer-system" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Data Layer (Database/API)           ‚îÇ
‚îÇ HTML with data-* attributes          ‚îÇ
‚îÇ &lt;img data-htmlarea-file-uid=&quot;123&quot;/&gt;  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
             ‚îÇ Upcast (Load)
             ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Model Layer (Abstract)               ‚îÇ
‚îÇ typo3image element with attributes   ‚îÇ
‚îÇ { name: &#039;typo3image&#039;, fileUid: 123 } ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
             ‚îÇ Downcast (Render)
             ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ View Layer (Editor Display)          ‚îÇ
‚îÇ Visual HTML in contenteditable       ‚îÇ
‚îÇ &lt;img src=&quot;...&quot; class=&quot;...&quot; /&gt;        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="upcast-conversions">
            <h2>Upcast Conversions<a class="headerlink" href="#upcast-conversions" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="purpose">
            <h3>Purpose<a class="headerlink" href="#purpose" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Upcast</strong>: Transforms HTML (from database/API) into model elements when loading content into editor</p>

            
    <p><strong>When Used</strong>:</p>

            

<ul>
    <li class="dash">Initial content load into CKEditor</li>
    <li class="dash">Paste from clipboard</li>
    <li class="dash">Insert HTML programmatically</li>
</ul>

    </section>
            <section class="section" id="image-element-upcast">
            <h3>Image Element Upcast<a class="headerlink" href="#image-element-upcast" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.conversion.for(<span class="hljs-string">'upcast'</span>).elementToElement({
    <span class="hljs-attr">view</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'img'</span>,
        <span class="hljs-attr">attributes</span>: [<span class="hljs-string">'data-htmlarea-file-uid'</span>, <span class="hljs-string">'src'</span>]
    },
    <span class="hljs-attr">model</span>: <span class="hljs-function">(<span class="hljs-params">viewElement, { writer }</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> writer.createElement(<span class="hljs-string">'typo3image'</span>, {
            <span class="hljs-attr">fileUid</span>: viewElement.getAttribute(<span class="hljs-string">'data-htmlarea-file-uid'</span>),
            <span class="hljs-attr">fileTable</span>: viewElement.getAttribute(<span class="hljs-string">'data-htmlarea-file-table'</span>) || <span class="hljs-string">'sys_file'</span>,
            <span class="hljs-attr">src</span>: viewElement.getAttribute(<span class="hljs-string">'src'</span>),
            <span class="hljs-attr">width</span>: viewElement.getAttribute(<span class="hljs-string">'width'</span>) || <span class="hljs-string">''</span>,
            <span class="hljs-attr">height</span>: viewElement.getAttribute(<span class="hljs-string">'height'</span>) || <span class="hljs-string">''</span>,
            <span class="hljs-attr">class</span>: viewElement.getAttribute(<span class="hljs-string">'class'</span>) || <span class="hljs-string">''</span>,
            <span class="hljs-attr">alt</span>: viewElement.getAttribute(<span class="hljs-string">'alt'</span>) || <span class="hljs-string">''</span>,
            <span class="hljs-attr">altOverride</span>: viewElement.getAttribute(<span class="hljs-string">'data-alt-override'</span>) || <span class="hljs-literal">false</span>,
            <span class="hljs-attr">title</span>: viewElement.getAttribute(<span class="hljs-string">'title'</span>) || <span class="hljs-string">''</span>,
            <span class="hljs-attr">titleOverride</span>: viewElement.getAttribute(<span class="hljs-string">'data-title-override'</span>) || <span class="hljs-literal">false</span>,
            <span class="hljs-attr">enableZoom</span>: viewElement.getAttribute(<span class="hljs-string">'data-htmlarea-zoom'</span>) || <span class="hljs-literal">false</span>,
        });
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="configuration-breakdown">
            <h3>Configuration Breakdown<a class="headerlink" href="#configuration-breakdown" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="view-matcher">
            <h4>View Matcher<a class="headerlink" href="#view-matcher" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">view: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'img'</span>,
    <span class="hljs-attr">attributes</span>: [<span class="hljs-string">'data-htmlarea-file-uid'</span>, <span class="hljs-string">'src'</span>]
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Defines which HTML elements should be converted</p>

            
    <p><strong>Matching Logic</strong>:</p>

            

<ul>
    <li class="dash"><strong>Element name</strong>: Must be <code>&lt;img&gt;</code></li>
    <li class="dash"><strong>Required attributes</strong>: Must have both <code>data-htmlarea-file-uid</code> AND <code>src</code></li>
</ul>

            
    <p><strong>Examples</strong>:</p>

            
    <p>Matched (will be upcasted):</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-htmlarea-file-uid</span>=<span class="hljs-string">"123"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/fileadmin/image.jpg"</span> /&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Not matched (regular img passthrough):</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/fileadmin/image.jpg"</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- Missing data-htmlarea-file-uid --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">data-htmlarea-file-uid</span>=<span class="hljs-string">"123"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>  <span class="hljs-comment">&lt;!-- Wrong element --&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="model-creator-function">
            <h4>Model Creator Function<a class="headerlink" href="#model-creator-function" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">model: <span class="hljs-function">(<span class="hljs-params">viewElement, { writer }</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> writer.createElement(<span class="hljs-string">'typo3image'</span>, {
        <span class="hljs-comment">// attributes...</span>
    });
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Parameters</strong>:</p>

            

<ul>
    <li class="dash"><code>viewElement</code>: The matched <code>&lt;img&gt;</code> element from HTML</li>
    <li class="dash"><code>writer</code>: Model writer for creating elements</li>
</ul>

            
    <p><strong>Return</strong>: New model element with extracted attributes</p>

    </section>
            <section class="section" id="attribute-extraction">
            <h4>Attribute Extraction<a class="headerlink" href="#attribute-extraction" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">fileUid: viewElement.getAttribute(<span class="hljs-string">'data-htmlarea-file-uid'</span>),</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Pattern</strong>: Extract HTML attribute ‚Üí map to model attribute</p>

            
    <p><strong>Mappings</strong>:</p>

            <div class="table-responsive">
    <table class="table table-bordered align-default">
                            <thead>
            <tr>
                            <th>HTML Attribute</th>
                            <th>Model Attribute</th>
                            <th>Transformation</th>
                    </tr>
        </thead>
        <tbody>
    <tr>
            <td>data-htmlarea-file-uid</td>            <td>fileUid</td>            <td>Direct copy</td>    </tr>    <tr>
            <td>data-htmlarea-file-table</td>            <td>fileTable</td>            <td>Default: &#039;sys_file&#039;</td>    </tr>    <tr>
            <td>src</td>            <td>src</td>            <td>Direct copy</td>    </tr>    <tr>
            <td>width</td>            <td>width</td>            <td>Default: empty string</td>    </tr>    <tr>
            <td>height</td>            <td>height</td>            <td>Default: empty string</td>    </tr>    <tr>
            <td>class</td>            <td>class</td>            <td>Default: empty string</td>    </tr>    <tr>
            <td>alt</td>            <td>alt</td>            <td>Default: empty string</td>    </tr>    <tr>
            <td>data-alt-override</td>            <td>altOverride</td>            <td>Default: false</td>    </tr>    <tr>
            <td>title</td>            <td>title</td>            <td>Default: empty string</td>    </tr>    <tr>
            <td>data-title-override</td>            <td>titleOverride</td>            <td>Default: false</td>    </tr>    <tr>
            <td>data-htmlarea-zoom</td>            <td>enableZoom</td>            <td>Default: false</td>    </tr></tbody>    </table>
</div>
    </section>
    </section>
            <section class="section" id="upcast-example-flow">
            <h3>Upcast Example Flow<a class="headerlink" href="#upcast-example-flow" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Input HTML</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span>
    <span class="hljs-attr">src</span>=<span class="hljs-string">"/fileadmin/image.jpg"</span>
    <span class="hljs-attr">data-htmlarea-file-uid</span>=<span class="hljs-string">"123"</span>
    <span class="hljs-attr">data-htmlarea-file-table</span>=<span class="hljs-string">"sys_file"</span>
    <span class="hljs-attr">width</span>=<span class="hljs-string">"800"</span>
    <span class="hljs-attr">height</span>=<span class="hljs-string">"600"</span>
    <span class="hljs-attr">alt</span>=<span class="hljs-string">"Product photo"</span>
    <span class="hljs-attr">title</span>=<span class="hljs-string">"Click to enlarge"</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"img-fluid"</span>
    <span class="hljs-attr">data-htmlarea-zoom</span>=<span class="hljs-string">"true"</span>
/&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Upcast Process</strong>:</p>

            
    
<ol start="1" type="1">
    <li value="1">CKEditor parser encounters <code>&lt;img&gt;</code> element</li>
    <li value="2">Checks if has <code>data-htmlarea-file-uid</code> and <code>src</code></li>
    <li value="3">Calls model creator function</li>
    <li value="4">Extracts all attributes</li>
    <li value="5">Creates model element</li>
</ol>

            
    <p><strong>Result Model Element</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">{
    <span class="hljs-attr">name</span>: <span class="hljs-string">'typo3image'</span>,
    <span class="hljs-attr">attributes</span>: {
        <span class="hljs-attr">fileUid</span>: <span class="hljs-number">123</span>,
        <span class="hljs-attr">fileTable</span>: <span class="hljs-string">'sys_file'</span>,
        <span class="hljs-attr">src</span>: <span class="hljs-string">'/fileadmin/image.jpg'</span>,
        <span class="hljs-attr">width</span>: <span class="hljs-string">'800'</span>,
        <span class="hljs-attr">height</span>: <span class="hljs-string">'600'</span>,
        <span class="hljs-attr">alt</span>: <span class="hljs-string">'Product photo'</span>,
        <span class="hljs-attr">altOverride</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">title</span>: <span class="hljs-string">'Click to enlarge'</span>,
        <span class="hljs-attr">titleOverride</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">class</span>: <span class="hljs-string">'img-fluid'</span>,
        <span class="hljs-attr">enableZoom</span>: <span class="hljs-literal">true</span>
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="downcast-conversions">
            <h2>Downcast Conversions<a class="headerlink" href="#downcast-conversions" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="purpose">
            <h3>Purpose<a class="headerlink" href="#purpose" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Downcast</strong>: Transforms model elements into HTML for editor display and data saving</p>

            
    <p><strong>Two Pipelines</strong>:</p>

            
    
<ol start="1" type="1">
    <li value="1"><strong>Editing Downcast</strong>: Render in contenteditable (editor view)</li>
    <li value="2"><strong>Data Downcast</strong>: Serialize for database storage</li>
</ol>

    </section>
            <section class="section" id="image-element-downcast">
            <h3>Image Element Downcast<a class="headerlink" href="#image-element-downcast" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.conversion.for(<span class="hljs-string">'downcast'</span>).elementToElement({
    <span class="hljs-attr">model</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'typo3image'</span>,
        <span class="hljs-attr">attributes</span>: [<span class="hljs-string">'fileUid'</span>, <span class="hljs-string">'fileTable'</span>, <span class="hljs-string">'src'</span>]
    },
    <span class="hljs-attr">view</span>: <span class="hljs-function">(<span class="hljs-params">modelElement, { writer }</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> attributes = {
            <span class="hljs-string">'src'</span>: modelElement.getAttribute(<span class="hljs-string">'src'</span>),
            <span class="hljs-string">'data-htmlarea-file-uid'</span>: modelElement.getAttribute(<span class="hljs-string">'fileUid'</span>),
            <span class="hljs-string">'data-htmlarea-file-table'</span>: modelElement.getAttribute(<span class="hljs-string">'fileTable'</span>),
            <span class="hljs-string">'width'</span>: modelElement.getAttribute(<span class="hljs-string">'width'</span>),
            <span class="hljs-string">'height'</span>: modelElement.getAttribute(<span class="hljs-string">'height'</span>),
            <span class="hljs-string">'class'</span>: modelElement.getAttribute(<span class="hljs-string">'class'</span>) || <span class="hljs-string">''</span>,
            <span class="hljs-string">'title'</span>: modelElement.getAttribute(<span class="hljs-string">'title'</span>) || <span class="hljs-string">''</span>,
            <span class="hljs-string">'alt'</span>: modelElement.getAttribute(<span class="hljs-string">'alt'</span>) || <span class="hljs-string">''</span>,
        };

        <span class="hljs-keyword">if</span> (modelElement.getAttribute(<span class="hljs-string">'titleOverride'</span>)) {
            attributes[<span class="hljs-string">'data-title-override'</span>] = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (modelElement.getAttribute(<span class="hljs-string">'altOverride'</span>)) {
            attributes[<span class="hljs-string">'data-alt-override'</span>] = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (modelElement.getAttribute(<span class="hljs-string">'enableZoom'</span>)) {
            attributes[<span class="hljs-string">'data-htmlarea-zoom'</span>] = <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">return</span> writer.createEmptyElement(<span class="hljs-string">'img'</span>, attributes);
    },
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="configuration-breakdown">
            <h3>Configuration Breakdown<a class="headerlink" href="#configuration-breakdown" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <section class="section" id="model-matcher">
            <h4>Model Matcher<a class="headerlink" href="#model-matcher" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">model: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'typo3image'</span>,
    <span class="hljs-attr">attributes</span>: [<span class="hljs-string">'fileUid'</span>, <span class="hljs-string">'fileTable'</span>, <span class="hljs-string">'src'</span>]
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Defines which model elements trigger this conversion</p>

            
    <p><strong>Matching</strong>:</p>

            

<ul>
    <li class="dash">Element name is <code>typo3image</code></li>
    <li class="dash">Has <code>fileUid</code>, <code>fileTable</code>, <code>src</code> attributes (required for meaningful output)</li>
</ul>

    </section>
            <section class="section" id="view-creator-function">
            <h4>View Creator Function<a class="headerlink" href="#view-creator-function" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">view: <span class="hljs-function">(<span class="hljs-params">modelElement, { writer }</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> writer.createEmptyElement(<span class="hljs-string">'img'</span>, attributes);
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Parameters</strong>:</p>

            

<ul>
    <li class="dash"><code>modelElement</code>: The typo3image model element</li>
    <li class="dash"><code>writer</code>: View writer for creating elements</li>
</ul>

            
    <p><strong>Return</strong>: New view element (<code>&lt;img&gt;</code>)</p>

    </section>
            <section class="section" id="attribute-mapping">
            <h4>Attribute Mapping<a class="headerlink" href="#attribute-mapping" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">const</span> attributes = {
    <span class="hljs-string">'src'</span>: modelElement.getAttribute(<span class="hljs-string">'src'</span>),
    <span class="hljs-string">'data-htmlarea-file-uid'</span>: modelElement.getAttribute(<span class="hljs-string">'fileUid'</span>),
    <span class="hljs-comment">// ...</span>
};</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Pattern</strong>: Read model attribute ‚Üí map to HTML attribute</p>

            
    <p><strong>Reverse Mappings</strong>:</p>

            <div class="table-responsive">
    <table class="table table-bordered align-default">
                            <thead>
            <tr>
                            <th>Model Attribute</th>
                            <th>HTML Attribute</th>
                            <th>Transformation</th>
                    </tr>
        </thead>
        <tbody>
    <tr>
            <td>src</td>            <td>src</td>            <td>Direct copy</td>    </tr>    <tr>
            <td>fileUid</td>            <td>data-htmlarea-file-uid</td>            <td>Direct copy</td>    </tr>    <tr>
            <td>fileTable</td>            <td>data-htmlarea-file-table</td>            <td>Direct copy</td>    </tr>    <tr>
            <td>width</td>            <td>width</td>            <td>Direct copy</td>    </tr>    <tr>
            <td>height</td>            <td>height</td>            <td>Direct copy</td>    </tr>    <tr>
            <td>class</td>            <td>class</td>            <td>Default: empty string</td>    </tr>    <tr>
            <td>alt</td>            <td>alt</td>            <td>Default: empty string</td>    </tr>    <tr>
            <td>title</td>            <td>title</td>            <td>Default: empty string</td>    </tr>    <tr>
            <td>altOverride</td>            <td>data-alt-override</td>            <td>Only if true</td>    </tr>    <tr>
            <td>titleOverride</td>            <td>data-title-override</td>            <td>Only if true</td>    </tr>    <tr>
            <td>enableZoom</td>            <td>data-htmlarea-zoom</td>            <td>Only if true</td>    </tr></tbody>    </table>
</div>
    </section>
            <section class="section" id="conditional-attributes">
            <h4>Conditional Attributes<a class="headerlink" href="#conditional-attributes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h4>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-keyword">if</span> (modelElement.getAttribute(<span class="hljs-string">'titleOverride'</span>)) {
    attributes[<span class="hljs-string">'data-title-override'</span>] = <span class="hljs-literal">true</span>;
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Pattern</strong>: Only add boolean attributes when true</p>

            
    <p><strong>Why</strong>: Cleaner HTML output, avoid unnecessary attributes</p>

            
    <p><strong>Result</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-comment">&lt;!-- When titleOverride = true --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">...</span> <span class="hljs-attr">data-title-override</span>=<span class="hljs-string">"true"</span> /&gt;</span>

<span class="hljs-comment">&lt;!-- When titleOverride = false or absent --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">...</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- No data-title-override attribute --&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="downcast-example-flow">
            <h3>Downcast Example Flow<a class="headerlink" href="#downcast-example-flow" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Input Model Element</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">{
    <span class="hljs-attr">name</span>: <span class="hljs-string">'typo3image'</span>,
    <span class="hljs-attr">attributes</span>: {
        <span class="hljs-attr">fileUid</span>: <span class="hljs-number">123</span>,
        <span class="hljs-attr">fileTable</span>: <span class="hljs-string">'sys_file'</span>,
        <span class="hljs-attr">src</span>: <span class="hljs-string">'/fileadmin/image.jpg'</span>,
        <span class="hljs-attr">width</span>: <span class="hljs-string">'800'</span>,
        <span class="hljs-attr">height</span>: <span class="hljs-string">'600'</span>,
        <span class="hljs-attr">alt</span>: <span class="hljs-string">'Product photo'</span>,
        <span class="hljs-attr">altOverride</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">class</span>: <span class="hljs-string">'img-fluid'</span>,
        <span class="hljs-attr">enableZoom</span>: <span class="hljs-literal">true</span>
    }
}</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Downcast Process</strong>:</p>

            
    
<ol start="1" type="1">
    <li value="1">CKEditor needs to render model element</li>
    <li value="2">Finds typo3image ‚Üí elementToElement converter</li>
    <li value="3">Calls view creator function</li>
    <li value="4">Maps all attributes</li>
    <li value="5">Adds conditional attributes</li>
    <li value="6">Creates view element</li>
</ol>

            
    <p><strong>Result HTML</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span>
    <span class="hljs-attr">src</span>=<span class="hljs-string">"/fileadmin/image.jpg"</span>
    <span class="hljs-attr">data-htmlarea-file-uid</span>=<span class="hljs-string">"123"</span>
    <span class="hljs-attr">data-htmlarea-file-table</span>=<span class="hljs-string">"sys_file"</span>
    <span class="hljs-attr">width</span>=<span class="hljs-string">"800"</span>
    <span class="hljs-attr">height</span>=<span class="hljs-string">"600"</span>
    <span class="hljs-attr">alt</span>=<span class="hljs-string">"Product photo"</span>
    <span class="hljs-attr">data-alt-override</span>=<span class="hljs-string">"true"</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"img-fluid"</span>
    <span class="hljs-attr">data-htmlarea-zoom</span>=<span class="hljs-string">"true"</span>
/&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="attribute-converters">
            <h2>Attribute Converters<a class="headerlink" href="#attribute-converters" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="class-attribute-converter">
            <h3>Class Attribute Converter<a class="headerlink" href="#class-attribute-converter" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.conversion.for(<span class="hljs-string">'downcast'</span>).attributeToAttribute({
    <span class="hljs-attr">model</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'typo3image'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'class'</span> },
    <span class="hljs-attr">view</span>: <span class="hljs-string">'class'</span>
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p><strong>Purpose</strong>: Immediately sync class attribute changes to view</p>

                
<div class="admonition note" role="alert">
    <p class="admonition-title">Note</p>
            
    <p>The elementToElement converter only runs on element creation. This converter handles attribute updates.</p>

</div>
            
    <p><strong>Behavior</strong>:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// User changes class via style system</span>
editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
    writer.setAttribute(<span class="hljs-string">'class'</span>, <span class="hljs-string">'float-left mr-3'</span>, modelElement);
});

<span class="hljs-comment">// Immediately reflected in view</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"float-left mr-3"</span> <span class="hljs-attr">...</span> /&gt;</span></span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="custom-attribute-converters">
            <h3>Custom Attribute Converters<a class="headerlink" href="#custom-attribute-converters" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>You can add converters for any attribute:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Width changes immediately visible</span>
editor.conversion.for(<span class="hljs-string">'downcast'</span>).attributeToAttribute({
    <span class="hljs-attr">model</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'typo3image'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'width'</span> },
    <span class="hljs-attr">view</span>: <span class="hljs-string">'width'</span>
});

<span class="hljs-comment">// Alt changes immediately visible</span>
editor.conversion.for(<span class="hljs-string">'downcast'</span>).attributeToAttribute({
    <span class="hljs-attr">model</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'typo3image'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'alt'</span> },
    <span class="hljs-attr">view</span>: <span class="hljs-string">'alt'</span>
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="data-pipeline">
            <h2>Data Pipeline<a class="headerlink" href="#data-pipeline" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="complete-load-edit-save-flow">
            <h3>Complete Load ‚Üí Edit ‚Üí Save Flow<a class="headerlink" href="#complete-load-edit-save-flow" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code>1. Load from Database
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
   HTML String
   &lt;img data-htmlarea-file-uid=&quot;123&quot; src=&quot;...&quot; /&gt;

2. Upcast (HTML &rarr; Model)
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
   Model Element
   typo3image { fileUid: 123, src: &quot;...&quot; }

3. Edit in Editor
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
   Model Changes
   width: &quot;800&quot; &rarr; &quot;1200&quot;
   class: &quot;&quot; &rarr; &quot;float-left&quot;

4. Downcast (Model &rarr; View)
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
   View Updates
   &lt;img width=&quot;1200&quot; class=&quot;float-left&quot; ... /&gt;

5. Save to Database
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
   Data Downcast &rarr; HTML String
   &lt;img data-htmlarea-file-uid=&quot;123&quot; width=&quot;1200&quot; class=&quot;float-left&quot; ... /&gt;

6. Backend Processing
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
   RteImagesDbHook processes HTML
   Magic image processing, URL updates
</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="paste-handling">
            <h2>Paste Handling<a class="headerlink" href="#paste-handling" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="paste-from-external-source">
            <h3>Paste from External Source<a class="headerlink" href="#paste-from-external-source" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p>When pasting HTML from external sources (websites, Word, etc.):</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code>1. Browser Paste Event
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
   External HTML
   &lt;img src=&quot;https://example.com/image.jpg&quot; /&gt;

2. Upcast Attempted
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
   Check: data-htmlarea-file-uid present? ‚ùå
   Result: Upcast skipped, treated as regular &lt;img&gt;

3. Fallback Handling
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
   CKEditor default image handling
   May need custom paste processor for external images
</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="paste-from-same-editor">
            <h3>Paste from Same Editor<a class="headerlink" href="#paste-from-same-editor" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code>1. Copy typo3image
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
   Clipboard contains model element

2. Paste
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
   Direct model copy (no conversion needed)

3. Result
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫
   Duplicate typo3image with same attributes
</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="custom-conversion-patterns">
            <h2>Custom Conversion Patterns<a class="headerlink" href="#custom-conversion-patterns" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="pattern-1-transformation-during-upcast">
            <h3>Pattern 1: Transformation During Upcast<a class="headerlink" href="#pattern-1-transformation-during-upcast" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.conversion.for(<span class="hljs-string">'upcast'</span>).elementToElement({
    <span class="hljs-attr">view</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'img'</span>,
        <span class="hljs-attr">attributes</span>: [<span class="hljs-string">'data-htmlarea-file-uid'</span>]
    },
    <span class="hljs-attr">model</span>: <span class="hljs-function">(<span class="hljs-params">viewElement, { writer }</span>) =&gt;</span> {
        <span class="hljs-comment">// Transform srcset to src</span>
        <span class="hljs-keyword">const</span> src = viewElement.getAttribute(<span class="hljs-string">'src'</span>) ||
                    viewElement.getAttribute(<span class="hljs-string">'srcset'</span>)?.split(<span class="hljs-string">','</span>)[<span class="hljs-number">0</span>];

        <span class="hljs-comment">// Parse dimensions from style</span>
        <span class="hljs-keyword">const</span> style = viewElement.getAttribute(<span class="hljs-string">'style'</span>) || <span class="hljs-string">''</span>;
        <span class="hljs-keyword">const</span> widthMatch = style.match(<span class="hljs-regexp">/width:\s*(\d+)px/</span>);
        <span class="hljs-keyword">const</span> heightMatch = style.match(<span class="hljs-regexp">/height:\s*(\d+)px/</span>);

        <span class="hljs-keyword">return</span> writer.createElement(<span class="hljs-string">'typo3image'</span>, {
            <span class="hljs-attr">src</span>: src,
            <span class="hljs-attr">width</span>: widthMatch ? widthMatch[<span class="hljs-number">1</span>] : <span class="hljs-string">''</span>,
            <span class="hljs-attr">height</span>: heightMatch ? heightMatch[<span class="hljs-number">1</span>] : <span class="hljs-string">''</span>,
            <span class="hljs-comment">// ... other attributes</span>
        });
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="pattern-2-conditional-downcast">
            <h3>Pattern 2: Conditional Downcast<a class="headerlink" href="#pattern-2-conditional-downcast" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.conversion.for(<span class="hljs-string">'downcast'</span>).elementToElement({
    <span class="hljs-attr">model</span>: <span class="hljs-string">'typo3image'</span>,
    <span class="hljs-attr">view</span>: <span class="hljs-function">(<span class="hljs-params">modelElement, { writer }</span>) =&gt;</span> {
        <span class="hljs-comment">// Different output based on context</span>
        <span class="hljs-keyword">const</span> width = <span class="hljs-built_in">parseInt</span>(modelElement.getAttribute(<span class="hljs-string">'width'</span>), <span class="hljs-number">10</span>);

        <span class="hljs-comment">// Large images get responsive class</span>
        <span class="hljs-keyword">if</span> (width &gt; <span class="hljs-number">1200</span>) {
            attributes[<span class="hljs-string">'class'</span>] = (attributes[<span class="hljs-string">'class'</span>] || <span class="hljs-string">''</span>) + <span class="hljs-string">' img-responsive'</span>;
        }

        <span class="hljs-keyword">return</span> writer.createEmptyElement(<span class="hljs-string">'img'</span>, attributes);
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="pattern-3-multi-element-conversion">
            <h3>Pattern 3: Multi-Element Conversion<a class="headerlink" href="#pattern-3-multi-element-conversion" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Convert linked image to nested structure</span>
editor.conversion.for(<span class="hljs-string">'downcast'</span>).elementToStructure({
    <span class="hljs-attr">model</span>: <span class="hljs-string">'typo3image'</span>,
    <span class="hljs-attr">view</span>: <span class="hljs-function">(<span class="hljs-params">modelElement, { writer }</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> linkHref = modelElement.getAttribute(<span class="hljs-string">'linkHref'</span>);

        <span class="hljs-keyword">if</span> (linkHref) {
            <span class="hljs-comment">// Create nested structure: &lt;a&gt;&lt;img/&gt;&lt;/a&gt;</span>
            <span class="hljs-keyword">const</span> img = writer.createEmptyElement(<span class="hljs-string">'img'</span>, imgAttributes);
            <span class="hljs-keyword">const</span> link = writer.createContainerElement(<span class="hljs-string">'a'</span>, { <span class="hljs-attr">href</span>: linkHref });
            writer.insert(writer.createPositionAt(link, <span class="hljs-number">0</span>), img);
            <span class="hljs-keyword">return</span> link;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// Just image</span>
            <span class="hljs-keyword">return</span> writer.createEmptyElement(<span class="hljs-string">'img'</span>, imgAttributes);
        }
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="debugging-conversions">
            <h2>Debugging Conversions<a class="headerlink" href="#debugging-conversions" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="logging-upcast">
            <h3>Logging Upcast<a class="headerlink" href="#logging-upcast" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.conversion.for(<span class="hljs-string">'upcast'</span>).elementToElement({
    <span class="hljs-attr">view</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'img'</span>, <span class="hljs-attr">attributes</span>: [<span class="hljs-string">'data-htmlarea-file-uid'</span>] },
    <span class="hljs-attr">model</span>: <span class="hljs-function">(<span class="hljs-params">viewElement, { writer }</span>) =&gt;</span> {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Upcasting image:'</span>, {
            <span class="hljs-attr">src</span>: viewElement.getAttribute(<span class="hljs-string">'src'</span>),
            <span class="hljs-attr">fileUid</span>: viewElement.getAttribute(<span class="hljs-string">'data-htmlarea-file-uid'</span>),
            <span class="hljs-attr">allAttributes</span>: <span class="hljs-built_in">Array</span>.from(viewElement.getAttributes())
        });

        <span class="hljs-keyword">return</span> writer.createElement(<span class="hljs-string">'typo3image'</span>, {
            <span class="hljs-comment">// ... attributes</span>
        });
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="logging-downcast">
            <h3>Logging Downcast<a class="headerlink" href="#logging-downcast" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.conversion.for(<span class="hljs-string">'downcast'</span>).elementToElement({
    <span class="hljs-attr">model</span>: <span class="hljs-string">'typo3image'</span>,
    <span class="hljs-attr">view</span>: <span class="hljs-function">(<span class="hljs-params">modelElement, { writer }</span>) =&gt;</span> {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Downcasting typo3image:'</span>, {
            <span class="hljs-attr">fileUid</span>: modelElement.getAttribute(<span class="hljs-string">'fileUid'</span>),
            <span class="hljs-attr">src</span>: modelElement.getAttribute(<span class="hljs-string">'src'</span>),
            <span class="hljs-attr">allAttributes</span>: <span class="hljs-built_in">Array</span>.from(modelElement.getAttributes())
        });

        <span class="hljs-keyword">return</span> writer.createEmptyElement(<span class="hljs-string">'img'</span>, attributes);
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="inspecting-conversion-results">
            <h3>Inspecting Conversion Results<a class="headerlink" href="#inspecting-conversion-results" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// After loading content</span>
editor.model.change(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> root = editor.model.document.getRoot();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> root.getChildren()) {
        <span class="hljs-keyword">if</span> (item.name === <span class="hljs-string">'typo3image'</span>) {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Found typo3image:'</span>, {
                <span class="hljs-attr">fileUid</span>: item.getAttribute(<span class="hljs-string">'fileUid'</span>),
                <span class="hljs-attr">src</span>: item.getAttribute(<span class="hljs-string">'src'</span>)
            });
        }
    }
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="common-issues">
            <h2>Common Issues<a class="headerlink" href="#common-issues" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="issue-images-not-converting-on-load">
            <h3>Issue: Images Not Converting on Load<a class="headerlink" href="#issue-images-not-converting-on-load" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms</strong>:</p>

            

<ul>
    <li class="dash">HTML loaded but no typo3image elements in model</li>
    <li class="dash">Images appear as plain text or broken</li>
</ul>

            
    <p><strong>Causes</strong>:</p>

            
    
<ol start="1" type="1">
    <li value="1">Missing <code>data-htmlarea-file-uid</code> attribute</li>
    <li value="2">Upcast converter not registered</li>
    <li value="3">View matcher too restrictive</li>
</ol>

            
    <p><strong>Solutions</strong>:</p>

            
    <p>Verify HTML has required attributes:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs xml"><span class="hljs-comment">&lt;!-- Will convert --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-htmlarea-file-uid</span>=<span class="hljs-string">"123"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"..."</span> /&gt;</span>

<span class="hljs-comment">&lt;!-- Won't convert (missing required attribute) --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"..."</span> /&gt;</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Check converter registration:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Verify in browser console</span>
<span class="hljs-built_in">console</span>.log(editor.conversion);
<span class="hljs-comment">// Should show upcast/downcast converters</span></code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="issue-attributes-lost-during-conversion">
            <h3>Issue: Attributes Lost During Conversion<a class="headerlink" href="#issue-attributes-lost-during-conversion" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms</strong>:</p>

            

<ul>
    <li class="dash">Attributes present in HTML/model</li>
    <li class="dash">Missing in view/output</li>
</ul>

            
    <p><strong>Causes</strong>:</p>

            
    
<ol start="1" type="1">
    <li value="1">Attribute not in schema <code>allowAttributes</code> list</li>
    <li value="2">Attribute not mapped in conversion</li>
    <li value="3">Conditional logic skipping attribute</li>
</ol>

            
    <p><strong>Solutions</strong>:</p>

            
    <p>Verify schema allows attribute:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">allowAttributes: [
    <span class="hljs-string">'src'</span>, <span class="hljs-string">'fileUid'</span>, <span class="hljs-comment">/* add missing attribute here */</span>
]</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
            
    <p>Add to conversion:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// In upcast</span>
<span class="hljs-attr">myCustomAttribute</span>: viewElement.getAttribute(<span class="hljs-string">'data-custom'</span>),

<span class="hljs-comment">// In downcast</span>
<span class="hljs-string">'data-custom'</span>: modelElement.getAttribute(<span class="hljs-string">'myCustomAttribute'</span>),</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="issue-view-not-updating-when-model-changes">
            <h3>Issue: View Not Updating When Model Changes<a class="headerlink" href="#issue-view-not-updating-when-model-changes" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            
    <p><strong>Symptoms</strong>:</p>

            

<ul>
    <li class="dash">Model attribute updated</li>
    <li class="dash">View doesn&#039;t reflect change</li>
    <li class="dash">Need to reload to see changes</li>
</ul>

            
    <p><strong>Cause</strong>: Missing attribute converter for immediate sync</p>

            
    <p><strong>Solution</strong>:</p>

            
    <p>Add attribute converter:</p>

            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript">editor.conversion.for(<span class="hljs-string">'downcast'</span>).attributeToAttribute({
    <span class="hljs-attr">model</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'typo3image'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'myAttribute'</span> },
    <span class="hljs-attr">view</span>: <span class="hljs-string">'data-my-attribute'</span>
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="performance-optimization">
            <h2>Performance Optimization<a class="headerlink" href="#performance-optimization" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            <section class="section" id="batch-conversions">
            <h3>Batch Conversions<a class="headerlink" href="#batch-conversions" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Inefficient: Convert one at a time</span>
images.forEach(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> {
    editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
        writer.setAttribute(<span class="hljs-string">'class'</span>, <span class="hljs-string">'processed'</span>, img);
    });
});

<span class="hljs-comment">// Efficient: Single model change batch</span>
editor.model.change(<span class="hljs-function"><span class="hljs-params">writer</span> =&gt;</span> {
    images.forEach(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> {
        writer.setAttribute(<span class="hljs-string">'class'</span>, <span class="hljs-string">'processed'</span>, img);
    });
});</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
            <section class="section" id="lazy-attribute-reading">
            <h3>Lazy Attribute Reading<a class="headerlink" href="#lazy-attribute-reading" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h3>
            <div class="code-block-wrapper" translate="no">
            
    <pre class="code-block"><code class="hljs javascript"><span class="hljs-comment">// Inefficient: Read all attributes upfront</span>
<span class="hljs-keyword">const</span> allAttrs = {
    <span class="hljs-attr">src</span>: viewElement.getAttribute(<span class="hljs-string">'src'</span>),
    <span class="hljs-attr">width</span>: viewElement.getAttribute(<span class="hljs-string">'width'</span>),
    <span class="hljs-attr">height</span>: viewElement.getAttribute(<span class="hljs-string">'height'</span>),
    <span class="hljs-comment">// ... 20 more attributes</span>
};

<span class="hljs-comment">// Efficient: Read only needed attributes</span>
<span class="hljs-keyword">const</span> src = viewElement.getAttribute(<span class="hljs-string">'src'</span>);
<span class="hljs-keyword">const</span> fileUid = viewElement.getAttribute(<span class="hljs-string">'data-htmlarea-file-uid'</span>);</code></pre>
    <div class="code-block-actions">        <button class="code-block-copy" title="Copy to clipboard">
            <i class="icon fa-regular fa-copy code-block-copy-icon"></i>
            <i class="fa-solid fa-check code-block-check-icon code-block-hide"></i>
        </button>
        <span class="code-block-check-tooltip code-block-hide" aria-live="polite">Copied!</span>
    </div>
</div>
    </section>
    </section>
            <section class="section" id="related-documentation">
            <h2>Related Documentation<a class="headerlink" href="#related-documentation" data-bs-toggle="modal" data-bs-target="#linkReferenceModal"  title="Reference this headline">&nbsp;<i class="fa-solid fa-link"></i></a></h2>
            

<ul>
    <li class="dash"><a href="#ckeditor-plugin-development-guide">CKEditor Plugin Development</a></li>
    <li class="dash"><a href="#ckeditor-model-element">CKEditor Model Element Reference</a></li>
    <li class="dash"><a href="#ckeditor-style-integration">CKEditor Style Integration</a></li>
    <li class="dash"><a href="#architecture-overview">System Architecture</a></li>
    <li class="dash"><a href="#api-datahandling">Data Handling API</a></li>
</ul>

    </section>
    </section>

        </article>
<!-- content end -->
                                                        </div>
            </div>
        </div>
    </main>

    <div class="modal fade" id="linkReferenceModal" tabindex="-1" aria-labelledby="linkReferenceModalLabel"
    aria-hidden="true" data-current-filename="">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="linkReferenceModalLabel">Reference to the headline</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-success d-none" id="permalink-alert-success" role="alert"></div>
                <div class="mb-3">
                    <label for="permalink-uri" class="col-form-label">URL</label>
                    <div class="input-group">
                        <input class="form-control code" id="permalink-uri" readonly>
                        <button type="button" class="btn btn-outline-secondary copy-button" data-target="permalink-uri"><i class="far fa-clone"></i></button>
                    </div>
                    <div class="permalink-short-wrapper">
                        <label for="permalink-short" class="col-form-label">Permalink (Shortlink)</label>
                        <div class="input-group">
                            <input class="form-control code" id="permalink-short" readonly>
                            <button type="button" class="btn btn-outline-secondary copy-button" data-target="permalink-short"><i class="far fa-clone"></i></button>
                        </div>
                        <p><em>Copy and freely share the link</em></p>
                    </div>
                </div>
                <div class="mb-3">
                    <div class="alert alert-warning alert-permalink-rst" role="alert">This link target has no permanent anchor assigned.The link below can be used, but is prone to change if the page gets moved.
                    </div>
                    <label for="permalink-rst" class="col-form-label">Link in reStructuredText (reST)</label>
                    <div class="input-group">
                        <textarea class="form-control code" id="permalink-rst" readonly></textarea>
                        <button type="button" class="btn btn-outline-secondary copy-button" data-target="permalink-rst"><i class="far fa-clone"></i></button>
                    </div>
                    <p><em>Copy this link into your TYPO3 manual.</em></p>
                </div>
                <div class="mb-3">
                    <label for="permalink-md" class="col-form-label">Link in Markdown</label>
                    <div class="input-group">
                        <textarea class="form-control code" id="permalink-md" readonly></textarea>
                        <button type="button" class="btn btn-outline-secondary copy-button" data-target="permalink-md"><i class="far fa-clone"></i></button>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="permalink-html" class="col-form-label">Link in HTML</label>
                                        <div class="input-group">
                        <textarea class="form-control code" id="permalink-html" readonly></textarea>
                        <button type="button" class="btn btn-outline-secondary copy-button" data-target="permalink-html"><i class="far fa-clone"></i></button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>    <div class="modal fade" id="generalModal" tabindex="-1" aria-labelledby="linkReferenceModalLabel"
    aria-hidden="true" data-current-filename=""
>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="generalModalLabel"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-success d-none" id="general-alert-success" role="alert"></div>
                <div id="generalModalContent">
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <div id="generalModalCustomButtons"></div>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="fa-regular fa-circle-xmark"></i>&nbsp;Close</button>
            </div>
        </div>
    </div>
</div></div>


<footer class="page-footer">
    <div class="frame frame-ruler-before frame-background-dark">
        <div class="frame-container">
            <div class="frame-inner">
                                <div class="footer-additional">
                    <p class="text-center">Last rendered: Oct 23, 2025 19:49</p>
                </div>
                <div class="footer-meta">
                    <ul class="footer-meta-navigation">
                        <li><a href="https://typo3.org/legal-notice" rel="nofollow" target="_blank" title="Legal Notice">Legal Notice</a></li>
                        <li><a href="https://typo3.org/privacy-policy" rel="nofollow" target="_blank" title="Privacy Policy">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>
<script src="../_resources/js/popper.min.js"></script>
<script src="../_resources/js/bootstrap.min.js"></script>
<script src="../_resources/js/theme.min.js"></script>

<!--
 Locally rendered. No tracking embedded.
-->
</body>
</html>