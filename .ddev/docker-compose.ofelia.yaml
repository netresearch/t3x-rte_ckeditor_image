# Ofelia configuration for TYPO3 scheduler jobs
# Runs the TYPO3 v12 scheduler every minute

services:
  web:
    labels:
      ofelia.job-exec.typo3-scheduler-v12.schedule: "@every 1m"
      ofelia.job-exec.typo3-scheduler-v12.command: "bash -c 'cd /var/www/html/v12 && [ -f vendor/bin/typo3 ] && vendor/bin/typo3 scheduler:run || true'"
      ofelia.job-exec.typo3-scheduler-v12.no-overlap: "true"

      ofelia.job-exec.cache-warmup-v12.schedule: "@every 1h"
      ofelia.job-exec.cache-warmup-v12.command: "bash -c 'cd /var/www/html/v12 && vendor/bin/typo3 cache:warmup || true'"
      ofelia.job-exec.cache-warmup-v12.no-overlap: "true"
